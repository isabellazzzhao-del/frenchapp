{"ast":null,"code":"var _jsxFileName = \"/Users/zhaolu/Documents/Code/frenchapp/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Search, Volume2, Star, BookOpen, ArrowRight, Loader2, Layers, X, ChevronDown, ChevronUp, Info, Mic, MessageCircle, Send, Heart, PlayCircle, Globe, LayoutGrid } from 'lucide-react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInAnonymously, onAuthStateChanged } from 'firebase/auth';\nimport { getFirestore, collection, addDoc, query, onSnapshot, deleteDoc, doc, serverTimestamp, where, getDocs } from 'firebase/firestore';\n\n// ==========================================\n// ⚠️ 请在下方填入您的配置信息\n// ==========================================\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCBItd52zWdktiEuHmQIXbB4Q7sLM5602o\",\n  authDomain: \"frenchapp-6b44a.firebaseapp.com\",\n  projectId: \"frenchapp-6b44a\",\n  storageBucket: \"frenchapp-6b44a.firebasestorage.app\",\n  messagingSenderId: \"988616724582\",\n  appId: \"1:988616724582:web:723f9d9c75f8810b019da7\"\n};\nconst GEMINI_API_KEY = \"AIzaSyBivevjn0wQ3dD2OCuh98L2iALBssZfsq4\";\n\n// ==========================================\n\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst appId = \"french-memo-app\";\n\n// --- API Helper for Gemini ---\n\n// 1. 获取单个单词详情\nconst fetchWordData = async input => {\n  var _data$candidates, _data$candidates$, _data$candidates$$con, _data$candidates$$con2, _data$candidates$$con3;\n  const apiKey = GEMINI_API_KEY;\n  if (!apiKey || apiKey.includes(\"YOUR_GEMINI_API_KEY\")) throw new Error(\"API Key not set\");\n  const prompt = `\n    User input: \"${input}\".\n    Task: \n    1. Detect language. If NOT French, translate to common French word.\n    2. Analyze the French word.\n    \n    CRITICAL: Keep definitions EXTREMELY SHORT (1-3 words max). Just the direct translation. NO explanations.\n    \n    Return strictly valid JSON (no markdown):\n    {\n      \"word\": \"The French word\",\n      \"definitions\": {\n        \"en\": \"Direct translation (1-3 words)\",\n        \"zh\": \"直接的中文对应词(仅词义，不解释)\"\n      },\n      \"partOfSpeech\": \"abbrev. (n.m./adj.)\",\n      \"collection\": \"Category (e.g. Fruits)\",\n      \"relatedWords\": [\"synonym1\", \"antonym1\", \"related1\"],\n      \"relatedPhrases\": [\n        {\"fr\": \"Phrase 1\", \"zh\": \"Meaning 1\"},\n        {\"fr\": \"Phrase 2\", \"zh\": \"Meaning 2\"}\n      ],\n      \"examplePhrase\": {\n        \"fr\": \"Simple French sentence\",\n        \"en\": \"English translation\",\n        \"zh\": \"Chinese translation\",\n        \"explanation\": \"Brief grammar note\"\n      }\n    }\n  `;\n  const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      contents: [{\n        parts: [{\n          text: prompt\n        }]\n      }]\n    })\n  });\n  const data = await response.json();\n  const text = (_data$candidates = data.candidates) === null || _data$candidates === void 0 ? void 0 : (_data$candidates$ = _data$candidates[0]) === null || _data$candidates$ === void 0 ? void 0 : (_data$candidates$$con = _data$candidates$.content) === null || _data$candidates$$con === void 0 ? void 0 : (_data$candidates$$con2 = _data$candidates$$con.parts) === null || _data$candidates$$con2 === void 0 ? void 0 : (_data$candidates$$con3 = _data$candidates$$con2[0]) === null || _data$candidates$$con3 === void 0 ? void 0 : _data$candidates$$con3.text;\n  return text ? JSON.parse(text) : null;\n};\n\n// 2. 获取专辑列表\nconst fetchAlbumData = async category => {\n  var _data$candidates2, _data$candidates2$, _data$candidates2$$co, _data$candidates2$$co2, _data$candidates2$$co3;\n  const apiKey = GEMINI_API_KEY;\n  const prompt = `\n    List 8 common French vocabulary items for category: \"${category}\".\n    Return valid JSON:\n    {\n      \"category\": \"${category}\",\n      \"items\": [\n        { \"word\": \"FrenchWord\", \"article\": \"le/la/un\", \"zh\": \"Chinese\", \"isVisual\": true/false }\n      ]\n    }\n  `;\n  const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      contents: [{\n        parts: [{\n          text: prompt\n        }]\n      }]\n    })\n  });\n  const data = await response.json();\n  const text = (_data$candidates2 = data.candidates) === null || _data$candidates2 === void 0 ? void 0 : (_data$candidates2$ = _data$candidates2[0]) === null || _data$candidates2$ === void 0 ? void 0 : (_data$candidates2$$co = _data$candidates2$.content) === null || _data$candidates2$$co === void 0 ? void 0 : (_data$candidates2$$co2 = _data$candidates2$$co.parts) === null || _data$candidates2$$co2 === void 0 ? void 0 : (_data$candidates2$$co3 = _data$candidates2$$co2[0]) === null || _data$candidates2$$co3 === void 0 ? void 0 : _data$candidates2$$co3.text;\n  return text ? JSON.parse(text) : null;\n};\n\n// 3. 聊天 API (已更新 Prompt 以支持分离翻译)\nconst fetchChatResponse = async (history, message) => {\n  var _data$candidates3, _data$candidates3$, _data$candidates3$$co, _data$candidates3$$co2, _data$candidates3$$co3;\n  const apiKey = GEMINI_API_KEY;\n  const prompt = `\n    You are a friendly French language tutor. \n    User message: \"${message}\".\n    Conversation history: ${JSON.stringify(history)}.\n    \n    Task: Reply in French. \n    CRITICAL FORMATTING: After your French reply, add the separator \"|||\" and then provide the English translation.\n    Example output: Bonjour, comment ça va? ||| Hello, how are you?\n  `;\n  const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      contents: [{\n        parts: [{\n          text: prompt\n        }]\n      }]\n    })\n  });\n  const data = await response.json();\n  return ((_data$candidates3 = data.candidates) === null || _data$candidates3 === void 0 ? void 0 : (_data$candidates3$ = _data$candidates3[0]) === null || _data$candidates3$ === void 0 ? void 0 : (_data$candidates3$$co = _data$candidates3$.content) === null || _data$candidates3$$co === void 0 ? void 0 : (_data$candidates3$$co2 = _data$candidates3$$co.parts) === null || _data$candidates3$$co2 === void 0 ? void 0 : (_data$candidates3$$co3 = _data$candidates3$$co2[0]) === null || _data$candidates3$$co3 === void 0 ? void 0 : _data$candidates3$$co3.text) || \"Désolé, je ne comprends pas. ||| Sorry, I don't understand.\";\n};\n\n// --- Sub-Components (Defined OUTSIDE App to fix focus bugs) ---\n\nconst getImageUrl = (keyword, size = 'medium') => {\n  const dimensions = size === 'small' ? 'width=200&height=200' : 'width=600&height=400';\n  return `https://image.pollinations.ai/prompt/realistic%20${keyword}%20french%20context?${dimensions}&nologo=true&seed=${Math.random()}`;\n};\nconst handleSpeak = text => {\n  if ('speechSynthesis' in window) {\n    window.speechSynthesis.cancel();\n    const utterance = new SpeechSynthesisUtterance(text);\n    utterance.lang = 'fr-FR';\n    utterance.rate = 0.9;\n    window.speechSynthesis.speak(utterance);\n  }\n};\nconst AlbumView = ({\n  data,\n  handleSearch,\n  favoriteAlbums,\n  toggleFavoriteAlbum,\n  setActiveTab\n}) => {\n  if (!data) return null;\n  const isFav = favoriteAlbums.some(f => f.category === data.category);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('search'),\n          className: \"p-2 hover:bg-gray-100 rounded-full transition-colors\",\n          children: /*#__PURE__*/_jsxDEV(ArrowRight, {\n            className: \"rotate-180 text-gray-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 159,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 158,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-gray-900 flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Layers, {\n            className: \"text-blue-600\",\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 162,\n            columnNumber: 13\n          }, this), data.category]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 161,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 157,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => toggleFavoriteAlbum(data),\n        className: `p-3 rounded-full transition-colors ${isFav ? 'bg-red-50 text-red-500' : 'bg-gray-50 text-gray-400 hover:text-red-400'}`,\n        children: /*#__PURE__*/_jsxDEV(Heart, {\n          size: 24,\n          fill: isFav ? \"currentColor\" : \"none\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 170,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 166,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 156,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-2 gap-4\",\n      children: data.items.map((item, idx) => {\n        if (item.isVisual) {\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleSearch(null, item.word),\n            className: \"group relative flex flex-col items-center bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-lg transition-all border border-gray-100 text-left\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full aspect-[4/3] bg-gray-50 relative overflow-hidden\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: getImageUrl(item.word, 'small'),\n                alt: item.word,\n                className: \"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 184,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-3 pt-8\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-white font-medium text-lg\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"opacity-70 text-sm mr-1 font-normal\",\n                    children: item.article\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 191,\n                    columnNumber: 24\n                  }, this), item.word]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 190,\n                  columnNumber: 22\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 189,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 183,\n              columnNumber: 17\n            }, this)\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 178,\n            columnNumber: 15\n          }, this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleSearch(null, item.word),\n            className: \"col-span-2 flex items-center justify-between p-4 bg-white rounded-xl shadow-sm hover:shadow-md border border-gray-100 hover:border-blue-200 transition-all group\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-lg font-bold text-gray-800 group-hover:text-blue-600 transition-colors\",\n                children: item.word\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 206,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 205,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm text-gray-500 font-medium\",\n              children: item.zh\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 208,\n              columnNumber: 17\n            }, this)]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 200,\n            columnNumber: 15\n          }, this);\n        }\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 155,\n    columnNumber: 5\n  }, this);\n};\n_c = AlbumView;\nconst WordCard = ({\n  data,\n  onDelete,\n  handleAlbumClick,\n  handleSearch,\n  toggleFavoriteWord,\n  favorites\n}) => {\n  _s();\n  const [showPhraseDetails, setShowPhraseDetails] = useState(false);\n  const [showAllPhrases, setShowAllPhrases] = useState(false);\n  const isFav = favorites.some(f => f.word === data.word);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-[2rem] shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 mb-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-56 overflow-hidden bg-gray-50 relative\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: getImageUrl(data.word),\n        alt: data.word,\n        className: \"w-full h-full object-cover\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 226,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 225,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2 px-8 pt-4 bg-white\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"bg-blue-50 px-3 py-1.5 rounded-full text-xs font-bold text-blue-600 uppercase tracking-wider\",\n        children: data.partOfSpeech\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 230,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleAlbumClick(data.collection),\n        className: \"bg-gray-100 hover:bg-gray-200 px-3 py-1.5 rounded-full text-xs font-bold text-gray-600 flex items-center gap-1.5 transition-colors cursor-pointer\",\n        children: [/*#__PURE__*/_jsxDEV(Layers, {\n          size: 14\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 9\n        }, this), data.collection]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 229,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-8 pt-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-4xl font-bold text-gray-900 tracking-tight\",\n            children: data.word\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 245,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              e.stopPropagation();\n              handleSpeak(data.word);\n            },\n            className: \"p-2.5 rounded-full bg-blue-50 text-blue-600 hover:bg-blue-100 transition-colors\",\n            children: /*#__PURE__*/_jsxDEV(Volume2, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 247,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 246,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 244,\n          columnNumber: 9\n        }, this), onDelete ? /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onDelete(data.id),\n          className: \"p-2.5 rounded-full text-gray-300 hover:text-red-500 hover:bg-red-50 transition-colors\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            size: 22\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 252,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 251,\n          columnNumber: 12\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => toggleFavoriteWord(data),\n          className: `p-2.5 rounded-full transition-colors ${isFav ? 'text-yellow-400 bg-yellow-50' : 'text-gray-300 hover:text-yellow-400 hover:bg-yellow-50'}`,\n          children: /*#__PURE__*/_jsxDEV(Star, {\n            size: 22,\n            fill: isFav ? \"currentColor\" : \"none\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 255,\n          columnNumber: 12\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6 text-left\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-lg text-gray-800 leading-normal flex flex-wrap items-baseline gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-bold\",\n            children: data.definitions.zh\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 264,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-300 font-light\",\n            children: \"|\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 265,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-600 font-medium font-serif italic\",\n            children: data.definitions.en\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 12\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 263,\n          columnNumber: 10\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 262,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => {\n            handleSpeak(data.examplePhrase.fr);\n            setShowPhraseDetails(!showPhraseDetails);\n          },\n          className: \"bg-blue-50/50 rounded-xl border border-blue-100 overflow-hidden cursor-pointer hover:bg-blue-50 transition-colors\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 flex justify-between items-start gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2 mb-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-[10px] font-bold text-blue-400 uppercase tracking-widest\",\n                  children: \"Exemple\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Mic, {\n                  size: 12,\n                  className: \"text-blue-400\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 277,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 16\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xl text-gray-800 font-serif italic leading-snug\",\n                children: [\"\\\"\", data.examplePhrase.fr, \"\\\"\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 279,\n                columnNumber: 16\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(ChevronDown, {\n              size: 18,\n              className: `text-blue-300 mt-2 transition-transform ${showPhraseDetails ? 'rotate-180' : ''}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 281,\n              columnNumber: 14\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 273,\n            columnNumber: 11\n          }, this), showPhraseDetails && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-4 pb-4 pt-0 space-y-1.5 animate-in slide-in-from-top-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: data.examplePhrase.zh\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 16\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-500\",\n              children: data.examplePhrase.en\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 287,\n              columnNumber: 16\n            }, this), data.examplePhrase.explanation && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 text-xs text-blue-500 bg-blue-100/50 p-2 rounded-lg\",\n              children: [\"\\uD83D\\uDCA1 \", data.examplePhrase.explanation]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 289,\n              columnNumber: 18\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 272,\n          columnNumber: 9\n        }, this), data.relatedPhrases && data.relatedPhrases.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pl-2 pt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-xs font-bold text-gray-400 uppercase mb-2 tracking-wider\",\n            children: \"\\u5E38\\u7528\\u77ED\\u8BED\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 298,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-1.5\",\n            children: data.relatedPhrases.slice(0, showAllPhrases ? undefined : 2).map((phrase, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center group py-1 border-b border-gray-50 last:border-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-700 font-medium cursor-pointer hover:text-blue-600\",\n                onClick: () => handleSpeak(phrase.fr),\n                children: phrase.fr\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-gray-400\",\n                children: phrase.zh\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 303,\n                columnNumber: 21\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 301,\n              columnNumber: 18\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 299,\n            columnNumber: 13\n          }, this), data.relatedPhrases.length > 2 && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowAllPhrases(!showAllPhrases),\n            className: \"text-xs text-blue-500 font-medium mt-2 hover:underline flex items-center gap-1\",\n            children: showAllPhrases ? \"收起\" : `查看更多 (${data.relatedPhrases.length - 2})`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 297,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 271,\n        columnNumber: 7\n      }, this), data.relatedWords && data.relatedWords.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pt-6 mt-6 border-t border-gray-100\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex overflow-x-auto pb-4 gap-3 no-scrollbar\",\n          children: data.relatedWords.map((word, idx) => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleSearch(null, word),\n            className: \"flex-shrink-0 flex flex-col items-center w-20 group\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-16 h-16 rounded-xl overflow-hidden mb-2 bg-gray-100 border border-gray-200 group-hover:border-blue-300 transition-all\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: getImageUrl(word, 'small'),\n                className: \"w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 323,\n                columnNumber: 22\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 322,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs text-gray-500 group-hover:text-blue-600 truncate w-full text-center\",\n              children: word\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 19\n            }, this)]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 321,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 319,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 318,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 224,\n    columnNumber: 3\n  }, this);\n};\n_s(WordCard, \"j5lNyFO2DNPlarnGtRR+cOgFvFA=\");\n_c2 = WordCard;\nconst ChatView = ({\n  messages,\n  chatInput,\n  setChatInput,\n  handleSendChat,\n  startListening,\n  isRecording,\n  chatEndRef,\n  toggleTranslation\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"flex flex-col h-[calc(100vh-140px)]\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex-1 overflow-y-auto p-4 space-y-4 pb-20\",\n    children: [messages.map((msg, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `max-w-[85%] p-4 rounded-2xl ${msg.role === 'user' ? 'bg-blue-600 text-white rounded-br-none' : 'bg-white border border-gray-100 text-gray-800 rounded-bl-none shadow-sm'}`,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-base leading-relaxed\",\n          children: msg.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 13\n        }, this), msg.role === 'ai' && !msg.isLoading && msg.translation && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 pt-2 border-t border-gray-100\",\n          children: msg.showTranslation ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-500 animate-in fade-in\",\n            children: msg.translation\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 352,\n            columnNumber: 20\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => toggleTranslation(idx),\n            className: \"text-xs text-blue-400 font-medium flex items-center gap-1 hover:text-blue-600\",\n            children: [/*#__PURE__*/_jsxDEV(Globe, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 358,\n              columnNumber: 22\n            }, this), \" \\u663E\\u793A\\u7FFB\\u8BD1\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 354,\n            columnNumber: 20\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 350,\n          columnNumber: 15\n        }, this), msg.role === 'ai' && !msg.isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 flex justify-end\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleSpeak(msg.text),\n            className: \"text-blue-300 hover:text-blue-600 p-1\",\n            children: /*#__PURE__*/_jsxDEV(Volume2, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 367,\n              columnNumber: 114\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 367,\n            columnNumber: 18\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 366,\n          columnNumber: 16\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 341,\n        columnNumber: 11\n      }, this)\n    }, idx, false, {\n      fileName: _jsxFileName,\n      lineNumber: 340,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: chatEndRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 373,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 338,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 bg-white border-t border-gray-100 absolute bottom-16 left-0 right-0 z-10\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center gap-2 bg-gray-50 p-2 rounded-full border border-gray-200 focus-within:ring-2 focus-within:ring-blue-100 transition-all\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: chatInput,\n        onChange: e => setChatInput(e.target.value),\n        placeholder: \"\\u8BF4\\u70B9\\u6CD5\\u8BED...\",\n        className: \"flex-1 bg-transparent border-none focus:ring-0 px-4 py-2 text-gray-800 placeholder-gray-400\",\n        onKeyDown: e => e.key === 'Enter' && handleSendChat()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 379,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startListening,\n        className: `p-2 rounded-full transition-colors ${isRecording ? 'bg-red-500 text-white animate-pulse' : 'text-gray-400 hover:text-blue-600'}`,\n        children: /*#__PURE__*/_jsxDEV(Mic, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 387,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSendChat,\n        className: \"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors shadow-md disabled:opacity-50\",\n        disabled: !chatInput.trim(),\n        children: /*#__PURE__*/_jsxDEV(Send, {\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 398,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 393,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 377,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 337,\n  columnNumber: 3\n}, this);\n\n// 优化后的简洁浮动单词组件\n_c3 = ChatView;\nconst FloatingWords = ({\n  onWordClick\n}) => {\n  const words = [{\n    text: 'Amour',\n    bg: 'bg-red-100',\n    textCol: 'text-red-500',\n    top: '10%',\n    left: '10%',\n    delay: '0s'\n  }, {\n    text: 'Rêve',\n    bg: 'bg-purple-100',\n    textCol: 'text-purple-500',\n    top: '25%',\n    left: '60%',\n    delay: '2s'\n  }, {\n    text: 'Étoile',\n    bg: 'bg-yellow-100',\n    textCol: 'text-yellow-600',\n    top: '45%',\n    left: '20%',\n    delay: '1s'\n  }, {\n    text: 'Lumière',\n    bg: 'bg-orange-100',\n    textCol: 'text-orange-500',\n    top: '60%',\n    left: '75%',\n    delay: '3s'\n  }, {\n    text: 'Voyage',\n    bg: 'bg-blue-100',\n    textCol: 'text-blue-500',\n    top: '80%',\n    left: '15%',\n    delay: '0.5s'\n  }, {\n    text: 'Océan',\n    bg: 'bg-cyan-100',\n    textCol: 'text-cyan-600',\n    top: '15%',\n    left: '45%',\n    delay: '4s'\n  }];\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"relative w-full h-80 overflow-hidden mb-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 flex items-center justify-center pointer-events-none\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"w-64 h-64 bg-blue-500/5 rounded-full blur-3xl\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 419,\n        columnNumber: 10\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 418,\n      columnNumber: 7\n    }, this), words.map((w, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => onWordClick(w.text) // 这里的 onWordClick 由父组件传入 handleSearch\n      ,\n      className: `absolute px-5 py-2.5 rounded-full shadow-sm hover:shadow-md transition-all duration-500 animate-float font-medium text-lg ${w.bg} ${w.textCol} border border-white/50`,\n      style: {\n        top: w.top,\n        left: w.left,\n        animation: `float 6s ease-in-out infinite`,\n        animationDelay: w.delay\n      },\n      children: w.text\n    }, i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 423,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute bottom-0 left-0 right-0 text-center text-gray-400 text-sm pb-4\",\n      children: \"\\u70B9\\u51FB\\u6C14\\u6CE1\\u5F00\\u59CB\\u63A2\\u7D22\\u6CD5\\u8BED\\u4E16\\u754C\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 437,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        @keyframes float {\n          0%, 100% { transform: translateY(0); }\n          50% { transform: translateY(-15px); }\n        }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 438,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 417,\n    columnNumber: 5\n  }, this);\n};\n_c4 = FloatingWords;\nexport default function App() {\n  _s2();\n  const [user, setUser] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [currentWordData, setCurrentWordData] = useState(null);\n\n  // 缓存机制\n  const [wordCache, setWordCache] = useState({});\n  const [albumData, setAlbumData] = useState(null);\n  const [albumCache, setAlbumCache] = useState({});\n\n  // 收藏相关\n  const [favorites, setFavorites] = useState([]);\n  const [favoriteAlbums, setFavoriteAlbums] = useState([]);\n\n  // 聊天相关\n  const [messages, setMessages] = useState([{\n    role: 'ai',\n    text: 'Bonjour! Je suis ton prof de français.',\n    translation: 'Hello! I am your French teacher.',\n    showTranslation: false\n  }]);\n  const [chatInput, setChatInput] = useState('');\n  const [isRecording, setIsRecording] = useState(false);\n  const chatEndRef = useRef(null);\n  const [activeTab, setActiveTab] = useState('search');\n  useEffect(() => {\n    signInAnonymously(auth).catch(console.error);\n    const unsubscribe = onAuthStateChanged(auth, setUser);\n    return () => unsubscribe();\n  }, []);\n\n  // Sync Logic (Favorites)\n  useEffect(() => {\n    if (!user) return;\n    const q = query(collection(db, 'artifacts', appId, 'users', user.uid, 'favorites'));\n    const unsubscribe = onSnapshot(q, snapshot => {\n      const favs = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      favs.sort((a, b) => {\n        var _b$timestamp, _a$timestamp;\n        return (((_b$timestamp = b.timestamp) === null || _b$timestamp === void 0 ? void 0 : _b$timestamp.seconds) || 0) - (((_a$timestamp = a.timestamp) === null || _a$timestamp === void 0 ? void 0 : _a$timestamp.seconds) || 0);\n      });\n      setFavorites(favs);\n    });\n    return () => unsubscribe();\n  }, [user]);\n  useEffect(() => {\n    if (!user) return;\n    const q = query(collection(db, 'artifacts', appId, 'users', user.uid, 'favoriteAlbums'));\n    const unsubscribe = onSnapshot(q, snapshot => {\n      const favs = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setFavoriteAlbums(favs);\n    });\n    return () => unsubscribe();\n  }, [user]);\n\n  // Scroll Chat\n  useEffect(() => {\n    var _chatEndRef$current;\n    (_chatEndRef$current = chatEndRef.current) === null || _chatEndRef$current === void 0 ? void 0 : _chatEndRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages, activeTab]);\n\n  // --- Handlers ---\n  const handleSearch = async (e, wordOverride = null) => {\n    if (e) e.preventDefault();\n    const term = wordOverride || searchTerm;\n    const cleanTerm = term.trim().toLowerCase();\n    if (!cleanTerm) return;\n    setLoading(true);\n    setCurrentWordData(null);\n    setAlbumData(null);\n    setActiveTab('search');\n    setSearchTerm(term); // Sync input box\n\n    if (wordCache[cleanTerm]) {\n      setCurrentWordData(wordCache[cleanTerm]);\n      setLoading(false);\n      return;\n    }\n    try {\n      const data = await fetchWordData(term);\n      setCurrentWordData(data);\n      setWordCache(prev => ({\n        ...prev,\n        [cleanTerm]: data,\n        [data.word.toLowerCase()]: data\n      }));\n    } catch (err) {\n      alert(\"Error fetching word. Try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleAlbumClick = async category => {\n    setActiveTab('album');\n    if (albumCache[category]) {\n      setAlbumData(albumCache[category]);\n      return;\n    }\n    setLoading(true);\n    setAlbumData(null);\n    try {\n      const data = await fetchAlbumData(category);\n      setAlbumData(data);\n      setAlbumCache(prev => ({\n        ...prev,\n        [category]: data\n      }));\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to load album.\");\n      setActiveTab('search');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const toggleFavoriteWord = async wordData => {\n    if (!user) return;\n    const existing = favorites.find(f => f.word === wordData.word);\n    try {\n      if (existing) {\n        await deleteDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'favorites', existing.id));\n      } else {\n        await addDoc(collection(db, 'artifacts', appId, 'users', user.uid, 'favorites'), {\n          ...wordData,\n          timestamp: serverTimestamp()\n        });\n      }\n    } catch (e) {\n      console.error(\"Fav Error\", e);\n    }\n  };\n  const toggleFavoriteAlbum = async albumData => {\n    if (!user || !albumData) return;\n    const existing = favoriteAlbums.find(f => f.category === albumData.category);\n    try {\n      if (existing) {\n        await deleteDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'favoriteAlbums', existing.id));\n      } else {\n        await addDoc(collection(db, 'artifacts', appId, 'users', user.uid, 'favoriteAlbums'), {\n          ...albumData,\n          timestamp: serverTimestamp()\n        });\n      }\n    } catch (e) {\n      console.error(\"Album Fav Error\", e);\n    }\n  };\n  const handleSendChat = async () => {\n    if (!chatInput.trim()) return;\n    const userMsg = {\n      role: 'user',\n      text: chatInput\n    };\n    setMessages(prev => [...prev, userMsg]);\n    setChatInput('');\n    setMessages(prev => [...prev, {\n      role: 'ai',\n      text: '...',\n      isLoading: true\n    }]);\n    try {\n      const rawResponse = await fetchChatResponse(messages.map(m => ({\n        role: m.role,\n        content: m.text\n      })), userMsg.text);\n\n      // 分离翻译\n      const parts = rawResponse.split('|||');\n      const frText = parts[0].trim();\n      const enText = parts[1] ? parts[1].trim() : \"\";\n      setMessages(prev => {\n        const newMsgs = prev.filter(m => !m.isLoading);\n        return [...newMsgs, {\n          role: 'ai',\n          text: frText,\n          translation: enText,\n          showTranslation: false\n        }];\n      });\n      handleSpeak(frText);\n    } catch (e) {\n      setMessages(prev => prev.filter(m => !m.isLoading));\n    }\n  };\n  const toggleTranslation = idx => {\n    setMessages(prev => prev.map((msg, i) => i === idx ? {\n      ...msg,\n      showTranslation: !msg.showTranslation\n    } : msg));\n  };\n  const startListening = () => {\n    if (!('webkitSpeechRecognition' in window)) {\n      alert(\"此浏览器不支持语音输入，请使用 Chrome。\");\n      return;\n    }\n    const recognition = new window.webkitSpeechRecognition();\n    recognition.lang = 'fr-FR';\n    recognition.continuous = false;\n    recognition.interimResults = false;\n    recognition.onstart = () => setIsRecording(true);\n    recognition.onend = () => setIsRecording(false);\n    recognition.onresult = event => {\n      const transcript = event.results[0][0].transcript;\n      setChatInput(transcript);\n    };\n    recognition.start();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 font-sans text-gray-900 pb-24\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white/90 backdrop-blur-md border-b border-gray-100 sticky top-0 z-30\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-xl mx-auto px-6 py-4 flex justify-between items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          onClick: () => setActiveTab('search'),\n          className: \"text-xl font-bold text-gray-900 flex items-center gap-2 tracking-tight cursor-pointer\",\n          children: [/*#__PURE__*/_jsxDEV(BookOpen, {\n            size: 22,\n            className: \"text-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 635,\n            columnNumber: 13\n          }, this), \"FrenchMemo\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 634,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-gray-400 font-medium font-mono\",\n          children: user ? `UID: ${user.uid.slice(0, 4)}` : 'Connecting...'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 638,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 633,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 632,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-xl mx-auto px-6 py-8\",\n      children: [activeTab === 'chat' && /*#__PURE__*/_jsxDEV(ChatView, {\n        messages: messages,\n        chatInput: chatInput,\n        setChatInput: setChatInput,\n        handleSendChat: handleSendChat,\n        startListening: startListening,\n        isRecording: isRecording,\n        chatEndRef: chatEndRef,\n        toggleTranslation: toggleTranslation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 647,\n        columnNumber: 11\n      }, this), activeTab === 'album' && loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-20 flex flex-col items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"animate-spin text-blue-600 mb-4\",\n          size: 32\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 661,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500\",\n          children: \"\\u6B63\\u5728\\u751F\\u6210\\u4E13\\u8F91...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 14\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 660,\n        columnNumber: 12\n      }, this), activeTab === 'album' && !loading && albumData && /*#__PURE__*/_jsxDEV(AlbumView, {\n        data: albumData,\n        handleSearch: handleSearch,\n        favoriteAlbums: favoriteAlbums,\n        toggleFavoriteAlbum: toggleFavoriteAlbum,\n        setActiveTab: setActiveTab\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 667,\n        columnNumber: 11\n      }, this), activeTab === 'search' && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSearch,\n          className: \"relative mb-8 group z-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `absolute inset-0 bg-blue-500/5 rounded-full blur-xl transition-opacity duration-300 ${loading ? 'opacity-100' : 'opacity-0 group-hover:opacity-100'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 679,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: searchTerm,\n            onChange: e => setSearchTerm(e.target.value),\n            placeholder: \"\\u8F93\\u5165\\u4E2D/\\u82F1/\\u6CD5\\u6587...\",\n            className: \"w-full pl-14 pr-14 py-4 bg-white border-0 rounded-full shadow-[0_8px_30px_rgb(0,0,0,0.06)] text-xl font-medium placeholder:text-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all relative z-10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 680,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Search, {\n            className: \"absolute left-5 top-1/2 -translate-y-1/2 text-gray-400 z-20\",\n            size: 22\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 681,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading,\n            className: \"absolute right-3 top-1/2 -translate-y-1/2 p-2.5 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors disabled:opacity-70 hover:scale-105 active:scale-95 z-20 shadow-md\",\n            children: loading ? /*#__PURE__*/_jsxDEV(Loader2, {\n              className: \"animate-spin\",\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 683,\n              columnNumber: 28\n            }, this) : /*#__PURE__*/_jsxDEV(ArrowRight, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 683,\n              columnNumber: 77\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 682,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 678,\n          columnNumber: 13\n        }, this), !currentWordData && !loading && /*#__PURE__*/_jsxDEV(FloatingWords, {\n          onWordClick: word => handleSearch(null, word)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 689,\n          columnNumber: 16\n        }, this), currentWordData && /*#__PURE__*/_jsxDEV(WordCard, {\n          data: currentWordData,\n          toggleFavoriteWord: toggleFavoriteWord,\n          favorites: favorites,\n          handleAlbumClick: handleAlbumClick,\n          handleSearch: handleSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 693,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true), activeTab === 'favorites' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-8\",\n        children: [favoriteAlbums.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4\",\n            children: \"\\u6536\\u85CF\\u7684\\u4E13\\u8F91\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 708,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-3\",\n            children: favoriteAlbums.map(album => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleAlbumClick(album.category),\n              className: \"bg-white p-4 rounded-xl border border-gray-100 shadow-sm text-left hover:border-blue-200 transition-all\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-bold text-gray-800\",\n                  children: album.category\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 713,\n                  columnNumber: 26\n                }, this), /*#__PURE__*/_jsxDEV(Layers, {\n                  size: 16,\n                  className: \"text-blue-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 714,\n                  columnNumber: 26\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 712,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-gray-400 mt-2 block\",\n                children: [album.items.length, \" words\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 716,\n                columnNumber: 23\n              }, this)]\n            }, album.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 711,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 709,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 707,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4\",\n          children: \"\\u6536\\u85CF\\u7684\\u5355\\u8BCD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 723,\n          columnNumber: 13\n        }, this), favorites.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-10\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500 font-medium\",\n            children: \"\\u6682\\u65E0\\u6536\\u85CF\\u5355\\u8BCD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 725,\n            columnNumber: 50\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 725,\n          columnNumber: 15\n        }, this) : favorites.map(fav => /*#__PURE__*/_jsxDEV(WordCard, {\n          data: fav,\n          toggleFavoriteWord: () => toggleFavoriteWord(fav),\n          favorites: favorites,\n          onDelete: () => toggleFavoriteWord(fav),\n          handleAlbumClick: handleAlbumClick,\n          handleSearch: handleSearch\n        }, fav.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 728,\n          columnNumber: 17\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 705,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 644,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 z-40 pb-safe\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex max-w-xl mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('search'),\n          className: `flex-1 py-3 flex flex-col items-center gap-1 transition-colors ${activeTab === 'search' ? 'text-blue-600' : 'text-gray-400 hover:text-gray-600'}`,\n          children: [/*#__PURE__*/_jsxDEV(Search, {\n            size: 22\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 750,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-[10px] font-medium\",\n            children: \"\\u63A2\\u7D22\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 751,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 746,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('chat'),\n          className: `flex-1 py-3 flex flex-col items-center gap-1 transition-colors ${activeTab === 'chat' ? 'text-blue-600' : 'text-gray-400 hover:text-gray-600'}`,\n          children: [/*#__PURE__*/_jsxDEV(MessageCircle, {\n            size: 22\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 758,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-[10px] font-medium\",\n            children: \"AI\\u5BF9\\u8BDD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 759,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 754,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('favorites'),\n          className: `flex-1 py-3 flex flex-col items-center gap-1 transition-colors ${activeTab === 'favorites' ? 'text-blue-600' : 'text-gray-400 hover:text-gray-600'}`,\n          children: [/*#__PURE__*/_jsxDEV(Star, {\n            size: 22\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 766,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-[10px] font-medium\",\n            children: \"\\u6536\\u85CF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 767,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 762,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 745,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 744,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 630,\n    columnNumber: 5\n  }, this);\n}\n_s2(App, \"uVFf25jhXNXpg4NTxnzUIAEPnBA=\");\n_c5 = App;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"AlbumView\");\n$RefreshReg$(_c2, \"WordCard\");\n$RefreshReg$(_c3, \"ChatView\");\n$RefreshReg$(_c4, \"FloatingWords\");\n$RefreshReg$(_c5, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Search","Volume2","Star","BookOpen","ArrowRight","Loader2","Layers","X","ChevronDown","ChevronUp","Info","Mic","MessageCircle","Send","Heart","PlayCircle","Globe","LayoutGrid","initializeApp","getAuth","signInAnonymously","onAuthStateChanged","getFirestore","collection","addDoc","query","onSnapshot","deleteDoc","doc","serverTimestamp","where","getDocs","jsxDEV","_jsxDEV","Fragment","_Fragment","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","GEMINI_API_KEY","app","auth","db","fetchWordData","input","_data$candidates","_data$candidates$","_data$candidates$$con","_data$candidates$$con2","_data$candidates$$con3","includes","Error","prompt","response","fetch","method","headers","body","JSON","stringify","contents","parts","text","data","json","candidates","content","parse","fetchAlbumData","category","_data$candidates2","_data$candidates2$","_data$candidates2$$co","_data$candidates2$$co2","_data$candidates2$$co3","fetchChatResponse","history","message","_data$candidates3","_data$candidates3$","_data$candidates3$$co","_data$candidates3$$co2","_data$candidates3$$co3","getImageUrl","keyword","size","dimensions","Math","random","handleSpeak","window","speechSynthesis","cancel","utterance","SpeechSynthesisUtterance","lang","rate","speak","AlbumView","handleSearch","favoriteAlbums","toggleFavoriteAlbum","setActiveTab","isFav","some","f","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","fill","items","map","item","idx","isVisual","word","src","alt","article","zh","_c","WordCard","onDelete","handleAlbumClick","toggleFavoriteWord","favorites","_s","showPhraseDetails","setShowPhraseDetails","showAllPhrases","setShowAllPhrases","partOfSpeech","e","stopPropagation","id","definitions","en","examplePhrase","fr","explanation","relatedPhrases","length","slice","undefined","phrase","relatedWords","_c2","ChatView","messages","chatInput","setChatInput","handleSendChat","startListening","isRecording","chatEndRef","toggleTranslation","msg","role","isLoading","translation","showTranslation","ref","type","value","onChange","target","placeholder","onKeyDown","key","disabled","trim","_c3","FloatingWords","onWordClick","words","bg","textCol","top","left","delay","w","i","style","animation","animationDelay","_c4","App","_s2","user","setUser","searchTerm","setSearchTerm","loading","setLoading","currentWordData","setCurrentWordData","wordCache","setWordCache","albumData","setAlbumData","albumCache","setAlbumCache","setFavorites","setFavoriteAlbums","setMessages","setIsRecording","activeTab","catch","console","error","unsubscribe","q","uid","snapshot","favs","docs","sort","a","b","_b$timestamp","_a$timestamp","timestamp","seconds","_chatEndRef$current","current","scrollIntoView","behavior","wordOverride","preventDefault","term","cleanTerm","toLowerCase","prev","err","alert","wordData","existing","find","userMsg","rawResponse","m","split","frText","enText","newMsgs","filter","recognition","webkitSpeechRecognition","continuous","interimResults","onstart","onend","onresult","event","transcript","results","start","onSubmit","album","fav","_c5","$RefreshReg$"],"sources":["/Users/zhaolu/Documents/Code/frenchapp/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Search, Volume2, Star, BookOpen, ArrowRight, Loader2, Layers, X, ChevronDown, ChevronUp, Info, Mic, MessageCircle, Send, Heart, PlayCircle, Globe, LayoutGrid } from 'lucide-react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInAnonymously, onAuthStateChanged } from 'firebase/auth';\nimport { getFirestore, collection, addDoc, query, onSnapshot, deleteDoc, doc, serverTimestamp, where, getDocs } from 'firebase/firestore';\n\n// ==========================================\n// ⚠️ 请在下方填入您的配置信息\n// ==========================================\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCBItd52zWdktiEuHmQIXbB4Q7sLM5602o\",\n  authDomain: \"frenchapp-6b44a.firebaseapp.com\",\n  projectId: \"frenchapp-6b44a\",\n  storageBucket: \"frenchapp-6b44a.firebasestorage.app\",\n  messagingSenderId: \"988616724582\",\n  appId: \"1:988616724582:web:723f9d9c75f8810b019da7\"\n};\n\n\nconst GEMINI_API_KEY = \"AIzaSyBivevjn0wQ3dD2OCuh98L2iALBssZfsq4\"; \n\n// ==========================================\n\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst appId = \"french-memo-app\";\n\n// --- API Helper for Gemini ---\n\n// 1. 获取单个单词详情\nconst fetchWordData = async (input) => {\n  const apiKey = GEMINI_API_KEY; \n  if (!apiKey || apiKey.includes(\"YOUR_GEMINI_API_KEY\")) throw new Error(\"API Key not set\");\n\n  const prompt = `\n    User input: \"${input}\".\n    Task: \n    1. Detect language. If NOT French, translate to common French word.\n    2. Analyze the French word.\n    \n    CRITICAL: Keep definitions EXTREMELY SHORT (1-3 words max). Just the direct translation. NO explanations.\n    \n    Return strictly valid JSON (no markdown):\n    {\n      \"word\": \"The French word\",\n      \"definitions\": {\n        \"en\": \"Direct translation (1-3 words)\",\n        \"zh\": \"直接的中文对应词(仅词义，不解释)\"\n      },\n      \"partOfSpeech\": \"abbrev. (n.m./adj.)\",\n      \"collection\": \"Category (e.g. Fruits)\",\n      \"relatedWords\": [\"synonym1\", \"antonym1\", \"related1\"],\n      \"relatedPhrases\": [\n        {\"fr\": \"Phrase 1\", \"zh\": \"Meaning 1\"},\n        {\"fr\": \"Phrase 2\", \"zh\": \"Meaning 2\"}\n      ],\n      \"examplePhrase\": {\n        \"fr\": \"Simple French sentence\",\n        \"en\": \"English translation\",\n        \"zh\": \"Chinese translation\",\n        \"explanation\": \"Brief grammar note\"\n      }\n    }\n  `;\n\n  const response = await fetch(\n    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,\n    {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] }),\n    }\n  );\n  const data = await response.json();\n  const text = data.candidates?.[0]?.content?.parts?.[0]?.text;\n  return text ? JSON.parse(text) : null;\n};\n\n// 2. 获取专辑列表\nconst fetchAlbumData = async (category) => {\n  const apiKey = GEMINI_API_KEY;\n  const prompt = `\n    List 8 common French vocabulary items for category: \"${category}\".\n    Return valid JSON:\n    {\n      \"category\": \"${category}\",\n      \"items\": [\n        { \"word\": \"FrenchWord\", \"article\": \"le/la/un\", \"zh\": \"Chinese\", \"isVisual\": true/false }\n      ]\n    }\n  `;\n\n  const response = await fetch(\n    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,\n    {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] }),\n    }\n  );\n  const data = await response.json();\n  const text = data.candidates?.[0]?.content?.parts?.[0]?.text;\n  return text ? JSON.parse(text) : null;\n};\n\n// 3. 聊天 API (已更新 Prompt 以支持分离翻译)\nconst fetchChatResponse = async (history, message) => {\n  const apiKey = GEMINI_API_KEY;\n  const prompt = `\n    You are a friendly French language tutor. \n    User message: \"${message}\".\n    Conversation history: ${JSON.stringify(history)}.\n    \n    Task: Reply in French. \n    CRITICAL FORMATTING: After your French reply, add the separator \"|||\" and then provide the English translation.\n    Example output: Bonjour, comment ça va? ||| Hello, how are you?\n  `;\n  \n  const response = await fetch(\n    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,\n    {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] }),\n    }\n  );\n  const data = await response.json();\n  return data.candidates?.[0]?.content?.parts?.[0]?.text || \"Désolé, je ne comprends pas. ||| Sorry, I don't understand.\";\n};\n\n// --- Sub-Components (Defined OUTSIDE App to fix focus bugs) ---\n\nconst getImageUrl = (keyword, size = 'medium') => {\n  const dimensions = size === 'small' ? 'width=200&height=200' : 'width=600&height=400';\n  return `https://image.pollinations.ai/prompt/realistic%20${keyword}%20french%20context?${dimensions}&nologo=true&seed=${Math.random()}`;\n};\n\nconst handleSpeak = (text) => {\n  if ('speechSynthesis' in window) {\n    window.speechSynthesis.cancel();\n    const utterance = new SpeechSynthesisUtterance(text);\n    utterance.lang = 'fr-FR';\n    utterance.rate = 0.9;\n    window.speechSynthesis.speak(utterance);\n  }\n};\n\nconst AlbumView = ({ data, handleSearch, favoriteAlbums, toggleFavoriteAlbum, setActiveTab }) => {\n  if (!data) return null;\n  const isFav = favoriteAlbums.some(f => f.category === data.category);\n\n  return (\n    <div className=\"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center gap-3\">\n          <button onClick={() => setActiveTab('search')} className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\">\n            <ArrowRight className=\"rotate-180 text-gray-500\" />\n          </button>\n          <h2 className=\"text-2xl font-bold text-gray-900 flex items-center gap-2\">\n            <Layers className=\"text-blue-600\" size={24} />\n            {data.category}\n          </h2>\n        </div>\n        <button \n          onClick={() => toggleFavoriteAlbum(data)}\n          className={`p-3 rounded-full transition-colors ${isFav ? 'bg-red-50 text-red-500' : 'bg-gray-50 text-gray-400 hover:text-red-400'}`}\n        >\n          <Heart size={24} fill={isFav ? \"currentColor\" : \"none\"} />\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-2 gap-4\">\n        {data.items.map((item, idx) => {\n          if (item.isVisual) {\n            return (\n              <button \n                key={idx}\n                onClick={() => handleSearch(null, item.word)}\n                className=\"group relative flex flex-col items-center bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-lg transition-all border border-gray-100 text-left\"\n              >\n                <div className=\"w-full aspect-[4/3] bg-gray-50 relative overflow-hidden\">\n                  <img \n                    src={getImageUrl(item.word, 'small')} \n                    alt={item.word} \n                    className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700\"\n                  />\n                  <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-3 pt-8\">\n                     <p className=\"text-white font-medium text-lg\">\n                       <span className=\"opacity-70 text-sm mr-1 font-normal\">{item.article}</span>\n                       {item.word}\n                     </p>\n                  </div>\n                </div>\n              </button>\n            );\n          } else {\n            return (\n              <button \n                key={idx}\n                onClick={() => handleSearch(null, item.word)}\n                className=\"col-span-2 flex items-center justify-between p-4 bg-white rounded-xl shadow-sm hover:shadow-md border border-gray-100 hover:border-blue-200 transition-all group\"\n              >\n                <div>\n                  <span className=\"text-lg font-bold text-gray-800 group-hover:text-blue-600 transition-colors\">{item.word}</span>\n                </div>\n                <span className=\"text-sm text-gray-500 font-medium\">{item.zh}</span>\n              </button>\n            );\n          }\n        })}\n      </div>\n    </div>\n  );\n};\n\nconst WordCard = ({ data, onDelete, handleAlbumClick, handleSearch, toggleFavoriteWord, favorites }) => {\n  const [showPhraseDetails, setShowPhraseDetails] = useState(false);\n  const [showAllPhrases, setShowAllPhrases] = useState(false);\n  const isFav = favorites.some(f => f.word === data.word);\n\n  return (\n  <div className=\"bg-white rounded-[2rem] shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 mb-8\">\n    <div className=\"h-56 overflow-hidden bg-gray-50 relative\">\n      <img src={getImageUrl(data.word)} alt={data.word} className=\"w-full h-full object-cover\" />\n    </div>\n\n    <div className=\"flex gap-2 px-8 pt-4 bg-white\">\n      <span className=\"bg-blue-50 px-3 py-1.5 rounded-full text-xs font-bold text-blue-600 uppercase tracking-wider\">\n        {data.partOfSpeech}\n      </span>\n      <button \n        onClick={() => handleAlbumClick(data.collection)}\n        className=\"bg-gray-100 hover:bg-gray-200 px-3 py-1.5 rounded-full text-xs font-bold text-gray-600 flex items-center gap-1.5 transition-colors cursor-pointer\"\n      >\n        <Layers size={14} />\n        {data.collection}\n      </button>\n    </div>\n\n    <div className=\"p-8 pt-2\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <div className=\"flex items-center gap-3\">\n          <h2 className=\"text-4xl font-bold text-gray-900 tracking-tight\">{data.word}</h2>\n          <button onClick={(e) => { e.stopPropagation(); handleSpeak(data.word); }} className=\"p-2.5 rounded-full bg-blue-50 text-blue-600 hover:bg-blue-100 transition-colors\">\n            <Volume2 size={20} />\n          </button>\n        </div>\n        {onDelete ? (\n           <button onClick={() => onDelete(data.id)} className=\"p-2.5 rounded-full text-gray-300 hover:text-red-500 hover:bg-red-50 transition-colors\">\n             <X size={22} />\n           </button>\n        ) : (\n           <button onClick={() => toggleFavoriteWord(data)} className={`p-2.5 rounded-full transition-colors ${isFav ? 'text-yellow-400 bg-yellow-50' : 'text-gray-300 hover:text-yellow-400 hover:bg-yellow-50'}`}>\n             <Star size={22} fill={isFav ? \"currentColor\" : \"none\"} />\n           </button>\n        )}\n      </div>\n\n      {/* 释义：单行布局，左对齐 */}\n      <div className=\"mb-6 text-left\">\n         <p className=\"text-lg text-gray-800 leading-normal flex flex-wrap items-baseline gap-2\">\n           <span className=\"font-bold\">{data.definitions.zh}</span>\n           <span className=\"text-gray-300 font-light\">|</span>\n           <span className=\"text-gray-600 font-medium font-serif italic\">{data.definitions.en}</span>\n         </p>\n      </div>\n\n      {/* 交互式例句 */}\n      <div className=\"space-y-3\">\n        <div onClick={() => { handleSpeak(data.examplePhrase.fr); setShowPhraseDetails(!showPhraseDetails); }} className=\"bg-blue-50/50 rounded-xl border border-blue-100 overflow-hidden cursor-pointer hover:bg-blue-50 transition-colors\">\n          <div className=\"p-4 flex justify-between items-start gap-3\">\n             <div>\n               <div className=\"flex items-center gap-2 mb-1\">\n                  <span className=\"text-[10px] font-bold text-blue-400 uppercase tracking-widest\">Exemple</span>\n                  <Mic size={12} className=\"text-blue-400\" />\n               </div>\n               <p className=\"text-xl text-gray-800 font-serif italic leading-snug\">\"{data.examplePhrase.fr}\"</p>\n             </div>\n             <ChevronDown size={18} className={`text-blue-300 mt-2 transition-transform ${showPhraseDetails ? 'rotate-180' : ''}`} />\n          </div>\n          {/* 减小了间距 pt-0 */}\n          {showPhraseDetails && (\n            <div className=\"px-4 pb-4 pt-0 space-y-1.5 animate-in slide-in-from-top-2\">\n               <p className=\"text-sm text-gray-600\">{data.examplePhrase.zh}</p>\n               <p className=\"text-sm text-gray-500\">{data.examplePhrase.en}</p>\n               {data.examplePhrase.explanation && (\n                 <div className=\"mt-2 text-xs text-blue-500 bg-blue-100/50 p-2 rounded-lg\">💡 {data.examplePhrase.explanation}</div>\n               )}\n            </div>\n          )}\n        </div>\n\n        {/* 相关短语 */}\n        {data.relatedPhrases && data.relatedPhrases.length > 0 && (\n          <div className=\"pl-2 pt-2\">\n            <h4 className=\"text-xs font-bold text-gray-400 uppercase mb-2 tracking-wider\">常用短语</h4>\n            <div className=\"space-y-1.5\">\n              {data.relatedPhrases.slice(0, showAllPhrases ? undefined : 2).map((phrase, idx) => (\n                 <div key={idx} className=\"flex justify-between items-center group py-1 border-b border-gray-50 last:border-0\">\n                    <span className=\"text-gray-700 font-medium cursor-pointer hover:text-blue-600\" onClick={() => handleSpeak(phrase.fr)}>{phrase.fr}</span>\n                    <span className=\"text-sm text-gray-400\">{phrase.zh}</span>\n                 </div>\n              ))}\n            </div>\n            {data.relatedPhrases.length > 2 && (\n              <button onClick={() => setShowAllPhrases(!showAllPhrases)} className=\"text-xs text-blue-500 font-medium mt-2 hover:underline flex items-center gap-1\">\n                {showAllPhrases ? \"收起\" : `查看更多 (${data.relatedPhrases.length - 2})`}\n              </button>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* 底部相关词 */}\n      {data.relatedWords && data.relatedWords.length > 0 && (\n        <div className=\"pt-6 mt-6 border-t border-gray-100\">\n           <div className=\"flex overflow-x-auto pb-4 gap-3 no-scrollbar\">\n              {data.relatedWords.map((word, idx) => (\n                <button key={idx} onClick={() => handleSearch(null, word)} className=\"flex-shrink-0 flex flex-col items-center w-20 group\">\n                  <div className=\"w-16 h-16 rounded-xl overflow-hidden mb-2 bg-gray-100 border border-gray-200 group-hover:border-blue-300 transition-all\">\n                     <img src={getImageUrl(word, 'small')} className=\"w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all\" />\n                  </div>\n                  <span className=\"text-xs text-gray-500 group-hover:text-blue-600 truncate w-full text-center\">{word}</span>\n                </button>\n              ))}\n           </div>\n        </div>\n      )}\n    </div>\n  </div>\n  );\n};\n\nconst ChatView = ({ messages, chatInput, setChatInput, handleSendChat, startListening, isRecording, chatEndRef, toggleTranslation }) => (\n  <div className=\"flex flex-col h-[calc(100vh-140px)]\">\n    <div className=\"flex-1 overflow-y-auto p-4 space-y-4 pb-20\">\n      {messages.map((msg, idx) => (\n        <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>\n          <div className={`max-w-[85%] p-4 rounded-2xl ${\n            msg.role === 'user' \n              ? 'bg-blue-600 text-white rounded-br-none' \n              : 'bg-white border border-gray-100 text-gray-800 rounded-bl-none shadow-sm'\n          }`}>\n            <p className=\"text-base leading-relaxed\">{msg.text}</p>\n            \n            {/* 翻译区域 */}\n            {msg.role === 'ai' && !msg.isLoading && msg.translation && (\n              <div className=\"mt-2 pt-2 border-t border-gray-100\">\n                {msg.showTranslation ? (\n                   <p className=\"text-sm text-gray-500 animate-in fade-in\">{msg.translation}</p>\n                ) : (\n                   <button \n                     onClick={() => toggleTranslation(idx)} \n                     className=\"text-xs text-blue-400 font-medium flex items-center gap-1 hover:text-blue-600\"\n                   >\n                     <Globe size={12} /> 显示翻译\n                   </button>\n                )}\n              </div>\n            )}\n\n            {/* 发音按钮 */}\n            {msg.role === 'ai' && !msg.isLoading && (\n               <div className=\"mt-2 flex justify-end\">\n                 <button onClick={() => handleSpeak(msg.text)} className=\"text-blue-300 hover:text-blue-600 p-1\"><Volume2 size={16} /></button>\n               </div>\n            )}\n          </div>\n        </div>\n      ))}\n      <div ref={chatEndRef} />\n    </div>\n    \n    {/* 输入框区域 */}\n    <div className=\"p-4 bg-white border-t border-gray-100 absolute bottom-16 left-0 right-0 z-10\">\n      <div className=\"flex items-center gap-2 bg-gray-50 p-2 rounded-full border border-gray-200 focus-within:ring-2 focus-within:ring-blue-100 transition-all\">\n        <input \n          type=\"text\" \n          value={chatInput} \n          onChange={e => setChatInput(e.target.value)} \n          placeholder=\"说点法语...\" \n          className=\"flex-1 bg-transparent border-none focus:ring-0 px-4 py-2 text-gray-800 placeholder-gray-400\"\n          onKeyDown={e => e.key === 'Enter' && handleSendChat()}\n        />\n        <button \n          onClick={startListening} \n          className={`p-2 rounded-full transition-colors ${isRecording ? 'bg-red-500 text-white animate-pulse' : 'text-gray-400 hover:text-blue-600'}`}\n        >\n          <Mic size={20} />\n        </button>\n        <button \n          onClick={handleSendChat} \n          className=\"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors shadow-md disabled:opacity-50\"\n          disabled={!chatInput.trim()}\n        >\n          <Send size={18} />\n        </button>\n      </div>\n    </div>\n  </div>\n);\n\n// 优化后的简洁浮动单词组件\nconst FloatingWords = ({ onWordClick }) => {\n  const words = [\n    { text: 'Amour', bg: 'bg-red-100', textCol: 'text-red-500', top: '10%', left: '10%', delay: '0s' },\n    { text: 'Rêve', bg: 'bg-purple-100', textCol: 'text-purple-500', top: '25%', left: '60%', delay: '2s' },\n    { text: 'Étoile', bg: 'bg-yellow-100', textCol: 'text-yellow-600', top: '45%', left: '20%', delay: '1s' },\n    { text: 'Lumière', bg: 'bg-orange-100', textCol: 'text-orange-500', top: '60%', left: '75%', delay: '3s' },\n    { text: 'Voyage', bg: 'bg-blue-100', textCol: 'text-blue-500', top: '80%', left: '15%', delay: '0.5s' },\n    { text: 'Océan', bg: 'bg-cyan-100', textCol: 'text-cyan-600', top: '15%', left: '45%', delay: '4s' },\n  ];\n\n  return (\n    <div className=\"relative w-full h-80 overflow-hidden mb-8\">\n      <div className=\"absolute inset-0 flex items-center justify-center pointer-events-none\">\n         <div className=\"w-64 h-64 bg-blue-500/5 rounded-full blur-3xl\"></div>\n      </div>\n      \n      {words.map((w, i) => (\n        <button\n          key={i}\n          onClick={() => onWordClick(w.text)} // 这里的 onWordClick 由父组件传入 handleSearch\n          className={`absolute px-5 py-2.5 rounded-full shadow-sm hover:shadow-md transition-all duration-500 animate-float font-medium text-lg ${w.bg} ${w.textCol} border border-white/50`}\n          style={{ \n            top: w.top, \n            left: w.left, \n            animation: `float 6s ease-in-out infinite`,\n            animationDelay: w.delay \n          }}\n        >\n          {w.text}\n        </button>\n      ))}\n      <div className=\"absolute bottom-0 left-0 right-0 text-center text-gray-400 text-sm pb-4\">点击气泡开始探索法语世界</div>\n      <style>{`\n        @keyframes float {\n          0%, 100% { transform: translateY(0); }\n          50% { transform: translateY(-15px); }\n        }\n      `}</style>\n    </div>\n  );\n};\n\nexport default function App() {\n  const [user, setUser] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [currentWordData, setCurrentWordData] = useState(null);\n  \n  // 缓存机制\n  const [wordCache, setWordCache] = useState({}); \n  const [albumData, setAlbumData] = useState(null);\n  const [albumCache, setAlbumCache] = useState({}); \n\n  // 收藏相关\n  const [favorites, setFavorites] = useState([]);\n  const [favoriteAlbums, setFavoriteAlbums] = useState([]);\n\n  // 聊天相关\n  const [messages, setMessages] = useState([{ \n    role: 'ai', \n    text: 'Bonjour! Je suis ton prof de français.', \n    translation: 'Hello! I am your French teacher.',\n    showTranslation: false\n  }]);\n  const [chatInput, setChatInput] = useState('');\n  const [isRecording, setIsRecording] = useState(false);\n  const chatEndRef = useRef(null);\n\n  const [activeTab, setActiveTab] = useState('search'); \n\n  useEffect(() => {\n    signInAnonymously(auth).catch(console.error);\n    const unsubscribe = onAuthStateChanged(auth, setUser);\n    return () => unsubscribe();\n  }, []);\n\n  // Sync Logic (Favorites)\n  useEffect(() => {\n    if (!user) return;\n    const q = query(collection(db, 'artifacts', appId, 'users', user.uid, 'favorites'));\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const favs = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      favs.sort((a, b) => (b.timestamp?.seconds || 0) - (a.timestamp?.seconds || 0));\n      setFavorites(favs);\n    });\n    return () => unsubscribe();\n  }, [user]);\n\n  useEffect(() => {\n    if (!user) return;\n    const q = query(collection(db, 'artifacts', appId, 'users', user.uid, 'favoriteAlbums'));\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const favs = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      setFavoriteAlbums(favs);\n    });\n    return () => unsubscribe();\n  }, [user]);\n\n  // Scroll Chat\n  useEffect(() => {\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages, activeTab]);\n\n  // --- Handlers ---\n  const handleSearch = async (e, wordOverride = null) => {\n    if (e) e.preventDefault();\n    const term = wordOverride || searchTerm;\n    const cleanTerm = term.trim().toLowerCase();\n    if (!cleanTerm) return;\n    \n    setLoading(true);\n    setCurrentWordData(null);\n    setAlbumData(null);\n    setActiveTab('search');\n    setSearchTerm(term); // Sync input box\n\n    if (wordCache[cleanTerm]) {\n      setCurrentWordData(wordCache[cleanTerm]);\n      setLoading(false);\n      return;\n    }\n    \n    try {\n      const data = await fetchWordData(term);\n      setCurrentWordData(data);\n      setWordCache(prev => ({ ...prev, [cleanTerm]: data, [data.word.toLowerCase()]: data })); \n    } catch (err) { alert(\"Error fetching word. Try again.\"); } \n    finally { setLoading(false); }\n  };\n\n  const handleAlbumClick = async (category) => {\n    setActiveTab('album');\n    if (albumCache[category]) {\n      setAlbumData(albumCache[category]);\n      return;\n    }\n    setLoading(true);\n    setAlbumData(null);\n    try {\n      const data = await fetchAlbumData(category);\n      setAlbumData(data);\n      setAlbumCache(prev => ({ ...prev, [category]: data }));\n    } catch (err) { console.error(err); alert(\"Failed to load album.\"); setActiveTab('search'); }\n    finally { setLoading(false); }\n  };\n\n  const toggleFavoriteWord = async (wordData) => {\n    if (!user) return;\n    const existing = favorites.find(f => f.word === wordData.word);\n    try {\n      if (existing) {\n        await deleteDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'favorites', existing.id));\n      } else {\n        await addDoc(collection(db, 'artifacts', appId, 'users', user.uid, 'favorites'), { ...wordData, timestamp: serverTimestamp() });\n      }\n    } catch (e) { console.error(\"Fav Error\", e); }\n  };\n\n  const toggleFavoriteAlbum = async (albumData) => {\n    if (!user || !albumData) return;\n    const existing = favoriteAlbums.find(f => f.category === albumData.category);\n    try {\n      if (existing) {\n        await deleteDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'favoriteAlbums', existing.id));\n      } else {\n        await addDoc(collection(db, 'artifacts', appId, 'users', user.uid, 'favoriteAlbums'), { ...albumData, timestamp: serverTimestamp() });\n      }\n    } catch (e) { console.error(\"Album Fav Error\", e); }\n  };\n\n  const handleSendChat = async () => {\n    if (!chatInput.trim()) return;\n    const userMsg = { role: 'user', text: chatInput };\n    setMessages(prev => [...prev, userMsg]);\n    setChatInput('');\n    setMessages(prev => [...prev, { role: 'ai', text: '...', isLoading: true }]);\n    try {\n      const rawResponse = await fetchChatResponse(messages.map(m => ({role: m.role, content: m.text})), userMsg.text);\n      \n      // 分离翻译\n      const parts = rawResponse.split('|||');\n      const frText = parts[0].trim();\n      const enText = parts[1] ? parts[1].trim() : \"\";\n\n      setMessages(prev => {\n        const newMsgs = prev.filter(m => !m.isLoading);\n        return [...newMsgs, { \n          role: 'ai', \n          text: frText, \n          translation: enText,\n          showTranslation: false \n        }];\n      });\n      handleSpeak(frText);\n    } catch (e) {\n      setMessages(prev => prev.filter(m => !m.isLoading));\n    }\n  };\n\n  const toggleTranslation = (idx) => {\n    setMessages(prev => prev.map((msg, i) => \n      i === idx ? { ...msg, showTranslation: !msg.showTranslation } : msg\n    ));\n  };\n\n  const startListening = () => {\n    if (!('webkitSpeechRecognition' in window)) {\n      alert(\"此浏览器不支持语音输入，请使用 Chrome。\");\n      return;\n    }\n    const recognition = new window.webkitSpeechRecognition();\n    recognition.lang = 'fr-FR';\n    recognition.continuous = false;\n    recognition.interimResults = false;\n    recognition.onstart = () => setIsRecording(true);\n    recognition.onend = () => setIsRecording(false);\n    recognition.onresult = (event) => {\n      const transcript = event.results[0][0].transcript;\n      setChatInput(transcript);\n    };\n    recognition.start();\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 font-sans text-gray-900 pb-24\">\n      {/* 顶部标题栏 (固定) */}\n      <div className=\"bg-white/90 backdrop-blur-md border-b border-gray-100 sticky top-0 z-30\">\n        <div className=\"max-w-xl mx-auto px-6 py-4 flex justify-between items-center\">\n          <h1 onClick={() => setActiveTab('search')} className=\"text-xl font-bold text-gray-900 flex items-center gap-2 tracking-tight cursor-pointer\">\n            <BookOpen size={22} className=\"text-blue-600\" />\n            FrenchMemo\n          </h1>\n          <div className=\"text-xs text-gray-400 font-medium font-mono\">\n             {user ? `UID: ${user.uid.slice(0,4)}` : 'Connecting...'}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-xl mx-auto px-6 py-8\">\n        \n        {activeTab === 'chat' && (\n          <ChatView \n            messages={messages} \n            chatInput={chatInput} \n            setChatInput={setChatInput} \n            handleSendChat={handleSendChat} \n            startListening={startListening} \n            isRecording={isRecording} \n            chatEndRef={chatEndRef}\n            toggleTranslation={toggleTranslation}\n          />\n        )}\n\n        {activeTab === 'album' && loading && (\n           <div className=\"text-center py-20 flex flex-col items-center\">\n             <Loader2 className=\"animate-spin text-blue-600 mb-4\" size={32} />\n             <p className=\"text-gray-500\">正在生成专辑...</p>\n           </div>\n        )}\n        \n        {activeTab === 'album' && !loading && albumData && (\n          <AlbumView \n            data={albumData} \n            handleSearch={handleSearch} \n            favoriteAlbums={favoriteAlbums} \n            toggleFavoriteAlbum={toggleFavoriteAlbum} \n            setActiveTab={setActiveTab} \n          />\n        )}\n\n        {activeTab === 'search' && (\n          <>\n            <form onSubmit={handleSearch} className=\"relative mb-8 group z-10\">\n              <div className={`absolute inset-0 bg-blue-500/5 rounded-full blur-xl transition-opacity duration-300 ${loading ? 'opacity-100' : 'opacity-0 group-hover:opacity-100'}`}></div>\n              <input type=\"text\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} placeholder=\"输入中/英/法文...\" className=\"w-full pl-14 pr-14 py-4 bg-white border-0 rounded-full shadow-[0_8px_30px_rgb(0,0,0,0.06)] text-xl font-medium placeholder:text-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all relative z-10\" />\n              <Search className=\"absolute left-5 top-1/2 -translate-y-1/2 text-gray-400 z-20\" size={22} />\n              <button type=\"submit\" disabled={loading} className=\"absolute right-3 top-1/2 -translate-y-1/2 p-2.5 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors disabled:opacity-70 hover:scale-105 active:scale-95 z-20 shadow-md\">\n                {loading ? <Loader2 className=\"animate-spin\" size={20} /> : <ArrowRight size={20} />}\n              </button>\n            </form>\n\n            {/* 首页浮动单词（简洁版） */}\n            {!currentWordData && !loading && (\n               <FloatingWords onWordClick={(word) => handleSearch(null, word)} />\n            )}\n\n            {currentWordData && (\n              <WordCard \n                data={currentWordData} \n                toggleFavoriteWord={toggleFavoriteWord} \n                favorites={favorites} \n                handleAlbumClick={handleAlbumClick} \n                handleSearch={handleSearch} \n              />\n            )}\n          </>\n        )}\n\n        {activeTab === 'favorites' && (\n          <div className=\"space-y-8\">\n            {favoriteAlbums.length > 0 && (\n              <div className=\"mb-8\">\n                <h3 className=\"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4\">收藏的专辑</h3>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  {favoriteAlbums.map(album => (\n                    <button key={album.id} onClick={() => handleAlbumClick(album.category)} className=\"bg-white p-4 rounded-xl border border-gray-100 shadow-sm text-left hover:border-blue-200 transition-all\">\n                      <div className=\"flex justify-between items-start\">\n                         <span className=\"font-bold text-gray-800\">{album.category}</span>\n                         <Layers size={16} className=\"text-blue-500\" />\n                      </div>\n                      <span className=\"text-xs text-gray-400 mt-2 block\">{album.items.length} words</span>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            <h3 className=\"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4\">收藏的单词</h3>\n            {favorites.length === 0 ? (\n              <div className=\"text-center py-10\"><p className=\"text-gray-500 font-medium\">暂无收藏单词</p></div>\n            ) : (\n              favorites.map(fav => (\n                <WordCard \n                  key={fav.id} \n                  data={fav} \n                  toggleFavoriteWord={() => toggleFavoriteWord(fav)} \n                  favorites={favorites} \n                  onDelete={() => toggleFavoriteWord(fav)} \n                  handleAlbumClick={handleAlbumClick}\n                  handleSearch={handleSearch}\n                />\n              ))\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* 底部导航栏 (固定) */}\n      <div className=\"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 z-40 pb-safe\">\n        <div className=\"flex max-w-xl mx-auto\">\n          <button \n            onClick={() => setActiveTab('search')} \n            className={`flex-1 py-3 flex flex-col items-center gap-1 transition-colors ${activeTab === 'search' ? 'text-blue-600' : 'text-gray-400 hover:text-gray-600'}`}\n          >\n            <Search size={22} />\n            <span className=\"text-[10px] font-medium\">探索</span>\n          </button>\n          \n          <button \n            onClick={() => setActiveTab('chat')} \n            className={`flex-1 py-3 flex flex-col items-center gap-1 transition-colors ${activeTab === 'chat' ? 'text-blue-600' : 'text-gray-400 hover:text-gray-600'}`}\n          >\n            <MessageCircle size={22} />\n            <span className=\"text-[10px] font-medium\">AI对话</span>\n          </button>\n          \n          <button \n            onClick={() => setActiveTab('favorites')} \n            className={`flex-1 py-3 flex flex-col items-center gap-1 transition-colors ${activeTab === 'favorites' ? 'text-blue-600' : 'text-gray-400 hover:text-gray-600'}`}\n          >\n            <Star size={22} />\n            <span className=\"text-[10px] font-medium\">收藏</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}