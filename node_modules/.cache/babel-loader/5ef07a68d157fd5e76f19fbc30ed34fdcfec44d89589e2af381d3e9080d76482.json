{"ast":null,"code":"var _jsxFileName = \"/Users/zhaolu/Documents/Code/frenchapp/src/App.js\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Search, Volume2, Star, BookOpen, ArrowRight, Loader2, Layers, X, ChevronDown, ChevronUp, Info, Mic, MessageCircle, Send, Heart, PlayCircle, Globe, LayoutGrid, Sparkles } from 'lucide-react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInAnonymously, onAuthStateChanged } from 'firebase/auth';\nimport { getFirestore, collection, addDoc, query, onSnapshot, deleteDoc, doc, serverTimestamp, where, getDocs } from 'firebase/firestore';\n\n// ==========================================\n// ⚠️ 请在下方填入您的配置信息\n// ==========================================\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCBItd52zWdktiEuHmQIXbB4Q7sLM5602o\",\n  authDomain: \"frenchapp-6b44a.firebaseapp.com\",\n  projectId: \"frenchapp-6b44a\",\n  storageBucket: \"frenchapp-6b44a.firebasestorage.app\",\n  messagingSenderId: \"988616724582\",\n  appId: \"1:988616724582:web:723f9d9c75f8810b019da7\"\n};\nconst GEMINI_API_KEY = \"AIzaSyBivevjn0wQ3dD2OCuh98L2iALBssZfsq4\";\n\n// ==========================================\n\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst appId = \"french-memo-app\";\n\n// --- API Helper for Gemini ---\n\n// 1. 获取单个单词详情\nconst fetchWordData = async input => {\n  var _data$candidates, _data$candidates$, _data$candidates$$con, _data$candidates$$con2, _data$candidates$$con3;\n  const apiKey = GEMINI_API_KEY;\n  if (!apiKey || apiKey.includes(\"YOUR_GEMINI_API_KEY\")) throw new Error(\"API Key not set\");\n  const prompt = `\n    User input: \"${input}\".\n    Task: \n    1. Detect language. If NOT French, translate to common French word.\n    2. Analyze the French word.\n    \n    CRITICAL: Keep definitions EXTREMELY SHORT (1-3 words max). Just the direct translation. NO explanations.\n    \n    Return strictly valid JSON (no markdown):\n    {\n      \"word\": \"The French word\",\n      \"definitions\": {\n        \"en\": \"Direct translation (1-3 words)\",\n        \"zh\": \"直接的中文对应词(仅词义，不解释)\"\n      },\n      \"partOfSpeech\": \"abbrev. (n.m./adj.)\",\n      \"collection\": \"Category (e.g. Fruits)\",\n      \"relatedWords\": [\"synonym1\", \"antonym1\", \"related1\"],\n      \"relatedPhrases\": [\n        {\"fr\": \"Phrase 1\", \"zh\": \"Meaning 1\"},\n        {\"fr\": \"Phrase 2\", \"zh\": \"Meaning 2\"}\n      ],\n      \"examplePhrase\": {\n        \"fr\": \"Simple French sentence\",\n        \"en\": \"English translation\",\n        \"zh\": \"Chinese translation\",\n        \"explanation\": \"Brief grammar note\"\n      }\n    }\n  `;\n  const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      contents: [{\n        parts: [{\n          text: prompt\n        }]\n      }]\n    })\n  });\n  const data = await response.json();\n  const text = (_data$candidates = data.candidates) === null || _data$candidates === void 0 ? void 0 : (_data$candidates$ = _data$candidates[0]) === null || _data$candidates$ === void 0 ? void 0 : (_data$candidates$$con = _data$candidates$.content) === null || _data$candidates$$con === void 0 ? void 0 : (_data$candidates$$con2 = _data$candidates$$con.parts) === null || _data$candidates$$con2 === void 0 ? void 0 : (_data$candidates$$con3 = _data$candidates$$con2[0]) === null || _data$candidates$$con3 === void 0 ? void 0 : _data$candidates$$con3.text;\n  return text ? JSON.parse(text) : null;\n};\n\n// 2. 获取专辑列表\nconst fetchAlbumData = async category => {\n  var _data$candidates2, _data$candidates2$, _data$candidates2$$co, _data$candidates2$$co2, _data$candidates2$$co3;\n  const apiKey = GEMINI_API_KEY;\n  const prompt = `\n    List 8 common French vocabulary items for category: \"${category}\".\n    Return valid JSON:\n    {\n      \"category\": \"${category}\",\n      \"items\": [\n        { \"word\": \"FrenchWord\", \"article\": \"le/la/un\", \"zh\": \"Chinese\", \"isVisual\": true/false }\n      ]\n    }\n  `;\n  const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      contents: [{\n        parts: [{\n          text: prompt\n        }]\n      }]\n    })\n  });\n  const data = await response.json();\n  const text = (_data$candidates2 = data.candidates) === null || _data$candidates2 === void 0 ? void 0 : (_data$candidates2$ = _data$candidates2[0]) === null || _data$candidates2$ === void 0 ? void 0 : (_data$candidates2$$co = _data$candidates2$.content) === null || _data$candidates2$$co === void 0 ? void 0 : (_data$candidates2$$co2 = _data$candidates2$$co.parts) === null || _data$candidates2$$co2 === void 0 ? void 0 : (_data$candidates2$$co3 = _data$candidates2$$co2[0]) === null || _data$candidates2$$co3 === void 0 ? void 0 : _data$candidates2$$co3.text;\n  return text ? JSON.parse(text) : null;\n};\n\n// 3. 聊天 API\nconst fetchChatResponse = async (history, message) => {\n  var _data$candidates3, _data$candidates3$, _data$candidates3$$co, _data$candidates3$$co2, _data$candidates3$$co3;\n  const apiKey = GEMINI_API_KEY;\n  const prompt = `\n    You are a friendly French language tutor. \n    User message: \"${message}\".\n    Conversation history: ${JSON.stringify(history)}.\n    \n    Task: Reply in French. \n    CRITICAL FORMATTING: After your French reply, add the separator \"|||\" and then provide the English translation.\n    Example output: Bonjour, comment ça va? ||| Hello, how are you?\n  `;\n  const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      contents: [{\n        parts: [{\n          text: prompt\n        }]\n      }]\n    })\n  });\n  const data = await response.json();\n  return ((_data$candidates3 = data.candidates) === null || _data$candidates3 === void 0 ? void 0 : (_data$candidates3$ = _data$candidates3[0]) === null || _data$candidates3$ === void 0 ? void 0 : (_data$candidates3$$co = _data$candidates3$.content) === null || _data$candidates3$$co === void 0 ? void 0 : (_data$candidates3$$co2 = _data$candidates3$$co.parts) === null || _data$candidates3$$co2 === void 0 ? void 0 : (_data$candidates3$$co3 = _data$candidates3$$co2[0]) === null || _data$candidates3$$co3 === void 0 ? void 0 : _data$candidates3$$co3.text) || \"Désolé, je ne comprends pas. ||| Sorry, I don't understand.\";\n};\n\n// --- Sub-Components ---\n\nconst getImageUrl = (keyword, size = 'medium') => {\n  const dimensions = size === 'small' ? 'width=200&height=200' : 'width=600&height=400';\n  return `https://image.pollinations.ai/prompt/realistic%20${keyword}%20french%20context?${dimensions}&nologo=true&seed=${Math.random()}`;\n};\n\n// 修复发音不连贯：使用全局变量防止 Utterance 被垃圾回收\nlet currentUtterance = null;\nconst handleSpeak = text => {\n  if ('speechSynthesis' in window) {\n    window.speechSynthesis.cancel();\n    const utterance = new SpeechSynthesisUtterance(text);\n    utterance.lang = 'fr-FR';\n    utterance.rate = 0.9;\n\n    // 保存引用\n    currentUtterance = utterance;\n    utterance.onend = () => {\n      currentUtterance = null;\n    };\n    window.speechSynthesis.speak(utterance);\n  }\n};\nconst AlbumView = ({\n  data,\n  handleSearch,\n  favoriteAlbums,\n  toggleFavoriteAlbum,\n  setActiveTab\n}) => {\n  if (!data) return null;\n  const isFav = favoriteAlbums.some(f => f.category === data.category);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center justify-between mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('search'),\n          className: \"p-2 hover:bg-gray-100 rounded-full transition-colors\",\n          children: /*#__PURE__*/_jsxDEV(ArrowRight, {\n            className: \"rotate-180 text-gray-500\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 169,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 168,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n          className: \"text-2xl font-bold text-gray-900 flex items-center gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(Layers, {\n            className: \"text-blue-600\",\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this), data.category]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 171,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => toggleFavoriteAlbum(data),\n        className: `p-3 rounded-full transition-colors ${isFav ? 'bg-red-50 text-red-500' : 'bg-gray-50 text-gray-400 hover:text-red-400'}`,\n        children: /*#__PURE__*/_jsxDEV(Heart, {\n          size: 24,\n          fill: isFav ? \"currentColor\" : \"none\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 176,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 166,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-2 gap-4\",\n      children: data.items.map((item, idx) => {\n        if (item.isVisual) {\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleSearch(null, item.word),\n            className: \"group relative flex flex-col items-center bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-lg transition-all border border-gray-100 text-left\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-full aspect-[4/3] bg-gray-50 relative overflow-hidden\",\n              children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                src: getImageUrl(item.word, 'small'),\n                alt: item.word,\n                className: \"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 194,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-3 pt-8\",\n                children: /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-white font-medium text-lg\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"opacity-70 text-sm mr-1 font-normal\",\n                    children: item.article\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 201,\n                    columnNumber: 24\n                  }, this), item.word]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 200,\n                  columnNumber: 22\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 199,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 193,\n              columnNumber: 17\n            }, this)\n          }, idx, false, {\n            fileName: _jsxFileName,\n            lineNumber: 188,\n            columnNumber: 15\n          }, this);\n        } else {\n          return /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleSearch(null, item.word),\n            className: \"col-span-2 flex items-center justify-between p-4 bg-white rounded-xl shadow-sm hover:shadow-md border border-gray-100 hover:border-blue-200 transition-all group\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-lg font-bold text-gray-800 group-hover:text-blue-600 transition-colors\",\n                children: item.word\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 216,\n                columnNumber: 19\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 215,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-sm text-gray-500 font-medium\",\n              children: item.zh\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 218,\n              columnNumber: 17\n            }, this)]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 15\n          }, this);\n        }\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 184,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 165,\n    columnNumber: 5\n  }, this);\n};\n_c = AlbumView;\nconst WordCard = ({\n  data,\n  onDelete,\n  handleAlbumClick,\n  handleSearch,\n  toggleFavoriteWord,\n  favorites\n}) => {\n  _s();\n  const [showPhraseDetails, setShowPhraseDetails] = useState(false);\n  const [showAllPhrases, setShowAllPhrases] = useState(false);\n  const isFav = favorites.some(f => f.word === data.word);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"bg-white rounded-[2rem] shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 mb-8\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-56 overflow-hidden bg-gray-50 relative\",\n      children: /*#__PURE__*/_jsxDEV(\"img\", {\n        src: getImageUrl(data.word),\n        alt: data.word,\n        className: \"w-full h-full object-cover\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex gap-2 px-8 pt-4 bg-white\",\n      children: [/*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"bg-blue-50 px-3 py-1.5 rounded-full text-xs font-bold text-blue-600 uppercase tracking-wider\",\n        children: data.partOfSpeech\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 240,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => handleAlbumClick(data.collection),\n        className: \"bg-gray-100 hover:bg-gray-200 px-3 py-1.5 rounded-full text-xs font-bold text-gray-600 flex items-center gap-1.5 transition-colors cursor-pointer\",\n        children: [/*#__PURE__*/_jsxDEV(Layers, {\n          size: 14\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 247,\n          columnNumber: 9\n        }, this), data.collection]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-8 pt-2\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-4xl font-bold text-gray-900 tracking-tight\",\n            children: data.word\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 255,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: e => {\n              e.stopPropagation();\n              handleSpeak(data.word);\n            },\n            className: \"p-2.5 rounded-full bg-blue-50 text-blue-600 hover:bg-blue-100 transition-colors\",\n            children: /*#__PURE__*/_jsxDEV(Volume2, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 257,\n              columnNumber: 13\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 256,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 9\n        }, this), onDelete ? /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => onDelete(data.id),\n          className: \"p-2.5 rounded-full text-gray-300 hover:text-red-500 hover:bg-red-50 transition-colors\",\n          children: /*#__PURE__*/_jsxDEV(X, {\n            size: 22\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 261,\n          columnNumber: 12\n        }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => toggleFavoriteWord(data),\n          className: `p-2.5 rounded-full transition-colors ${isFav ? 'text-yellow-400 bg-yellow-50' : 'text-gray-300 hover:text-yellow-400 hover:bg-yellow-50'}`,\n          children: /*#__PURE__*/_jsxDEV(Star, {\n            size: 22,\n            fill: isFav ? \"currentColor\" : \"none\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 265,\n          columnNumber: 12\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"mb-6 text-left\",\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-lg text-gray-800 leading-normal flex flex-wrap items-baseline gap-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"font-bold\",\n            children: data.definitions.zh\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 274,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-300 font-light\",\n            children: \"|\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 275,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-gray-600 font-medium font-serif italic\",\n            children: data.definitions.en\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 276,\n            columnNumber: 12\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 273,\n          columnNumber: 10\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 272,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          onClick: () => {\n            handleSpeak(data.examplePhrase.fr);\n            setShowPhraseDetails(!showPhraseDetails);\n          },\n          className: \"bg-blue-50/50 rounded-xl border border-blue-100 overflow-hidden cursor-pointer hover:bg-blue-50 transition-colors\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"p-4 flex justify-between items-start gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex items-center gap-2 mb-1\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-[10px] font-bold text-blue-400 uppercase tracking-widest\",\n                  children: \"Exemple\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 286,\n                  columnNumber: 19\n                }, this), /*#__PURE__*/_jsxDEV(Mic, {\n                  size: 12,\n                  className: \"text-blue-400\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 287,\n                  columnNumber: 19\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 285,\n                columnNumber: 16\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-xl text-gray-800 font-serif italic leading-snug\",\n                children: [\"\\\"\", data.examplePhrase.fr, \"\\\"\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 289,\n                columnNumber: 16\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 284,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(ChevronDown, {\n              size: 18,\n              className: `text-blue-300 mt-2 transition-transform ${showPhraseDetails ? 'rotate-180' : ''}`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 291,\n              columnNumber: 14\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 283,\n            columnNumber: 11\n          }, this), showPhraseDetails && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"px-4 pb-4 pt-0 space-y-1.5 animate-in slide-in-from-top-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-600\",\n              children: data.examplePhrase.zh\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 296,\n              columnNumber: 16\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"text-sm text-gray-500\",\n              children: data.examplePhrase.en\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 16\n            }, this), data.examplePhrase.explanation && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"mt-2 text-xs text-blue-500 bg-blue-100/50 p-2 rounded-lg\",\n              children: [\"\\uD83D\\uDCA1 \", data.examplePhrase.explanation]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 299,\n              columnNumber: 18\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 295,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 9\n        }, this), data.relatedPhrases && data.relatedPhrases.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pl-2 pt-2\",\n          children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"text-xs font-bold text-gray-400 uppercase mb-2 tracking-wider\",\n            children: \"\\u5E38\\u7528\\u77ED\\u8BED\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 308,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"space-y-1.5\",\n            children: data.relatedPhrases.slice(0, showAllPhrases ? undefined : 2).map((phrase, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex justify-between items-center group py-1 border-b border-gray-50 last:border-0\",\n              children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-gray-700 font-medium cursor-pointer hover:text-blue-600\",\n                onClick: () => handleSpeak(phrase.fr),\n                children: phrase.fr\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 312,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-gray-400\",\n                children: phrase.zh\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 313,\n                columnNumber: 21\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 311,\n              columnNumber: 18\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 309,\n            columnNumber: 13\n          }, this), data.relatedPhrases.length > 2 && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setShowAllPhrases(!showAllPhrases),\n            className: \"text-xs text-blue-500 font-medium mt-2 hover:underline flex items-center gap-1\",\n            children: showAllPhrases ? \"收起\" : `查看更多 (${data.relatedPhrases.length - 2})`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 307,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 281,\n        columnNumber: 7\n      }, this), data.relatedWords && data.relatedWords.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"pt-6 mt-6 border-t border-gray-100\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex overflow-x-auto pb-4 gap-3 no-scrollbar\",\n          children: data.relatedWords.map((word, idx) => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleSearch(null, word),\n            className: \"flex-shrink-0 flex flex-col items-center w-20 group\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"w-16 h-16 rounded-xl overflow-hidden mb-2 bg-gray-100 border border-gray-200 group-hover:border-blue-300 transition-all\",\n              children: /*#__PURE__*/_jsxDEV(\"img\", {\n                src: getImageUrl(word, 'small'),\n                className: \"w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 333,\n                columnNumber: 22\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 332,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs text-gray-500 group-hover:text-blue-600 truncate w-full text-center\",\n              children: word\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 19\n            }, this)]\n          }, idx, true, {\n            fileName: _jsxFileName,\n            lineNumber: 331,\n            columnNumber: 17\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 329,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 328,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 252,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 234,\n    columnNumber: 3\n  }, this);\n};\n_s(WordCard, \"j5lNyFO2DNPlarnGtRR+cOgFvFA=\");\n_c2 = WordCard;\nconst ChatView = ({\n  messages,\n  chatInput,\n  setChatInput,\n  handleSendChat,\n  startListening,\n  isRecording,\n  chatEndRef,\n  toggleTranslation\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: \"flex flex-col h-full\",\n  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex-1 overflow-y-auto p-4 space-y-4 pb-32\",\n    children: [messages.map((msg, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`,\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `max-w-[85%] p-4 rounded-2xl ${msg.role === 'user' ? 'bg-blue-600 text-white rounded-br-none' : 'bg-white border border-gray-100 text-gray-800 rounded-bl-none shadow-sm'}`,\n        children: [/*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-base leading-relaxed\",\n          children: msg.text\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 357,\n          columnNumber: 13\n        }, this), msg.role === 'ai' && !msg.isLoading && msg.translation && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 pt-2 border-t border-gray-100\",\n          children: msg.showTranslation ? /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm text-gray-500 animate-in fade-in\",\n            children: msg.translation\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 363,\n            columnNumber: 20\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => toggleTranslation(idx),\n            className: \"text-xs text-blue-400 font-medium flex items-center gap-1 hover:text-blue-600\",\n            children: [/*#__PURE__*/_jsxDEV(Globe, {\n              size: 12\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 369,\n              columnNumber: 22\n            }, this), \" \\u663E\\u793A\\u7FFB\\u8BD1\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 365,\n            columnNumber: 20\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 361,\n          columnNumber: 15\n        }, this), msg.role === 'ai' && !msg.isLoading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mt-2 flex justify-end\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleSpeak(msg.text),\n            className: \"text-blue-300 hover:text-blue-600 p-1\",\n            children: /*#__PURE__*/_jsxDEV(Volume2, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 378,\n              columnNumber: 114\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 378,\n            columnNumber: 18\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 377,\n          columnNumber: 16\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 352,\n        columnNumber: 11\n      }, this)\n    }, idx, false, {\n      fileName: _jsxFileName,\n      lineNumber: 351,\n      columnNumber: 9\n    }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n      ref: chatEndRef\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 384,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 349,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"p-4 bg-white border-t border-gray-100 sticky bottom-0 z-20\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center gap-2 bg-gray-50 p-2 rounded-full border border-gray-200 focus-within:ring-2 focus-within:ring-blue-100 transition-all shadow-sm\",\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: chatInput,\n        onChange: e => setChatInput(e.target.value),\n        placeholder: \"\\u8BF4\\u70B9\\u6CD5\\u8BED...\",\n        className: \"flex-1 bg-transparent border-none focus:ring-0 px-4 py-2 text-gray-800 placeholder-gray-400\",\n        onKeyDown: e => e.key === 'Enter' && handleSendChat()\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 390,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: startListening,\n        className: `p-2 rounded-full transition-colors ${isRecording ? 'bg-red-500 text-white animate-pulse' : 'text-gray-400 hover:text-blue-600'}`,\n        children: /*#__PURE__*/_jsxDEV(Mic, {\n          size: 20\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 402,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 398,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: handleSendChat,\n        className: \"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors shadow-md disabled:opacity-50\",\n        disabled: !chatInput.trim(),\n        children: /*#__PURE__*/_jsxDEV(Send, {\n          size: 18\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 404,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 389,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 388,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 347,\n  columnNumber: 3\n}, this);\n\n// 极简风格浮动单词 (Minimalist)\n_c3 = ChatView;\nconst FloatingWords = ({\n  onWordClick\n}) => {\n  _s2();\n  // 每天随机展示6个单词 (模拟)\n  const wordsPool = ['Amour', 'Rêve', 'Étoile', 'Lumière', 'Voyage', 'Océan', 'Espoir', 'Soleil', 'Lune', 'Nuage', 'Montagne', 'Rivière', 'Forêt', 'Fleur'];\n  const [displayWords, setDisplayWords] = useState([]);\n  useEffect(() => {\n    // 简单的随机混洗取前6个\n    const shuffled = [...wordsPool].sort(() => 0.5 - Math.random());\n    setDisplayWords(shuffled.slice(0, 6));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"mb-10 px-2\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex items-center gap-2 mb-4 px-2\",\n      children: [/*#__PURE__*/_jsxDEV(Sparkles, {\n        size: 16,\n        className: \"text-yellow-500\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 435,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"text-sm font-bold text-gray-400 uppercase tracking-wider\",\n        children: \"\\u6BCF\\u65E5\\u7075\\u611F\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 436,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 434,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"grid grid-cols-2 gap-3\",\n      children: displayWords.map((word, i) => /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => onWordClick(word),\n        className: \"group relative h-24 bg-white rounded-2xl border border-gray-100 shadow-sm hover:shadow-md hover:border-blue-200 transition-all duration-300 flex flex-col items-center justify-center overflow-hidden\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity\",\n          children: /*#__PURE__*/_jsxDEV(Layers, {\n            size: 40,\n            className: \"text-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 447,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 446,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-lg font-medium text-gray-800 group-hover:text-blue-600 transition-colors z-10\",\n          children: word\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 449,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"text-xs text-gray-400 mt-1 z-10 opacity-0 group-hover:opacity-100 transition-opacity transform translate-y-2 group-hover:translate-y-0\",\n          children: \"\\u70B9\\u51FB\\u63A2\\u7D22\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 450,\n          columnNumber: 14\n        }, this)]\n      }, i, true, {\n        fileName: _jsxFileName,\n        lineNumber: 441,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 439,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 433,\n    columnNumber: 5\n  }, this);\n};\n_s2(FloatingWords, \"tI7sZtWKEYhiCS4mSsOWyMYZgl0=\");\n_c4 = FloatingWords;\nexport default function App() {\n  _s3();\n  const [user, setUser] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [currentWordData, setCurrentWordData] = useState(null);\n\n  // 缓存机制\n  const [wordCache, setWordCache] = useState({});\n  const [albumData, setAlbumData] = useState(null);\n  const [albumCache, setAlbumCache] = useState({});\n\n  // 收藏相关\n  const [favorites, setFavorites] = useState([]);\n  const [favoriteAlbums, setFavoriteAlbums] = useState([]);\n\n  // 聊天相关\n  const [messages, setMessages] = useState([{\n    role: 'ai',\n    text: 'Bonjour! Je suis ton prof de français.',\n    translation: 'Hello! I am your French teacher.',\n    showTranslation: false\n  }]);\n  const [chatInput, setChatInput] = useState('');\n  const [isRecording, setIsRecording] = useState(false);\n  const chatEndRef = useRef(null);\n  const [activeTab, setActiveTab] = useState('search');\n  useEffect(() => {\n    signInAnonymously(auth).catch(console.error);\n    const unsubscribe = onAuthStateChanged(auth, setUser);\n    return () => unsubscribe();\n  }, []);\n\n  // Sync Logic (Favorites)\n  useEffect(() => {\n    if (!user) return;\n    const q = query(collection(db, 'artifacts', appId, 'users', user.uid, 'favorites'));\n    const unsubscribe = onSnapshot(q, snapshot => {\n      const favs = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      favs.sort((a, b) => {\n        var _b$timestamp, _a$timestamp;\n        return (((_b$timestamp = b.timestamp) === null || _b$timestamp === void 0 ? void 0 : _b$timestamp.seconds) || 0) - (((_a$timestamp = a.timestamp) === null || _a$timestamp === void 0 ? void 0 : _a$timestamp.seconds) || 0);\n      });\n      setFavorites(favs);\n    });\n    return () => unsubscribe();\n  }, [user]);\n  useEffect(() => {\n    if (!user) return;\n    const q = query(collection(db, 'artifacts', appId, 'users', user.uid, 'favoriteAlbums'));\n    const unsubscribe = onSnapshot(q, snapshot => {\n      const favs = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setFavoriteAlbums(favs);\n    });\n    return () => unsubscribe();\n  }, [user]);\n\n  // Scroll Chat\n  useEffect(() => {\n    var _chatEndRef$current;\n    (_chatEndRef$current = chatEndRef.current) === null || _chatEndRef$current === void 0 ? void 0 : _chatEndRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages, activeTab]);\n\n  // --- Handlers ---\n  const handleSearch = async (e, wordOverride = null) => {\n    if (e) e.preventDefault();\n    const term = wordOverride || searchTerm;\n    const cleanTerm = term.trim().toLowerCase();\n    if (!cleanTerm) return;\n    setLoading(true);\n    setCurrentWordData(null);\n    setAlbumData(null);\n    setActiveTab('search');\n    setSearchTerm(term); // Sync input box\n\n    if (wordCache[cleanTerm]) {\n      setCurrentWordData(wordCache[cleanTerm]);\n      setLoading(false);\n      return;\n    }\n    try {\n      const data = await fetchWordData(term);\n      setCurrentWordData(data);\n      setWordCache(prev => ({\n        ...prev,\n        [cleanTerm]: data,\n        [data.word.toLowerCase()]: data\n      }));\n    } catch (err) {\n      alert(\"Error fetching word. Try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleAlbumClick = async category => {\n    setActiveTab('album');\n    if (albumCache[category]) {\n      setAlbumData(albumCache[category]);\n      return;\n    }\n    setLoading(true);\n    setAlbumData(null);\n    try {\n      const data = await fetchAlbumData(category);\n      setAlbumData(data);\n      setAlbumCache(prev => ({\n        ...prev,\n        [category]: data\n      }));\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to load album.\");\n      setActiveTab('search');\n    } finally {\n      setLoading(false);\n    }\n  };\n  const toggleFavoriteWord = async wordData => {\n    if (!user) return;\n    const existing = favorites.find(f => f.word === wordData.word);\n    try {\n      if (existing) {\n        await deleteDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'favorites', existing.id));\n      } else {\n        await addDoc(collection(db, 'artifacts', appId, 'users', user.uid, 'favorites'), {\n          ...wordData,\n          timestamp: serverTimestamp()\n        });\n      }\n    } catch (e) {\n      console.error(\"Fav Error\", e);\n    }\n  };\n  const toggleFavoriteAlbum = async albumData => {\n    if (!user || !albumData) return;\n    const existing = favoriteAlbums.find(f => f.category === albumData.category);\n    try {\n      if (existing) {\n        await deleteDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'favoriteAlbums', existing.id));\n      } else {\n        await addDoc(collection(db, 'artifacts', appId, 'users', user.uid, 'favoriteAlbums'), {\n          ...albumData,\n          timestamp: serverTimestamp()\n        });\n      }\n    } catch (e) {\n      console.error(\"Album Fav Error\", e);\n    }\n  };\n  const handleSendChat = async () => {\n    if (!chatInput.trim()) return;\n    const userMsg = {\n      role: 'user',\n      text: chatInput\n    };\n    setMessages(prev => [...prev, userMsg]);\n    setChatInput('');\n    setMessages(prev => [...prev, {\n      role: 'ai',\n      text: '...',\n      isLoading: true\n    }]);\n    try {\n      const rawResponse = await fetchChatResponse(messages.map(m => ({\n        role: m.role,\n        content: m.text\n      })), userMsg.text);\n\n      // 分离翻译\n      const parts = rawResponse.split('|||');\n      const frText = parts[0].trim();\n      const enText = parts[1] ? parts[1].trim() : \"\";\n      setMessages(prev => {\n        const newMsgs = prev.filter(m => !m.isLoading);\n        return [...newMsgs, {\n          role: 'ai',\n          text: frText,\n          translation: enText,\n          showTranslation: false\n        }];\n      });\n      handleSpeak(frText);\n    } catch (e) {\n      setMessages(prev => prev.filter(m => !m.isLoading));\n    }\n  };\n  const toggleTranslation = idx => {\n    setMessages(prev => prev.map((msg, i) => i === idx ? {\n      ...msg,\n      showTranslation: !msg.showTranslation\n    } : msg));\n  };\n  const startListening = () => {\n    if (!('webkitSpeechRecognition' in window)) {\n      alert(\"此浏览器不支持语音输入，请使用 Chrome。\");\n      return;\n    }\n    const recognition = new window.webkitSpeechRecognition();\n    recognition.lang = 'fr-FR';\n    recognition.continuous = false;\n    recognition.interimResults = false;\n    recognition.onstart = () => setIsRecording(true);\n    recognition.onend = () => setIsRecording(false);\n    recognition.onresult = event => {\n      const transcript = event.results[0][0].transcript;\n      setChatInput(transcript);\n    };\n    recognition.start();\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 font-sans text-gray-900 pb-20\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white/90 backdrop-blur-md border-b border-gray-100 sticky top-0 z-30\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-xl mx-auto px-6 py-4 flex justify-between items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          onClick: () => setActiveTab('search'),\n          className: \"text-xl font-bold text-gray-900 flex items-center gap-2 tracking-tight cursor-pointer\",\n          children: [/*#__PURE__*/_jsxDEV(BookOpen, {\n            size: 22,\n            className: \"text-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 645,\n            columnNumber: 13\n          }, this), \"FrenchMemo\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 644,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-gray-400 font-medium font-mono\",\n          children: user ? `UID: ${user.uid.slice(0, 4)}` : 'Connecting...'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 648,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 643,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 642,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-xl mx-auto px-6 py-8 h-full\",\n      children: [activeTab === 'chat' && /*#__PURE__*/_jsxDEV(ChatView, {\n        messages: messages,\n        chatInput: chatInput,\n        setChatInput: setChatInput,\n        handleSendChat: handleSendChat,\n        startListening: startListening,\n        isRecording: isRecording,\n        chatEndRef: chatEndRef,\n        toggleTranslation: toggleTranslation\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 657,\n        columnNumber: 11\n      }, this), activeTab === 'album' && loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-20 flex flex-col items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"animate-spin text-blue-600 mb-4\",\n          size: 32\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 671,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500\",\n          children: \"\\u6B63\\u5728\\u751F\\u6210\\u4E13\\u8F91...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 672,\n          columnNumber: 14\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 670,\n        columnNumber: 12\n      }, this), activeTab === 'album' && !loading && albumData && /*#__PURE__*/_jsxDEV(AlbumView, {\n        data: albumData,\n        handleSearch: handleSearch,\n        favoriteAlbums: favoriteAlbums,\n        toggleFavoriteAlbum: toggleFavoriteAlbum,\n        setActiveTab: setActiveTab\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 677,\n        columnNumber: 11\n      }, this), activeTab === 'search' && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSearch,\n          className: \"relative mb-8 group z-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `absolute inset-0 bg-blue-500/5 rounded-full blur-xl transition-opacity duration-300 ${loading ? 'opacity-100' : 'opacity-0 group-hover:opacity-100'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 689,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: searchTerm,\n            onChange: e => setSearchTerm(e.target.value),\n            placeholder: \"\\u8F93\\u5165\\u4E2D/\\u82F1/\\u6CD5\\u6587...\",\n            className: \"w-full pl-14 pr-14 py-4 bg-white border-0 rounded-full shadow-[0_8px_30px_rgb(0,0,0,0.06)] text-xl font-medium placeholder:text-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all relative z-10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 690,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Search, {\n            className: \"absolute left-5 top-1/2 -translate-y-1/2 text-gray-400 z-20\",\n            size: 22\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 691,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading,\n            className: \"absolute right-3 top-1/2 -translate-y-1/2 p-2.5 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors disabled:opacity-70 hover:scale-105 active:scale-95 z-20 shadow-md\",\n            children: loading ? /*#__PURE__*/_jsxDEV(Loader2, {\n              className: \"animate-spin\",\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 693,\n              columnNumber: 28\n            }, this) : /*#__PURE__*/_jsxDEV(ArrowRight, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 693,\n              columnNumber: 77\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 692,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 688,\n          columnNumber: 13\n        }, this), !currentWordData && !loading && /*#__PURE__*/_jsxDEV(FloatingWords, {\n          onWordClick: word => handleSearch(null, word)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 699,\n          columnNumber: 16\n        }, this), currentWordData && /*#__PURE__*/_jsxDEV(WordCard, {\n          data: currentWordData,\n          toggleFavoriteWord: toggleFavoriteWord,\n          favorites: favorites,\n          handleAlbumClick: handleAlbumClick,\n          handleSearch: handleSearch\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 703,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true), activeTab === 'favorites' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-8 pb-20\",\n        children: [favoriteAlbums.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4\",\n            children: \"\\u6536\\u85CF\\u7684\\u4E13\\u8F91\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 718,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-3\",\n            children: favoriteAlbums.map(album => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleAlbumClick(album.category),\n              className: \"bg-white p-4 rounded-xl border border-gray-100 shadow-sm text-left hover:border-blue-200 transition-all\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-bold text-gray-800\",\n                  children: album.category\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 723,\n                  columnNumber: 26\n                }, this), /*#__PURE__*/_jsxDEV(Layers, {\n                  size: 16,\n                  className: \"text-blue-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 724,\n                  columnNumber: 26\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 722,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-gray-400 mt-2 block\",\n                children: [album.items.length, \" words\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 726,\n                columnNumber: 23\n              }, this)]\n            }, album.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 721,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 719,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 717,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4\",\n          children: \"\\u6536\\u85CF\\u7684\\u5355\\u8BCD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 733,\n          columnNumber: 13\n        }, this), favorites.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-10\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500 font-medium\",\n            children: \"\\u6682\\u65E0\\u6536\\u85CF\\u5355\\u8BCD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 735,\n            columnNumber: 50\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 735,\n          columnNumber: 15\n        }, this) : favorites.map(fav => /*#__PURE__*/_jsxDEV(WordCard, {\n          data: fav,\n          toggleFavoriteWord: () => toggleFavoriteWord(fav),\n          favorites: favorites,\n          onDelete: () => toggleFavoriteWord(fav),\n          handleAlbumClick: handleAlbumClick,\n          handleSearch: handleSearch\n        }, fav.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 738,\n          columnNumber: 17\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 715,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 654,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 z-40 pb-safe\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex max-w-xl mx-auto\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('search'),\n          className: `flex-1 py-3 flex flex-col items-center gap-1 transition-colors ${activeTab === 'search' ? 'text-blue-600' : 'text-gray-400 hover:text-gray-600'}`,\n          children: [/*#__PURE__*/_jsxDEV(Search, {\n            size: 22\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 760,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-[10px] font-medium\",\n            children: \"\\u63A2\\u7D22\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 761,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 756,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('chat'),\n          className: `flex-1 py-3 flex flex-col items-center gap-1 transition-colors ${activeTab === 'chat' ? 'text-blue-600' : 'text-gray-400 hover:text-gray-600'}`,\n          children: [/*#__PURE__*/_jsxDEV(MessageCircle, {\n            size: 22\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 768,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-[10px] font-medium\",\n            children: \"AI\\u5BF9\\u8BDD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 769,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 764,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('favorites'),\n          className: `flex-1 py-3 flex flex-col items-center gap-1 transition-colors ${activeTab === 'favorites' ? 'text-blue-600' : 'text-gray-400 hover:text-gray-600'}`,\n          children: [/*#__PURE__*/_jsxDEV(Star, {\n            size: 22\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 776,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n            className: \"text-[10px] font-medium\",\n            children: \"\\u6536\\u85CF\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 777,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 772,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 755,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 754,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 640,\n    columnNumber: 5\n  }, this);\n}\n_s3(App, \"uVFf25jhXNXpg4NTxnzUIAEPnBA=\");\n_c5 = App;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"AlbumView\");\n$RefreshReg$(_c2, \"WordCard\");\n$RefreshReg$(_c3, \"ChatView\");\n$RefreshReg$(_c4, \"FloatingWords\");\n$RefreshReg$(_c5, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Search","Volume2","Star","BookOpen","ArrowRight","Loader2","Layers","X","ChevronDown","ChevronUp","Info","Mic","MessageCircle","Send","Heart","PlayCircle","Globe","LayoutGrid","Sparkles","initializeApp","getAuth","signInAnonymously","onAuthStateChanged","getFirestore","collection","addDoc","query","onSnapshot","deleteDoc","doc","serverTimestamp","where","getDocs","jsxDEV","_jsxDEV","Fragment","_Fragment","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","GEMINI_API_KEY","app","auth","db","fetchWordData","input","_data$candidates","_data$candidates$","_data$candidates$$con","_data$candidates$$con2","_data$candidates$$con3","includes","Error","prompt","response","fetch","method","headers","body","JSON","stringify","contents","parts","text","data","json","candidates","content","parse","fetchAlbumData","category","_data$candidates2","_data$candidates2$","_data$candidates2$$co","_data$candidates2$$co2","_data$candidates2$$co3","fetchChatResponse","history","message","_data$candidates3","_data$candidates3$","_data$candidates3$$co","_data$candidates3$$co2","_data$candidates3$$co3","getImageUrl","keyword","size","dimensions","Math","random","currentUtterance","handleSpeak","window","speechSynthesis","cancel","utterance","SpeechSynthesisUtterance","lang","rate","onend","speak","AlbumView","handleSearch","favoriteAlbums","toggleFavoriteAlbum","setActiveTab","isFav","some","f","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","fill","items","map","item","idx","isVisual","word","src","alt","article","zh","_c","WordCard","onDelete","handleAlbumClick","toggleFavoriteWord","favorites","_s","showPhraseDetails","setShowPhraseDetails","showAllPhrases","setShowAllPhrases","partOfSpeech","e","stopPropagation","id","definitions","en","examplePhrase","fr","explanation","relatedPhrases","length","slice","undefined","phrase","relatedWords","_c2","ChatView","messages","chatInput","setChatInput","handleSendChat","startListening","isRecording","chatEndRef","toggleTranslation","msg","role","isLoading","translation","showTranslation","ref","type","value","onChange","target","placeholder","onKeyDown","key","disabled","trim","_c3","FloatingWords","onWordClick","_s2","wordsPool","displayWords","setDisplayWords","shuffled","sort","i","_c4","App","_s3","user","setUser","searchTerm","setSearchTerm","loading","setLoading","currentWordData","setCurrentWordData","wordCache","setWordCache","albumData","setAlbumData","albumCache","setAlbumCache","setFavorites","setFavoriteAlbums","setMessages","setIsRecording","activeTab","catch","console","error","unsubscribe","q","uid","snapshot","favs","docs","a","b","_b$timestamp","_a$timestamp","timestamp","seconds","_chatEndRef$current","current","scrollIntoView","behavior","wordOverride","preventDefault","term","cleanTerm","toLowerCase","prev","err","alert","wordData","existing","find","userMsg","rawResponse","m","split","frText","enText","newMsgs","filter","recognition","webkitSpeechRecognition","continuous","interimResults","onstart","onresult","event","transcript","results","start","onSubmit","album","fav","_c5","$RefreshReg$"],"sources":["/Users/zhaolu/Documents/Code/frenchapp/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Search, Volume2, Star, BookOpen, ArrowRight, Loader2, Layers, X, ChevronDown, ChevronUp, Info, Mic, MessageCircle, Send, Heart, PlayCircle, Globe, LayoutGrid, Sparkles } from 'lucide-react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInAnonymously, onAuthStateChanged } from 'firebase/auth';\nimport { getFirestore, collection, addDoc, query, onSnapshot, deleteDoc, doc, serverTimestamp, where, getDocs } from 'firebase/firestore';\n\n// ==========================================\n// ⚠️ 请在下方填入您的配置信息\n// ==========================================\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCBItd52zWdktiEuHmQIXbB4Q7sLM5602o\",\n  authDomain: \"frenchapp-6b44a.firebaseapp.com\",\n  projectId: \"frenchapp-6b44a\",\n  storageBucket: \"frenchapp-6b44a.firebasestorage.app\",\n  messagingSenderId: \"988616724582\",\n  appId: \"1:988616724582:web:723f9d9c75f8810b019da7\"\n};\n\n\nconst GEMINI_API_KEY = \"AIzaSyBivevjn0wQ3dD2OCuh98L2iALBssZfsq4\"; \n\n// ==========================================\n\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst appId = \"french-memo-app\";\n\n// --- API Helper for Gemini ---\n\n// 1. 获取单个单词详情\nconst fetchWordData = async (input) => {\n  const apiKey = GEMINI_API_KEY; \n  if (!apiKey || apiKey.includes(\"YOUR_GEMINI_API_KEY\")) throw new Error(\"API Key not set\");\n\n  const prompt = `\n    User input: \"${input}\".\n    Task: \n    1. Detect language. If NOT French, translate to common French word.\n    2. Analyze the French word.\n    \n    CRITICAL: Keep definitions EXTREMELY SHORT (1-3 words max). Just the direct translation. NO explanations.\n    \n    Return strictly valid JSON (no markdown):\n    {\n      \"word\": \"The French word\",\n      \"definitions\": {\n        \"en\": \"Direct translation (1-3 words)\",\n        \"zh\": \"直接的中文对应词(仅词义，不解释)\"\n      },\n      \"partOfSpeech\": \"abbrev. (n.m./adj.)\",\n      \"collection\": \"Category (e.g. Fruits)\",\n      \"relatedWords\": [\"synonym1\", \"antonym1\", \"related1\"],\n      \"relatedPhrases\": [\n        {\"fr\": \"Phrase 1\", \"zh\": \"Meaning 1\"},\n        {\"fr\": \"Phrase 2\", \"zh\": \"Meaning 2\"}\n      ],\n      \"examplePhrase\": {\n        \"fr\": \"Simple French sentence\",\n        \"en\": \"English translation\",\n        \"zh\": \"Chinese translation\",\n        \"explanation\": \"Brief grammar note\"\n      }\n    }\n  `;\n\n  const response = await fetch(\n    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,\n    {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] }),\n    }\n  );\n  const data = await response.json();\n  const text = data.candidates?.[0]?.content?.parts?.[0]?.text;\n  return text ? JSON.parse(text) : null;\n};\n\n// 2. 获取专辑列表\nconst fetchAlbumData = async (category) => {\n  const apiKey = GEMINI_API_KEY;\n  const prompt = `\n    List 8 common French vocabulary items for category: \"${category}\".\n    Return valid JSON:\n    {\n      \"category\": \"${category}\",\n      \"items\": [\n        { \"word\": \"FrenchWord\", \"article\": \"le/la/un\", \"zh\": \"Chinese\", \"isVisual\": true/false }\n      ]\n    }\n  `;\n\n  const response = await fetch(\n    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,\n    {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] }),\n    }\n  );\n  const data = await response.json();\n  const text = data.candidates?.[0]?.content?.parts?.[0]?.text;\n  return text ? JSON.parse(text) : null;\n};\n\n// 3. 聊天 API\nconst fetchChatResponse = async (history, message) => {\n  const apiKey = GEMINI_API_KEY;\n  const prompt = `\n    You are a friendly French language tutor. \n    User message: \"${message}\".\n    Conversation history: ${JSON.stringify(history)}.\n    \n    Task: Reply in French. \n    CRITICAL FORMATTING: After your French reply, add the separator \"|||\" and then provide the English translation.\n    Example output: Bonjour, comment ça va? ||| Hello, how are you?\n  `;\n  \n  const response = await fetch(\n    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,\n    {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] }),\n    }\n  );\n  const data = await response.json();\n  return data.candidates?.[0]?.content?.parts?.[0]?.text || \"Désolé, je ne comprends pas. ||| Sorry, I don't understand.\";\n};\n\n// --- Sub-Components ---\n\nconst getImageUrl = (keyword, size = 'medium') => {\n  const dimensions = size === 'small' ? 'width=200&height=200' : 'width=600&height=400';\n  return `https://image.pollinations.ai/prompt/realistic%20${keyword}%20french%20context?${dimensions}&nologo=true&seed=${Math.random()}`;\n};\n\n// 修复发音不连贯：使用全局变量防止 Utterance 被垃圾回收\nlet currentUtterance = null;\nconst handleSpeak = (text) => {\n  if ('speechSynthesis' in window) {\n    window.speechSynthesis.cancel();\n    const utterance = new SpeechSynthesisUtterance(text);\n    utterance.lang = 'fr-FR';\n    utterance.rate = 0.9;\n    \n    // 保存引用\n    currentUtterance = utterance;\n    \n    utterance.onend = () => {\n      currentUtterance = null;\n    };\n    \n    window.speechSynthesis.speak(utterance);\n  }\n};\n\nconst AlbumView = ({ data, handleSearch, favoriteAlbums, toggleFavoriteAlbum, setActiveTab }) => {\n  if (!data) return null;\n  const isFav = favoriteAlbums.some(f => f.category === data.category);\n\n  return (\n    <div className=\"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20\">\n      <div className=\"flex items-center justify-between mb-6\">\n        <div className=\"flex items-center gap-3\">\n          <button onClick={() => setActiveTab('search')} className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\">\n            <ArrowRight className=\"rotate-180 text-gray-500\" />\n          </button>\n          <h2 className=\"text-2xl font-bold text-gray-900 flex items-center gap-2\">\n            <Layers className=\"text-blue-600\" size={24} />\n            {data.category}\n          </h2>\n        </div>\n        <button \n          onClick={() => toggleFavoriteAlbum(data)}\n          className={`p-3 rounded-full transition-colors ${isFav ? 'bg-red-50 text-red-500' : 'bg-gray-50 text-gray-400 hover:text-red-400'}`}\n        >\n          <Heart size={24} fill={isFav ? \"currentColor\" : \"none\"} />\n        </button>\n      </div>\n\n      <div className=\"grid grid-cols-2 gap-4\">\n        {data.items.map((item, idx) => {\n          if (item.isVisual) {\n            return (\n              <button \n                key={idx}\n                onClick={() => handleSearch(null, item.word)}\n                className=\"group relative flex flex-col items-center bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-lg transition-all border border-gray-100 text-left\"\n              >\n                <div className=\"w-full aspect-[4/3] bg-gray-50 relative overflow-hidden\">\n                  <img \n                    src={getImageUrl(item.word, 'small')} \n                    alt={item.word} \n                    className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700\"\n                  />\n                  <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-3 pt-8\">\n                     <p className=\"text-white font-medium text-lg\">\n                       <span className=\"opacity-70 text-sm mr-1 font-normal\">{item.article}</span>\n                       {item.word}\n                     </p>\n                  </div>\n                </div>\n              </button>\n            );\n          } else {\n            return (\n              <button \n                key={idx}\n                onClick={() => handleSearch(null, item.word)}\n                className=\"col-span-2 flex items-center justify-between p-4 bg-white rounded-xl shadow-sm hover:shadow-md border border-gray-100 hover:border-blue-200 transition-all group\"\n              >\n                <div>\n                  <span className=\"text-lg font-bold text-gray-800 group-hover:text-blue-600 transition-colors\">{item.word}</span>\n                </div>\n                <span className=\"text-sm text-gray-500 font-medium\">{item.zh}</span>\n              </button>\n            );\n          }\n        })}\n      </div>\n    </div>\n  );\n};\n\nconst WordCard = ({ data, onDelete, handleAlbumClick, handleSearch, toggleFavoriteWord, favorites }) => {\n  const [showPhraseDetails, setShowPhraseDetails] = useState(false);\n  const [showAllPhrases, setShowAllPhrases] = useState(false);\n  const isFav = favorites.some(f => f.word === data.word);\n\n  return (\n  <div className=\"bg-white rounded-[2rem] shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 mb-8\">\n    <div className=\"h-56 overflow-hidden bg-gray-50 relative\">\n      <img src={getImageUrl(data.word)} alt={data.word} className=\"w-full h-full object-cover\" />\n    </div>\n\n    <div className=\"flex gap-2 px-8 pt-4 bg-white\">\n      <span className=\"bg-blue-50 px-3 py-1.5 rounded-full text-xs font-bold text-blue-600 uppercase tracking-wider\">\n        {data.partOfSpeech}\n      </span>\n      <button \n        onClick={() => handleAlbumClick(data.collection)}\n        className=\"bg-gray-100 hover:bg-gray-200 px-3 py-1.5 rounded-full text-xs font-bold text-gray-600 flex items-center gap-1.5 transition-colors cursor-pointer\"\n      >\n        <Layers size={14} />\n        {data.collection}\n      </button>\n    </div>\n\n    <div className=\"p-8 pt-2\">\n      <div className=\"flex justify-between items-center mb-6\">\n        <div className=\"flex items-center gap-3\">\n          <h2 className=\"text-4xl font-bold text-gray-900 tracking-tight\">{data.word}</h2>\n          <button onClick={(e) => { e.stopPropagation(); handleSpeak(data.word); }} className=\"p-2.5 rounded-full bg-blue-50 text-blue-600 hover:bg-blue-100 transition-colors\">\n            <Volume2 size={20} />\n          </button>\n        </div>\n        {onDelete ? (\n           <button onClick={() => onDelete(data.id)} className=\"p-2.5 rounded-full text-gray-300 hover:text-red-500 hover:bg-red-50 transition-colors\">\n             <X size={22} />\n           </button>\n        ) : (\n           <button onClick={() => toggleFavoriteWord(data)} className={`p-2.5 rounded-full transition-colors ${isFav ? 'text-yellow-400 bg-yellow-50' : 'text-gray-300 hover:text-yellow-400 hover:bg-yellow-50'}`}>\n             <Star size={22} fill={isFav ? \"currentColor\" : \"none\"} />\n           </button>\n        )}\n      </div>\n\n      {/* 释义：单行布局，左对齐 */}\n      <div className=\"mb-6 text-left\">\n         <p className=\"text-lg text-gray-800 leading-normal flex flex-wrap items-baseline gap-2\">\n           <span className=\"font-bold\">{data.definitions.zh}</span>\n           <span className=\"text-gray-300 font-light\">|</span>\n           <span className=\"text-gray-600 font-medium font-serif italic\">{data.definitions.en}</span>\n         </p>\n      </div>\n\n      {/* 交互式例句 */}\n      <div className=\"space-y-3\">\n        <div onClick={() => { handleSpeak(data.examplePhrase.fr); setShowPhraseDetails(!showPhraseDetails); }} className=\"bg-blue-50/50 rounded-xl border border-blue-100 overflow-hidden cursor-pointer hover:bg-blue-50 transition-colors\">\n          <div className=\"p-4 flex justify-between items-start gap-3\">\n             <div>\n               <div className=\"flex items-center gap-2 mb-1\">\n                  <span className=\"text-[10px] font-bold text-blue-400 uppercase tracking-widest\">Exemple</span>\n                  <Mic size={12} className=\"text-blue-400\" />\n               </div>\n               <p className=\"text-xl text-gray-800 font-serif italic leading-snug\">\"{data.examplePhrase.fr}\"</p>\n             </div>\n             <ChevronDown size={18} className={`text-blue-300 mt-2 transition-transform ${showPhraseDetails ? 'rotate-180' : ''}`} />\n          </div>\n          {/* 减小了间距 pt-0 */}\n          {showPhraseDetails && (\n            <div className=\"px-4 pb-4 pt-0 space-y-1.5 animate-in slide-in-from-top-2\">\n               <p className=\"text-sm text-gray-600\">{data.examplePhrase.zh}</p>\n               <p className=\"text-sm text-gray-500\">{data.examplePhrase.en}</p>\n               {data.examplePhrase.explanation && (\n                 <div className=\"mt-2 text-xs text-blue-500 bg-blue-100/50 p-2 rounded-lg\">💡 {data.examplePhrase.explanation}</div>\n               )}\n            </div>\n          )}\n        </div>\n\n        {/* 相关短语 */}\n        {data.relatedPhrases && data.relatedPhrases.length > 0 && (\n          <div className=\"pl-2 pt-2\">\n            <h4 className=\"text-xs font-bold text-gray-400 uppercase mb-2 tracking-wider\">常用短语</h4>\n            <div className=\"space-y-1.5\">\n              {data.relatedPhrases.slice(0, showAllPhrases ? undefined : 2).map((phrase, idx) => (\n                 <div key={idx} className=\"flex justify-between items-center group py-1 border-b border-gray-50 last:border-0\">\n                    <span className=\"text-gray-700 font-medium cursor-pointer hover:text-blue-600\" onClick={() => handleSpeak(phrase.fr)}>{phrase.fr}</span>\n                    <span className=\"text-sm text-gray-400\">{phrase.zh}</span>\n                 </div>\n              ))}\n            </div>\n            {data.relatedPhrases.length > 2 && (\n              <button onClick={() => setShowAllPhrases(!showAllPhrases)} className=\"text-xs text-blue-500 font-medium mt-2 hover:underline flex items-center gap-1\">\n                {showAllPhrases ? \"收起\" : `查看更多 (${data.relatedPhrases.length - 2})`}\n              </button>\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* 底部相关词 */}\n      {data.relatedWords && data.relatedWords.length > 0 && (\n        <div className=\"pt-6 mt-6 border-t border-gray-100\">\n           <div className=\"flex overflow-x-auto pb-4 gap-3 no-scrollbar\">\n              {data.relatedWords.map((word, idx) => (\n                <button key={idx} onClick={() => handleSearch(null, word)} className=\"flex-shrink-0 flex flex-col items-center w-20 group\">\n                  <div className=\"w-16 h-16 rounded-xl overflow-hidden mb-2 bg-gray-100 border border-gray-200 group-hover:border-blue-300 transition-all\">\n                     <img src={getImageUrl(word, 'small')} className=\"w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all\" />\n                  </div>\n                  <span className=\"text-xs text-gray-500 group-hover:text-blue-600 truncate w-full text-center\">{word}</span>\n                </button>\n              ))}\n           </div>\n        </div>\n      )}\n    </div>\n  </div>\n  );\n};\n\nconst ChatView = ({ messages, chatInput, setChatInput, handleSendChat, startListening, isRecording, chatEndRef, toggleTranslation }) => (\n  <div className=\"flex flex-col h-full\">\n    {/* 消息列表 - 增加 pb-32 为底部输入框留出足够空间 */}\n    <div className=\"flex-1 overflow-y-auto p-4 space-y-4 pb-32\">\n      {messages.map((msg, idx) => (\n        <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>\n          <div className={`max-w-[85%] p-4 rounded-2xl ${\n            msg.role === 'user' \n              ? 'bg-blue-600 text-white rounded-br-none' \n              : 'bg-white border border-gray-100 text-gray-800 rounded-bl-none shadow-sm'\n          }`}>\n            <p className=\"text-base leading-relaxed\">{msg.text}</p>\n            \n            {/* 翻译区域 */}\n            {msg.role === 'ai' && !msg.isLoading && msg.translation && (\n              <div className=\"mt-2 pt-2 border-t border-gray-100\">\n                {msg.showTranslation ? (\n                   <p className=\"text-sm text-gray-500 animate-in fade-in\">{msg.translation}</p>\n                ) : (\n                   <button \n                     onClick={() => toggleTranslation(idx)} \n                     className=\"text-xs text-blue-400 font-medium flex items-center gap-1 hover:text-blue-600\"\n                   >\n                     <Globe size={12} /> 显示翻译\n                   </button>\n                )}\n              </div>\n            )}\n\n            {/* 发音按钮 */}\n            {msg.role === 'ai' && !msg.isLoading && (\n               <div className=\"mt-2 flex justify-end\">\n                 <button onClick={() => handleSpeak(msg.text)} className=\"text-blue-300 hover:text-blue-600 p-1\"><Volume2 size={16} /></button>\n               </div>\n            )}\n          </div>\n        </div>\n      ))}\n      <div ref={chatEndRef} />\n    </div>\n    \n    {/* 输入框区域 - 使用 sticky bottom-0 配合 margin 确保位置合适且贴合底部导航上方 */}\n    <div className=\"p-4 bg-white border-t border-gray-100 sticky bottom-0 z-20\">\n      <div className=\"flex items-center gap-2 bg-gray-50 p-2 rounded-full border border-gray-200 focus-within:ring-2 focus-within:ring-blue-100 transition-all shadow-sm\">\n        <input \n          type=\"text\" \n          value={chatInput} \n          onChange={e => setChatInput(e.target.value)} \n          placeholder=\"说点法语...\" \n          className=\"flex-1 bg-transparent border-none focus:ring-0 px-4 py-2 text-gray-800 placeholder-gray-400\"\n          onKeyDown={e => e.key === 'Enter' && handleSendChat()}\n        />\n        <button \n          onClick={startListening} \n          className={`p-2 rounded-full transition-colors ${isRecording ? 'bg-red-500 text-white animate-pulse' : 'text-gray-400 hover:text-blue-600'}`}\n        >\n          <Mic size={20} />\n        </button>\n        <button \n          onClick={handleSendChat} \n          className=\"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors shadow-md disabled:opacity-50\"\n          disabled={!chatInput.trim()}\n        >\n          <Send size={18} />\n        </button>\n      </div>\n    </div>\n  </div>\n);\n\n// 极简风格浮动单词 (Minimalist)\nconst FloatingWords = ({ onWordClick }) => {\n  // 每天随机展示6个单词 (模拟)\n  const wordsPool = [\n    'Amour', 'Rêve', 'Étoile', 'Lumière', 'Voyage', 'Océan', 'Espoir', \n    'Soleil', 'Lune', 'Nuage', 'Montagne', 'Rivière', 'Forêt', 'Fleur'\n  ];\n  \n  const [displayWords, setDisplayWords] = useState([]);\n\n  useEffect(() => {\n    // 简单的随机混洗取前6个\n    const shuffled = [...wordsPool].sort(() => 0.5 - Math.random());\n    setDisplayWords(shuffled.slice(0, 6));\n  }, []);\n\n  return (\n    <div className=\"mb-10 px-2\">\n      <div className=\"flex items-center gap-2 mb-4 px-2\">\n        <Sparkles size={16} className=\"text-yellow-500\" />\n        <h3 className=\"text-sm font-bold text-gray-400 uppercase tracking-wider\">每日灵感</h3>\n      </div>\n      \n      <div className=\"grid grid-cols-2 gap-3\">\n        {displayWords.map((word, i) => (\n          <button\n            key={i}\n            onClick={() => onWordClick(word)}\n            className=\"group relative h-24 bg-white rounded-2xl border border-gray-100 shadow-sm hover:shadow-md hover:border-blue-200 transition-all duration-300 flex flex-col items-center justify-center overflow-hidden\"\n          >\n             <div className=\"absolute top-0 right-0 p-2 opacity-10 group-hover:opacity-20 transition-opacity\">\n                <Layers size={40} className=\"text-blue-600\" />\n             </div>\n             <span className=\"text-lg font-medium text-gray-800 group-hover:text-blue-600 transition-colors z-10\">{word}</span>\n             <span className=\"text-xs text-gray-400 mt-1 z-10 opacity-0 group-hover:opacity-100 transition-opacity transform translate-y-2 group-hover:translate-y-0\">点击探索</span>\n          </button>\n        ))}\n      </div>\n    </div>\n  );\n};\n\nexport default function App() {\n  const [user, setUser] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [currentWordData, setCurrentWordData] = useState(null);\n  \n  // 缓存机制\n  const [wordCache, setWordCache] = useState({}); \n  const [albumData, setAlbumData] = useState(null);\n  const [albumCache, setAlbumCache] = useState({}); \n\n  // 收藏相关\n  const [favorites, setFavorites] = useState([]);\n  const [favoriteAlbums, setFavoriteAlbums] = useState([]);\n\n  // 聊天相关\n  const [messages, setMessages] = useState([{ \n    role: 'ai', \n    text: 'Bonjour! Je suis ton prof de français.', \n    translation: 'Hello! I am your French teacher.',\n    showTranslation: false\n  }]);\n  const [chatInput, setChatInput] = useState('');\n  const [isRecording, setIsRecording] = useState(false);\n  const chatEndRef = useRef(null);\n\n  const [activeTab, setActiveTab] = useState('search'); \n\n  useEffect(() => {\n    signInAnonymously(auth).catch(console.error);\n    const unsubscribe = onAuthStateChanged(auth, setUser);\n    return () => unsubscribe();\n  }, []);\n\n  // Sync Logic (Favorites)\n  useEffect(() => {\n    if (!user) return;\n    const q = query(collection(db, 'artifacts', appId, 'users', user.uid, 'favorites'));\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const favs = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      favs.sort((a, b) => (b.timestamp?.seconds || 0) - (a.timestamp?.seconds || 0));\n      setFavorites(favs);\n    });\n    return () => unsubscribe();\n  }, [user]);\n\n  useEffect(() => {\n    if (!user) return;\n    const q = query(collection(db, 'artifacts', appId, 'users', user.uid, 'favoriteAlbums'));\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const favs = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      setFavoriteAlbums(favs);\n    });\n    return () => unsubscribe();\n  }, [user]);\n\n  // Scroll Chat\n  useEffect(() => {\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages, activeTab]);\n\n  // --- Handlers ---\n  const handleSearch = async (e, wordOverride = null) => {\n    if (e) e.preventDefault();\n    const term = wordOverride || searchTerm;\n    const cleanTerm = term.trim().toLowerCase();\n    if (!cleanTerm) return;\n    \n    setLoading(true);\n    setCurrentWordData(null);\n    setAlbumData(null);\n    setActiveTab('search');\n    setSearchTerm(term); // Sync input box\n\n    if (wordCache[cleanTerm]) {\n      setCurrentWordData(wordCache[cleanTerm]);\n      setLoading(false);\n      return;\n    }\n    \n    try {\n      const data = await fetchWordData(term);\n      setCurrentWordData(data);\n      setWordCache(prev => ({ ...prev, [cleanTerm]: data, [data.word.toLowerCase()]: data })); \n    } catch (err) { alert(\"Error fetching word. Try again.\"); } \n    finally { setLoading(false); }\n  };\n\n  const handleAlbumClick = async (category) => {\n    setActiveTab('album');\n    if (albumCache[category]) {\n      setAlbumData(albumCache[category]);\n      return;\n    }\n    setLoading(true);\n    setAlbumData(null);\n    try {\n      const data = await fetchAlbumData(category);\n      setAlbumData(data);\n      setAlbumCache(prev => ({ ...prev, [category]: data }));\n    } catch (err) { console.error(err); alert(\"Failed to load album.\"); setActiveTab('search'); }\n    finally { setLoading(false); }\n  };\n\n  const toggleFavoriteWord = async (wordData) => {\n    if (!user) return;\n    const existing = favorites.find(f => f.word === wordData.word);\n    try {\n      if (existing) {\n        await deleteDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'favorites', existing.id));\n      } else {\n        await addDoc(collection(db, 'artifacts', appId, 'users', user.uid, 'favorites'), { ...wordData, timestamp: serverTimestamp() });\n      }\n    } catch (e) { console.error(\"Fav Error\", e); }\n  };\n\n  const toggleFavoriteAlbum = async (albumData) => {\n    if (!user || !albumData) return;\n    const existing = favoriteAlbums.find(f => f.category === albumData.category);\n    try {\n      if (existing) {\n        await deleteDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'favoriteAlbums', existing.id));\n      } else {\n        await addDoc(collection(db, 'artifacts', appId, 'users', user.uid, 'favoriteAlbums'), { ...albumData, timestamp: serverTimestamp() });\n      }\n    } catch (e) { console.error(\"Album Fav Error\", e); }\n  };\n\n  const handleSendChat = async () => {\n    if (!chatInput.trim()) return;\n    const userMsg = { role: 'user', text: chatInput };\n    setMessages(prev => [...prev, userMsg]);\n    setChatInput('');\n    setMessages(prev => [...prev, { role: 'ai', text: '...', isLoading: true }]);\n    try {\n      const rawResponse = await fetchChatResponse(messages.map(m => ({role: m.role, content: m.text})), userMsg.text);\n      \n      // 分离翻译\n      const parts = rawResponse.split('|||');\n      const frText = parts[0].trim();\n      const enText = parts[1] ? parts[1].trim() : \"\";\n\n      setMessages(prev => {\n        const newMsgs = prev.filter(m => !m.isLoading);\n        return [...newMsgs, { \n          role: 'ai', \n          text: frText, \n          translation: enText,\n          showTranslation: false \n        }];\n      });\n      handleSpeak(frText);\n    } catch (e) {\n      setMessages(prev => prev.filter(m => !m.isLoading));\n    }\n  };\n\n  const toggleTranslation = (idx) => {\n    setMessages(prev => prev.map((msg, i) => \n      i === idx ? { ...msg, showTranslation: !msg.showTranslation } : msg\n    ));\n  };\n\n  const startListening = () => {\n    if (!('webkitSpeechRecognition' in window)) {\n      alert(\"此浏览器不支持语音输入，请使用 Chrome。\");\n      return;\n    }\n    const recognition = new window.webkitSpeechRecognition();\n    recognition.lang = 'fr-FR';\n    recognition.continuous = false;\n    recognition.interimResults = false;\n    recognition.onstart = () => setIsRecording(true);\n    recognition.onend = () => setIsRecording(false);\n    recognition.onresult = (event) => {\n      const transcript = event.results[0][0].transcript;\n      setChatInput(transcript);\n    };\n    recognition.start();\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 font-sans text-gray-900 pb-20\">\n      {/* 顶部标题栏 (固定) */}\n      <div className=\"bg-white/90 backdrop-blur-md border-b border-gray-100 sticky top-0 z-30\">\n        <div className=\"max-w-xl mx-auto px-6 py-4 flex justify-between items-center\">\n          <h1 onClick={() => setActiveTab('search')} className=\"text-xl font-bold text-gray-900 flex items-center gap-2 tracking-tight cursor-pointer\">\n            <BookOpen size={22} className=\"text-blue-600\" />\n            FrenchMemo\n          </h1>\n          <div className=\"text-xs text-gray-400 font-medium font-mono\">\n             {user ? `UID: ${user.uid.slice(0,4)}` : 'Connecting...'}\n          </div>\n        </div>\n      </div>\n\n      <div className=\"max-w-xl mx-auto px-6 py-8 h-full\">\n        \n        {activeTab === 'chat' && (\n          <ChatView \n            messages={messages} \n            chatInput={chatInput} \n            setChatInput={setChatInput} \n            handleSendChat={handleSendChat} \n            startListening={startListening} \n            isRecording={isRecording} \n            chatEndRef={chatEndRef}\n            toggleTranslation={toggleTranslation}\n          />\n        )}\n\n        {activeTab === 'album' && loading && (\n           <div className=\"text-center py-20 flex flex-col items-center\">\n             <Loader2 className=\"animate-spin text-blue-600 mb-4\" size={32} />\n             <p className=\"text-gray-500\">正在生成专辑...</p>\n           </div>\n        )}\n        \n        {activeTab === 'album' && !loading && albumData && (\n          <AlbumView \n            data={albumData} \n            handleSearch={handleSearch} \n            favoriteAlbums={favoriteAlbums} \n            toggleFavoriteAlbum={toggleFavoriteAlbum} \n            setActiveTab={setActiveTab} \n          />\n        )}\n\n        {activeTab === 'search' && (\n          <>\n            <form onSubmit={handleSearch} className=\"relative mb-8 group z-10\">\n              <div className={`absolute inset-0 bg-blue-500/5 rounded-full blur-xl transition-opacity duration-300 ${loading ? 'opacity-100' : 'opacity-0 group-hover:opacity-100'}`}></div>\n              <input type=\"text\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} placeholder=\"输入中/英/法文...\" className=\"w-full pl-14 pr-14 py-4 bg-white border-0 rounded-full shadow-[0_8px_30px_rgb(0,0,0,0.06)] text-xl font-medium placeholder:text-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all relative z-10\" />\n              <Search className=\"absolute left-5 top-1/2 -translate-y-1/2 text-gray-400 z-20\" size={22} />\n              <button type=\"submit\" disabled={loading} className=\"absolute right-3 top-1/2 -translate-y-1/2 p-2.5 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors disabled:opacity-70 hover:scale-105 active:scale-95 z-20 shadow-md\">\n                {loading ? <Loader2 className=\"animate-spin\" size={20} /> : <ArrowRight size={20} />}\n              </button>\n            </form>\n\n            {/* 首页浮动单词（极简版） */}\n            {!currentWordData && !loading && (\n               <FloatingWords onWordClick={(word) => handleSearch(null, word)} />\n            )}\n\n            {currentWordData && (\n              <WordCard \n                data={currentWordData} \n                toggleFavoriteWord={toggleFavoriteWord} \n                favorites={favorites} \n                handleAlbumClick={handleAlbumClick} \n                handleSearch={handleSearch} \n              />\n            )}\n          </>\n        )}\n\n        {activeTab === 'favorites' && (\n          <div className=\"space-y-8 pb-20\">\n            {favoriteAlbums.length > 0 && (\n              <div className=\"mb-8\">\n                <h3 className=\"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4\">收藏的专辑</h3>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  {favoriteAlbums.map(album => (\n                    <button key={album.id} onClick={() => handleAlbumClick(album.category)} className=\"bg-white p-4 rounded-xl border border-gray-100 shadow-sm text-left hover:border-blue-200 transition-all\">\n                      <div className=\"flex justify-between items-start\">\n                         <span className=\"font-bold text-gray-800\">{album.category}</span>\n                         <Layers size={16} className=\"text-blue-500\" />\n                      </div>\n                      <span className=\"text-xs text-gray-400 mt-2 block\">{album.items.length} words</span>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            <h3 className=\"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4\">收藏的单词</h3>\n            {favorites.length === 0 ? (\n              <div className=\"text-center py-10\"><p className=\"text-gray-500 font-medium\">暂无收藏单词</p></div>\n            ) : (\n              favorites.map(fav => (\n                <WordCard \n                  key={fav.id} \n                  data={fav} \n                  toggleFavoriteWord={() => toggleFavoriteWord(fav)} \n                  favorites={favorites} \n                  onDelete={() => toggleFavoriteWord(fav)} \n                  handleAlbumClick={handleAlbumClick}\n                  handleSearch={handleSearch}\n                />\n              ))\n            )}\n          </div>\n        )}\n      </div>\n\n      {/* 底部导航栏 (固定) */}\n      <div className=\"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-100 z-40 pb-safe\">\n        <div className=\"flex max-w-xl mx-auto\">\n          <button \n            onClick={() => setActiveTab('search')} \n            className={`flex-1 py-3 flex flex-col items-center gap-1 transition-colors ${activeTab === 'search' ? 'text-blue-600' : 'text-gray-400 hover:text-gray-600'}`}\n          >\n            <Search size={22} />\n            <span className=\"text-[10px] font-medium\">探索</span>\n          </button>\n          \n          <button \n            onClick={() => setActiveTab('chat')} \n            className={`flex-1 py-3 flex flex-col items-center gap-1 transition-colors ${activeTab === 'chat' ? 'text-blue-600' : 'text-gray-400 hover:text-gray-600'}`}\n          >\n            <MessageCircle size={22} />\n            <span className=\"text-[10px] font-medium\">AI对话</span>\n          </button>\n          \n          <button \n            onClick={() => setActiveTab('favorites')} \n            className={`flex-1 py-3 flex flex-col items-center gap-1 transition-colors ${activeTab === 'favorites' ? 'text-blue-600' : 'text-gray-400 hover:text-gray-600'}`}\n          >\n            <Star size={22} />\n            <span className=\"text-[10px] font-medium\">收藏</span>\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}