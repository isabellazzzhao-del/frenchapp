{"ast":null,"code":"var _jsxFileName = \"/Users/zhaolu/Documents/Code/frenchapp/src/App.js\",\n  _s2 = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Search, Volume2, Star, BookOpen, ArrowRight, Loader2, Layers, X, ChevronDown, ChevronUp, Info, Mic, MessageCircle, Send, Heart, PlayCircle } from 'lucide-react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInAnonymously, onAuthStateChanged } from 'firebase/auth';\nimport { getFirestore, collection, addDoc, query, onSnapshot, deleteDoc, doc, serverTimestamp, where, getDocs } from 'firebase/firestore';\n\n// ==========================================\n// ⚠️ 请在下方填入您的配置信息\n// ==========================================\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCBItd52zWdktiEuHmQIXbB4Q7sLM5602o\",\n  authDomain: \"frenchapp-6b44a.firebaseapp.com\",\n  projectId: \"frenchapp-6b44a\",\n  storageBucket: \"frenchapp-6b44a.firebasestorage.app\",\n  messagingSenderId: \"988616724582\",\n  appId: \"1:988616724582:web:723f9d9c75f8810b019da7\"\n};\nconst GEMINI_API_KEY = \"AIzaSyBivevjn0wQ3dD2OCuh98L2iALBssZfsq4\";\n\n// ==========================================\n\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst appId = \"french-memo-app\";\n\n// --- API Helper for Gemini ---\n\n// 1. 获取单个单词详情 (支持多语言输入)\nconst fetchWordData = async input => {\n  var _data$candidates, _data$candidates$, _data$candidates$$con, _data$candidates$$con2, _data$candidates$$con3;\n  const apiKey = GEMINI_API_KEY;\n  if (!apiKey || apiKey.includes(\"YOUR_GEMINI_API_KEY\")) throw new Error(\"API Key not set\");\n  const prompt = `\n    User input: \"${input}\".\n    Task: \n    1. Detect the language of the input (French, English, or Chinese).\n    2. If input is NOT French, translate it to the most common French word.\n    3. Analyze this French word.\n    \n    Return strictly valid JSON (no markdown) with this schema:\n    {\n      \"word\": \"The French word (e.g., 'Pomme')\",\n      \"definitions\": {\n        \"en\": \"Concise English meaning\",\n        \"zh\": \"简洁中文释义\"\n      },\n      \"partOfSpeech\": \"abbrev. (e.g. n.m., adj.)\",\n      \"collection\": \"Category Name (e.g. Fruits, Voyage)\",\n      \"relatedWords\": [\"synonym1\", \"antonym1\", \"related1\"],\n      \"relatedPhrases\": [\n        {\"fr\": \"Phrase 1\", \"zh\": \"Meaning 1\"},\n        {\"fr\": \"Phrase 2\", \"zh\": \"Meaning 2\"}\n      ],\n      \"examplePhrase\": {\n        \"fr\": \"Simple French sentence\",\n        \"en\": \"English translation\",\n        \"zh\": \"Chinese translation\",\n        \"explanation\": \"Brief grammar/cultural note\"\n      }\n    }\n  `;\n  const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      contents: [{\n        parts: [{\n          text: prompt\n        }]\n      }]\n    })\n  });\n  const data = await response.json();\n  const text = (_data$candidates = data.candidates) === null || _data$candidates === void 0 ? void 0 : (_data$candidates$ = _data$candidates[0]) === null || _data$candidates$ === void 0 ? void 0 : (_data$candidates$$con = _data$candidates$.content) === null || _data$candidates$$con === void 0 ? void 0 : (_data$candidates$$con2 = _data$candidates$$con.parts) === null || _data$candidates$$con2 === void 0 ? void 0 : (_data$candidates$$con3 = _data$candidates$$con2[0]) === null || _data$candidates$$con3 === void 0 ? void 0 : _data$candidates$$con3.text;\n  return text ? JSON.parse(text) : null;\n};\n\n// 2. 获取专辑列表详情 (Prompt优化以提升速度)\nconst fetchAlbumData = async category => {\n  var _data$candidates2, _data$candidates2$, _data$candidates2$$co, _data$candidates2$$co2, _data$candidates2$$co3;\n  const apiKey = GEMINI_API_KEY;\n  // 简化 Prompt，减少 Token 输出，提升速度\n  const prompt = `\n    List 8 common French vocabulary items for category: \"${category}\".\n    Return valid JSON:\n    {\n      \"category\": \"${category}\",\n      \"items\": [\n        { \"word\": \"FrenchWord\", \"article\": \"le/la/un\", \"zh\": \"Chinese\", \"isVisual\": true/false }\n      ]\n    }\n  `;\n  const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      contents: [{\n        parts: [{\n          text: prompt\n        }]\n      }]\n    })\n  });\n  const data = await response.json();\n  const text = (_data$candidates2 = data.candidates) === null || _data$candidates2 === void 0 ? void 0 : (_data$candidates2$ = _data$candidates2[0]) === null || _data$candidates2$ === void 0 ? void 0 : (_data$candidates2$$co = _data$candidates2$.content) === null || _data$candidates2$$co === void 0 ? void 0 : (_data$candidates2$$co2 = _data$candidates2$$co.parts) === null || _data$candidates2$$co2 === void 0 ? void 0 : (_data$candidates2$$co3 = _data$candidates2$$co2[0]) === null || _data$candidates2$$co3 === void 0 ? void 0 : _data$candidates2$$co3.text;\n  return text ? JSON.parse(text) : null;\n};\n\n// 3. 聊天 API\nconst fetchChatResponse = async (history, message) => {\n  var _data$candidates3, _data$candidates3$, _data$candidates3$$co, _data$candidates3$$co2, _data$candidates3$$co3;\n  const apiKey = GEMINI_API_KEY;\n  const prompt = `\n    You are a friendly French language tutor. \n    User message: \"${message}\".\n    Conversation history: ${JSON.stringify(history)}.\n    Reply in French, followed by a very brief English translation in parentheses. Keep it conversational and helpful.\n  `;\n  const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`, {\n    method: 'POST',\n    headers: {\n      'Content-Type': 'application/json'\n    },\n    body: JSON.stringify({\n      contents: [{\n        parts: [{\n          text: prompt\n        }]\n      }]\n    })\n  });\n  const data = await response.json();\n  return ((_data$candidates3 = data.candidates) === null || _data$candidates3 === void 0 ? void 0 : (_data$candidates3$ = _data$candidates3[0]) === null || _data$candidates3$ === void 0 ? void 0 : (_data$candidates3$$co = _data$candidates3$.content) === null || _data$candidates3$$co === void 0 ? void 0 : (_data$candidates3$$co2 = _data$candidates3$$co.parts) === null || _data$candidates3$$co2 === void 0 ? void 0 : (_data$candidates3$$co3 = _data$candidates3$$co2[0]) === null || _data$candidates3$$co3 === void 0 ? void 0 : _data$candidates3$$co3.text) || \"Désolé, je ne comprends pas.\";\n};\nexport default function App() {\n  _s2();\n  var _s = $RefreshSig$();\n  const [user, setUser] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [currentWordData, setCurrentWordData] = useState(null);\n\n  // 专辑相关\n  const [albumData, setAlbumData] = useState(null);\n  const [albumCache, setAlbumCache] = useState({}); // 缓存专辑数据优化速度\n\n  // 收藏相关\n  const [favorites, setFavorites] = useState([]);\n  const [favoriteAlbums, setFavoriteAlbums] = useState([]);\n\n  // 聊天相关\n  const [messages, setMessages] = useState([{\n    role: 'ai',\n    text: 'Bonjour! Je suis ton prof de français. On discute? (你好！我是你的法语老师，我们聊聊？)'\n  }]);\n  const [chatInput, setChatInput] = useState('');\n  const [isRecording, setIsRecording] = useState(false);\n  const chatEndRef = useRef(null);\n  const [activeTab, setActiveTab] = useState('search'); // 'search', 'favorites', 'album', 'chat'\n\n  const getImageUrl = (keyword, size = 'medium') => {\n    const dimensions = size === 'small' ? 'width=200&height=200' : 'width=600&height=400';\n    // 增加随机数防止缓存导致图片不变\n    return `https://image.pollinations.ai/prompt/realistic%20${keyword}%20french%20context?${dimensions}&nologo=true&seed=${Math.random()}`;\n  };\n  useEffect(() => {\n    signInAnonymously(auth).catch(console.error);\n    const unsubscribe = onAuthStateChanged(auth, setUser);\n    return () => unsubscribe();\n  }, []);\n\n  // 同步单词收藏\n  useEffect(() => {\n    if (!user) return;\n    const q = query(collection(db, 'artifacts', appId, 'users', user.uid, 'favorites'));\n    const unsubscribe = onSnapshot(q, snapshot => {\n      const favs = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      favs.sort((a, b) => {\n        var _b$timestamp, _a$timestamp;\n        return (((_b$timestamp = b.timestamp) === null || _b$timestamp === void 0 ? void 0 : _b$timestamp.seconds) || 0) - (((_a$timestamp = a.timestamp) === null || _a$timestamp === void 0 ? void 0 : _a$timestamp.seconds) || 0);\n      });\n      setFavorites(favs);\n    });\n    return () => unsubscribe();\n  }, [user]);\n\n  // 同步专辑收藏\n  useEffect(() => {\n    if (!user) return;\n    const q = query(collection(db, 'artifacts', appId, 'users', user.uid, 'favoriteAlbums'));\n    const unsubscribe = onSnapshot(q, snapshot => {\n      const favs = snapshot.docs.map(doc => ({\n        id: doc.id,\n        ...doc.data()\n      }));\n      setFavoriteAlbums(favs);\n    });\n    return () => unsubscribe();\n  }, [user]);\n\n  // 聊天滚动到底部\n  useEffect(() => {\n    var _chatEndRef$current;\n    (_chatEndRef$current = chatEndRef.current) === null || _chatEndRef$current === void 0 ? void 0 : _chatEndRef$current.scrollIntoView({\n      behavior: 'smooth'\n    });\n  }, [messages, activeTab]);\n\n  // --- Handlers ---\n  const handleSearch = async (e, wordOverride = null) => {\n    if (e) e.preventDefault();\n    const term = wordOverride || searchTerm;\n    if (!term.trim()) return;\n    setLoading(true);\n    setCurrentWordData(null);\n    setAlbumData(null);\n    setActiveTab('search');\n    try {\n      const data = await fetchWordData(term);\n      setCurrentWordData(data);\n    } catch (err) {\n      alert(\"Error fetching word. Try again.\");\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleSpeak = text => {\n    if ('speechSynthesis' in window) {\n      window.speechSynthesis.cancel();\n      const utterance = new SpeechSynthesisUtterance(text);\n      utterance.lang = 'fr-FR';\n      utterance.rate = 0.9;\n      window.speechSynthesis.speak(utterance);\n    }\n  };\n  const handleAlbumClick = async category => {\n    setActiveTab('album');\n\n    // 检查缓存\n    if (albumCache[category]) {\n      setAlbumData(albumCache[category]);\n      return;\n    }\n    setLoading(true);\n    setAlbumData(null);\n    try {\n      const data = await fetchAlbumData(category);\n      setAlbumData(data);\n      // 写入缓存\n      setAlbumCache(prev => ({\n        ...prev,\n        [category]: data\n      }));\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to load album.\");\n      setActiveTab('search');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // --- Favorites Logic ---\n  const toggleFavoriteWord = async wordData => {\n    if (!user) return;\n    // 检查是否已收藏\n    const existing = favorites.find(f => f.word === wordData.word);\n    try {\n      if (existing) {\n        await deleteDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'favorites', existing.id));\n      } else {\n        await addDoc(collection(db, 'artifacts', appId, 'users', user.uid, 'favorites'), {\n          ...wordData,\n          timestamp: serverTimestamp()\n        });\n      }\n    } catch (e) {\n      console.error(\"Fav Error\", e);\n      alert(\"操作失败，请检查网络\");\n    }\n  };\n  const toggleFavoriteAlbum = async albumData => {\n    if (!user || !albumData) return;\n    const existing = favoriteAlbums.find(f => f.category === albumData.category);\n    try {\n      if (existing) {\n        await deleteDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'favoriteAlbums', existing.id));\n      } else {\n        await addDoc(collection(db, 'artifacts', appId, 'users', user.uid, 'favoriteAlbums'), {\n          ...albumData,\n          timestamp: serverTimestamp()\n        });\n      }\n    } catch (e) {\n      console.error(\"Album Fav Error\", e);\n    }\n  };\n\n  // --- Chat Logic ---\n  const handleSendChat = async () => {\n    if (!chatInput.trim()) return;\n    const userMsg = {\n      role: 'user',\n      text: chatInput\n    };\n    setMessages(prev => [...prev, userMsg]);\n    setChatInput('');\n\n    // 简单的加载状态模拟\n    setMessages(prev => [...prev, {\n      role: 'ai',\n      text: '...',\n      isLoading: true\n    }]);\n    try {\n      const responseText = await fetchChatResponse(messages.map(m => ({\n        role: m.role,\n        content: m.text\n      })), userMsg.text);\n      setMessages(prev => {\n        const newMsgs = prev.filter(m => !m.isLoading);\n        return [...newMsgs, {\n          role: 'ai',\n          text: responseText\n        }];\n      });\n      handleSpeak(responseText); // 自动朗读回复\n    } catch (e) {\n      setMessages(prev => prev.filter(m => !m.isLoading));\n    }\n  };\n  const startListening = () => {\n    if (!('webkitSpeechRecognition' in window)) {\n      alert(\"此浏览器不支持语音输入，请使用 Chrome。\");\n      return;\n    }\n    const recognition = new window.webkitSpeechRecognition();\n    recognition.lang = 'fr-FR'; // 默认听法语，也可以设为 'zh-CN'\n    recognition.continuous = false;\n    recognition.interimResults = false;\n    recognition.onstart = () => setIsRecording(true);\n    recognition.onend = () => setIsRecording(false);\n    recognition.onresult = event => {\n      const transcript = event.results[0][0].transcript;\n      setChatInput(transcript);\n    };\n    recognition.start();\n  };\n\n  // --- Components ---\n\n  const AlbumView = ({\n    data\n  }) => {\n    if (!data) return null;\n    const isFav = favoriteAlbums.some(f => f.category === data.category);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center justify-between mb-6\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex items-center gap-3\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => setActiveTab('search'),\n            className: \"p-2 hover:bg-gray-100 rounded-full transition-colors\",\n            children: /*#__PURE__*/_jsxDEV(ArrowRight, {\n              className: \"rotate-180 text-gray-500\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 325,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n            className: \"text-2xl font-bold text-gray-900 flex items-center gap-2\",\n            children: [/*#__PURE__*/_jsxDEV(Layers, {\n              className: \"text-blue-600\",\n              size: 24\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 328,\n              columnNumber: 15\n            }, this), data.category]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 327,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => toggleFavoriteAlbum(data),\n          className: `p-3 rounded-full transition-colors ${isFav ? 'bg-red-50 text-red-500' : 'bg-gray-50 text-gray-400 hover:text-red-400'}`,\n          children: /*#__PURE__*/_jsxDEV(Heart, {\n            size: 24,\n            fill: isFav ? \"currentColor\" : \"none\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 336,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 332,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"grid grid-cols-2 gap-4\",\n        children: data.items.map((item, idx) => {\n          if (item.isVisual) {\n            return /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleSearch(null, item.word),\n              className: \"group relative flex flex-col items-center bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-lg transition-all border border-gray-100 text-left\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-full aspect-[4/3] bg-gray-50 relative overflow-hidden\",\n                children: [/*#__PURE__*/_jsxDEV(\"img\", {\n                  src: getImageUrl(item.word, 'small'),\n                  alt: item.word,\n                  className: \"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 350,\n                  columnNumber: 21\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-3 pt-8\",\n                  children: /*#__PURE__*/_jsxDEV(\"p\", {\n                    className: \"text-white font-medium text-lg\",\n                    children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                      className: \"opacity-70 text-sm mr-1 font-normal\",\n                      children: item.article\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 357,\n                      columnNumber: 26\n                    }, this), item.word]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 356,\n                    columnNumber: 24\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 355,\n                  columnNumber: 21\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 349,\n                columnNumber: 19\n              }, this)\n            }, idx, false, {\n              fileName: _jsxFileName,\n              lineNumber: 344,\n              columnNumber: 17\n            }, this);\n          } else {\n            return /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleSearch(null, item.word),\n              className: \"col-span-2 flex items-center justify-between p-4 bg-white rounded-xl shadow-sm hover:shadow-md border border-gray-100 hover:border-blue-200 transition-all group\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-lg font-bold text-gray-800 group-hover:text-blue-600 transition-colors\",\n                  children: item.word\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 372,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 371,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-sm text-gray-500 font-medium\",\n                children: item.zh\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 374,\n                columnNumber: 19\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 366,\n              columnNumber: 17\n            }, this);\n          }\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 340,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 7\n    }, this);\n  };\n  const WordCard = ({\n    data,\n    onDelete\n  }) => {\n    _s();\n    const [showPhraseDetails, setShowPhraseDetails] = useState(false);\n    const [showAllPhrases, setShowAllPhrases] = useState(false);\n    const isFav = favorites.some(f => f.word === data.word);\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white rounded-[2rem] shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 mb-8\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"h-56 overflow-hidden bg-gray-50 relative\",\n        children: /*#__PURE__*/_jsxDEV(\"img\", {\n          src: getImageUrl(data.word),\n          alt: data.word,\n          className: \"w-full h-full object-cover\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 391,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex gap-2 px-8 pt-4 bg-white\",\n        children: [/*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"bg-blue-50 px-3 py-1.5 rounded-full text-xs font-bold text-blue-600 uppercase tracking-wider\",\n          children: data.partOfSpeech\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 396,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => handleAlbumClick(data.collection),\n          className: \"bg-gray-100 hover:bg-gray-200 px-3 py-1.5 rounded-full text-xs font-bold text-gray-600 flex items-center gap-1.5 transition-colors cursor-pointer\",\n          children: [/*#__PURE__*/_jsxDEV(Layers, {\n            size: 14\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 11\n          }, this), data.collection]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 399,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 395,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"p-8 pt-2\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-between items-center mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex items-center gap-3\",\n            children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n              className: \"text-4xl font-bold text-gray-900 tracking-tight\",\n              children: data.word\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 411,\n              columnNumber: 13\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: e => {\n                e.stopPropagation();\n                handleSpeak(data.word);\n              },\n              className: \"p-2.5 rounded-full bg-blue-50 text-blue-600 hover:bg-blue-100 transition-colors\",\n              children: /*#__PURE__*/_jsxDEV(Volume2, {\n                size: 20\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 413,\n                columnNumber: 15\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 412,\n              columnNumber: 13\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 410,\n            columnNumber: 11\n          }, this), onDelete ? /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => onDelete(data.id),\n            className: \"p-2.5 rounded-full text-gray-300 hover:text-red-500 hover:bg-red-50 transition-colors\",\n            children: /*#__PURE__*/_jsxDEV(X, {\n              size: 22\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 418,\n              columnNumber: 16\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 14\n          }, this) : /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => toggleFavoriteWord(data),\n            className: `p-2.5 rounded-full transition-colors ${isFav ? 'text-yellow-400 bg-yellow-50' : 'text-gray-300 hover:text-yellow-400 hover:bg-yellow-50'}`,\n            children: /*#__PURE__*/_jsxDEV(Star, {\n              size: 22,\n              fill: isFav ? \"currentColor\" : \"none\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 16\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 14\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-8 space-y-3 bg-gray-50/50 p-4 rounded-xl\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col gap-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs font-bold text-gray-400 uppercase\",\n              children: \"CN\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 430,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xl font-bold text-gray-900 leading-snug\",\n              children: data.definitions.zh\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 431,\n              columnNumber: 14\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 429,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"h-px bg-gray-200 w-full my-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 433,\n            columnNumber: 12\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex flex-col gap-1\",\n            children: [/*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-xs font-bold text-gray-400 uppercase\",\n              children: \"EN\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 435,\n              columnNumber: 14\n            }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n              className: \"text-lg font-medium text-gray-600 leading-snug\",\n              children: data.definitions.en\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 436,\n              columnNumber: 14\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 434,\n            columnNumber: 12\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 428,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"space-y-4\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            onClick: () => {\n              handleSpeak(data.examplePhrase.fr);\n              setShowPhraseDetails(!showPhraseDetails);\n            },\n            className: \"bg-blue-50/50 rounded-xl border border-blue-100 overflow-hidden cursor-pointer hover:bg-blue-50 transition-colors\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"p-4 flex justify-between items-start gap-3\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"flex items-center gap-2 mb-1\",\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    className: \"text-[10px] font-bold text-blue-400 uppercase tracking-widest\",\n                    children: \"Exemple\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 446,\n                    columnNumber: 21\n                  }, this), /*#__PURE__*/_jsxDEV(Mic, {\n                    size: 12,\n                    className: \"text-blue-400\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 447,\n                    columnNumber: 21\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 445,\n                  columnNumber: 18\n                }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                  className: \"text-xl text-gray-800 font-serif italic leading-snug\",\n                  children: [\"\\\"\", data.examplePhrase.fr, \"\\\"\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 449,\n                  columnNumber: 18\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 444,\n                columnNumber: 16\n              }, this), /*#__PURE__*/_jsxDEV(ChevronDown, {\n                size: 18,\n                className: `text-blue-300 mt-2 transition-transform ${showPhraseDetails ? 'rotate-180' : ''}`\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 451,\n                columnNumber: 16\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 443,\n              columnNumber: 13\n            }, this), showPhraseDetails && /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"px-4 pb-4 pt-0 space-y-2 animate-in slide-in-from-top-2\",\n              children: [/*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-600\",\n                children: data.examplePhrase.zh\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 455,\n                columnNumber: 18\n              }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n                className: \"text-sm text-gray-500\",\n                children: data.examplePhrase.en\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 456,\n                columnNumber: 18\n              }, this), data.examplePhrase.explanation && /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"mt-2 text-xs text-blue-500 bg-blue-100/50 p-2 rounded-lg\",\n                children: [\"\\uD83D\\uDCA1 \", data.examplePhrase.explanation]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 458,\n                columnNumber: 20\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 454,\n              columnNumber: 15\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 442,\n            columnNumber: 11\n          }, this), data.relatedPhrases && data.relatedPhrases.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"pl-2\",\n            children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n              className: \"text-xs font-bold text-gray-400 uppercase mb-3 tracking-wider\",\n              children: \"\\u5E38\\u7528\\u77ED\\u8BED\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 467,\n              columnNumber: 15\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"space-y-2\",\n              children: data.relatedPhrases.slice(0, showAllPhrases ? undefined : 2).map((phrase, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-center group py-1 border-b border-gray-50 last:border-0\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-gray-700 font-medium cursor-pointer hover:text-blue-600\",\n                  onClick: () => handleSpeak(phrase.fr),\n                  children: phrase.fr\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 471,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"text-sm text-gray-400\",\n                  children: phrase.zh\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 472,\n                  columnNumber: 23\n                }, this)]\n              }, idx, true, {\n                fileName: _jsxFileName,\n                lineNumber: 470,\n                columnNumber: 20\n              }, this))\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 468,\n              columnNumber: 15\n            }, this), data.relatedPhrases.length > 2 && /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => setShowAllPhrases(!showAllPhrases),\n              className: \"text-xs text-blue-500 font-medium mt-2 hover:underline flex items-center gap-1\",\n              children: showAllPhrases ? \"收起\" : `查看更多 (${data.relatedPhrases.length - 2})`\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 477,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 466,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 441,\n          columnNumber: 9\n        }, this), data.relatedWords && data.relatedWords.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"pt-8 mt-8 border-t border-gray-100\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"flex overflow-x-auto pb-4 gap-3 no-scrollbar\",\n            children: data.relatedWords.map((word, idx) => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleSearch(null, word),\n              className: \"flex-shrink-0 flex flex-col items-center w-20 group\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"w-16 h-16 rounded-xl overflow-hidden mb-2 bg-gray-100 border border-gray-200 group-hover:border-blue-300 transition-all\",\n                children: /*#__PURE__*/_jsxDEV(\"img\", {\n                  src: getImageUrl(word, 'small'),\n                  className: \"w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 492,\n                  columnNumber: 24\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 491,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-gray-500 group-hover:text-blue-600 truncate w-full text-center\",\n                children: word\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 494,\n                columnNumber: 21\n              }, this)]\n            }, idx, true, {\n              fileName: _jsxFileName,\n              lineNumber: 490,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 488,\n            columnNumber: 14\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 390,\n      columnNumber: 5\n    }, this);\n  };\n  _s(WordCard, \"j5lNyFO2DNPlarnGtRR+cOgFvFA=\");\n  const ChatView = () => /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"flex flex-col h-[calc(100vh-140px)]\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-1 overflow-y-auto p-4 space-y-4\",\n      children: [messages.map((msg, idx) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `max-w-[80%] p-4 rounded-2xl ${msg.role === 'user' ? 'bg-blue-600 text-white rounded-br-none' : 'bg-white border border-gray-100 text-gray-800 rounded-bl-none shadow-sm'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-sm leading-relaxed\",\n            children: msg.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 515,\n            columnNumber: 15\n          }, this), msg.role === 'ai' && !msg.isLoading && /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => handleSpeak(msg.text),\n            className: \"mt-2 text-blue-400 hover:text-blue-600\",\n            children: /*#__PURE__*/_jsxDEV(Volume2, {\n              size: 16\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 517,\n              columnNumber: 115\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 517,\n            columnNumber: 18\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 13\n        }, this)\n      }, idx, false, {\n        fileName: _jsxFileName,\n        lineNumber: 509,\n        columnNumber: 11\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: chatEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 522,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"p-4 bg-white border-t border-gray-100\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center gap-2 bg-gray-50 p-2 rounded-full border border-gray-200 focus-within:ring-2 focus-within:ring-blue-100 transition-all\",\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: chatInput,\n          onChange: e => setChatInput(e.target.value),\n          placeholder: \"Type or speak (French)...\",\n          className: \"flex-1 bg-transparent border-none focus:ring-0 px-4 py-2 text-gray-800 placeholder-gray-400\",\n          onKeyDown: e => e.key === 'Enter' && handleSendChat()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 526,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: startListening,\n          className: `p-2 rounded-full transition-colors ${isRecording ? 'bg-red-500 text-white animate-pulse' : 'text-gray-400 hover:text-blue-600'}`,\n          children: /*#__PURE__*/_jsxDEV(Mic, {\n            size: 20\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 538,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 534,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSendChat,\n          className: \"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors shadow-md disabled:opacity-50\",\n          disabled: !chatInput.trim(),\n          children: /*#__PURE__*/_jsxDEV(Send, {\n            size: 18\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 545,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 540,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 525,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 524,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 506,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gray-50 font-sans text-gray-900 pb-24\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white/80 backdrop-blur-md border-b border-gray-100 sticky top-0 z-30\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"max-w-xl mx-auto px-6 py-4 flex justify-between items-center\",\n        children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n          onClick: () => setActiveTab('search'),\n          className: \"text-xl font-bold text-gray-900 flex items-center gap-2 tracking-tight cursor-pointer\",\n          children: [/*#__PURE__*/_jsxDEV(BookOpen, {\n            size: 22,\n            className: \"text-blue-600\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 561,\n            columnNumber: 13\n          }, this), \"FrenchMemo\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-xs text-gray-400 font-medium font-mono\",\n          children: user ? `UID: ${user.uid.slice(0, 4)}` : 'Connecting...'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 564,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 556,\n        columnNumber: 9\n      }, this), activeTab !== 'album' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex max-w-xl mx-auto px-6 overflow-x-auto no-scrollbar\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('search'),\n          className: `flex-1 pb-3 text-sm font-semibold border-b-2 transition-all whitespace-nowrap px-4 ${activeTab === 'search' ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-400 hover:text-gray-600'}`,\n          children: \"Search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 572,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('chat'),\n          className: `flex-1 pb-3 text-sm font-semibold border-b-2 transition-all whitespace-nowrap px-4 ${activeTab === 'chat' ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-400 hover:text-gray-600'}`,\n          children: \"Chat AI\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 573,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setActiveTab('favorites'),\n          className: `flex-1 pb-3 text-sm font-semibold border-b-2 transition-all whitespace-nowrap px-4 ${activeTab === 'favorites' ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-400 hover:text-gray-600'}`,\n          children: [\"Favs (\", favorites.length, \")\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 574,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 571,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 555,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"max-w-xl mx-auto px-6 py-8\",\n      children: [activeTab === 'chat' && /*#__PURE__*/_jsxDEV(ChatView, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 582,\n        columnNumber: 34\n      }, this), activeTab === 'album' && loading && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"text-center py-20 flex flex-col items-center\",\n        children: [/*#__PURE__*/_jsxDEV(Loader2, {\n          className: \"animate-spin text-blue-600 mb-4\",\n          size: 32\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 587,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: \"text-gray-500\",\n          children: \"\\u6B63\\u5728\\u751F\\u6210\\u4E13\\u8F91...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 588,\n          columnNumber: 14\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 586,\n        columnNumber: 12\n      }, this), activeTab === 'album' && !loading && albumData && /*#__PURE__*/_jsxDEV(AlbumView, {\n        data: albumData\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 592,\n        columnNumber: 60\n      }, this), activeTab === 'search' && /*#__PURE__*/_jsxDEV(_Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(\"form\", {\n          onSubmit: handleSearch,\n          className: \"relative mb-10 group z-10\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `absolute inset-0 bg-blue-500/5 rounded-full blur-xl transition-opacity duration-300 ${loading ? 'opacity-100' : 'opacity-0 group-hover:opacity-100'}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 598,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            value: searchTerm,\n            onChange: e => setSearchTerm(e.target.value),\n            placeholder: \"\\u8F93\\u5165\\u4E2D/\\u82F1/\\u6CD5\\u6587...\",\n            className: \"w-full pl-14 pr-14 py-4 bg-white border-0 rounded-full shadow-[0_8px_30px_rgb(0,0,0,0.06)] text-xl font-medium placeholder:text-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all relative z-10\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 599,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(Search, {\n            className: \"absolute left-5 top-1/2 -translate-y-1/2 text-gray-400 z-20\",\n            size: 22\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 600,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"submit\",\n            disabled: loading,\n            className: \"absolute right-3 top-1/2 -translate-y-1/2 p-2.5 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors disabled:opacity-70 hover:scale-105 active:scale-95 z-20 shadow-md\",\n            children: loading ? /*#__PURE__*/_jsxDEV(Loader2, {\n              className: \"animate-spin\",\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 602,\n              columnNumber: 28\n            }, this) : /*#__PURE__*/_jsxDEV(ArrowRight, {\n              size: 20\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 602,\n              columnNumber: 77\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 601,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 597,\n          columnNumber: 13\n        }, this), currentWordData && /*#__PURE__*/_jsxDEV(WordCard, {\n          data: currentWordData\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 605,\n          columnNumber: 33\n        }, this), !currentWordData && !loading && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-16\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"bg-white p-6 rounded-full inline-block shadow-sm mb-6\",\n            children: /*#__PURE__*/_jsxDEV(Search, {\n              size: 40,\n              className: \"text-blue-100\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 608,\n              columnNumber: 88\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 608,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-gray-900 font-bold text-lg mb-2\",\n            children: \"Pr\\xEAt \\xE0 apprendre ?\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 609,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500 mb-8\",\n            children: \"\\u652F\\u6301\\u4E2D\\u6587\\u3001\\u82F1\\u8BED\\u6216\\u6CD5\\u8BED\\u8F93\\u5165\\uFF0C\\u81EA\\u52A8\\u7FFB\\u8BD1\\u5E76\\u89E3\\u6790\\u3002\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 610,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 607,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true), activeTab === 'favorites' && /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"space-y-8\",\n        children: [favoriteAlbums.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-8\",\n          children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n            className: \"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4\",\n            children: \"\\u6536\\u85CF\\u7684\\u4E13\\u8F91\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 621,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"grid grid-cols-2 gap-3\",\n            children: favoriteAlbums.map(album => /*#__PURE__*/_jsxDEV(\"button\", {\n              onClick: () => handleAlbumClick(album.category),\n              className: \"bg-white p-4 rounded-xl border border-gray-100 shadow-sm text-left hover:border-blue-200 transition-all\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"flex justify-between items-start\",\n                children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"font-bold text-gray-800\",\n                  children: album.category\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 626,\n                  columnNumber: 26\n                }, this), /*#__PURE__*/_jsxDEV(Layers, {\n                  size: 16,\n                  className: \"text-blue-500\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 627,\n                  columnNumber: 26\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 625,\n                columnNumber: 23\n              }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                className: \"text-xs text-gray-400 mt-2 block\",\n                children: [album.items.length, \" words\"]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 629,\n                columnNumber: 23\n              }, this)]\n            }, album.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 624,\n              columnNumber: 21\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 622,\n            columnNumber: 17\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 620,\n          columnNumber: 15\n        }, this), /*#__PURE__*/_jsxDEV(\"h3\", {\n          className: \"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4\",\n          children: \"\\u6536\\u85CF\\u7684\\u5355\\u8BCD\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 636,\n          columnNumber: 13\n        }, this), favorites.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center py-10\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"text-gray-500 font-medium\",\n            children: \"\\u6682\\u65E0\\u6536\\u85CF\\u5355\\u8BCD\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 638,\n            columnNumber: 50\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 638,\n          columnNumber: 15\n        }, this) : favorites.map(fav => /*#__PURE__*/_jsxDEV(WordCard, {\n          data: fav,\n          onDelete: toggleFavoriteWord\n        }, fav.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 640,\n          columnNumber: 36\n        }, this))]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 618,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 579,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 553,\n    columnNumber: 5\n  }, this);\n}\n_s2(App, \"wJj3NMM2Cn1IpWNCX3I9+ipXTR4=\");\n_c = App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","Search","Volume2","Star","BookOpen","ArrowRight","Loader2","Layers","X","ChevronDown","ChevronUp","Info","Mic","MessageCircle","Send","Heart","PlayCircle","initializeApp","getAuth","signInAnonymously","onAuthStateChanged","getFirestore","collection","addDoc","query","onSnapshot","deleteDoc","doc","serverTimestamp","where","getDocs","jsxDEV","_jsxDEV","Fragment","_Fragment","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","GEMINI_API_KEY","app","auth","db","fetchWordData","input","_data$candidates","_data$candidates$","_data$candidates$$con","_data$candidates$$con2","_data$candidates$$con3","includes","Error","prompt","response","fetch","method","headers","body","JSON","stringify","contents","parts","text","data","json","candidates","content","parse","fetchAlbumData","category","_data$candidates2","_data$candidates2$","_data$candidates2$$co","_data$candidates2$$co2","_data$candidates2$$co3","fetchChatResponse","history","message","_data$candidates3","_data$candidates3$","_data$candidates3$$co","_data$candidates3$$co2","_data$candidates3$$co3","App","_s2","_s","$RefreshSig$","user","setUser","searchTerm","setSearchTerm","loading","setLoading","currentWordData","setCurrentWordData","albumData","setAlbumData","albumCache","setAlbumCache","favorites","setFavorites","favoriteAlbums","setFavoriteAlbums","messages","setMessages","role","chatInput","setChatInput","isRecording","setIsRecording","chatEndRef","activeTab","setActiveTab","getImageUrl","keyword","size","dimensions","Math","random","catch","console","error","unsubscribe","q","uid","snapshot","favs","docs","map","id","sort","a","b","_b$timestamp","_a$timestamp","timestamp","seconds","_chatEndRef$current","current","scrollIntoView","behavior","handleSearch","e","wordOverride","preventDefault","term","trim","err","alert","handleSpeak","window","speechSynthesis","cancel","utterance","SpeechSynthesisUtterance","lang","rate","speak","handleAlbumClick","prev","toggleFavoriteWord","wordData","existing","find","f","word","toggleFavoriteAlbum","handleSendChat","userMsg","isLoading","responseText","m","newMsgs","filter","startListening","recognition","webkitSpeechRecognition","continuous","interimResults","onstart","onend","onresult","event","transcript","results","start","AlbumView","isFav","some","className","children","onClick","fileName","_jsxFileName","lineNumber","columnNumber","fill","items","item","idx","isVisual","src","alt","article","zh","WordCard","onDelete","showPhraseDetails","setShowPhraseDetails","showAllPhrases","setShowAllPhrases","partOfSpeech","stopPropagation","definitions","en","examplePhrase","fr","explanation","relatedPhrases","length","slice","undefined","phrase","relatedWords","ChatView","msg","ref","type","value","onChange","target","placeholder","onKeyDown","key","disabled","onSubmit","album","fav","_c","$RefreshReg$"],"sources":["/Users/zhaolu/Documents/Code/frenchapp/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport { Search, Volume2, Star, BookOpen, ArrowRight, Loader2, Layers, X, ChevronDown, ChevronUp, Info, Mic, MessageCircle, Send, Heart, PlayCircle } from 'lucide-react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInAnonymously, onAuthStateChanged } from 'firebase/auth';\nimport { getFirestore, collection, addDoc, query, onSnapshot, deleteDoc, doc, serverTimestamp, where, getDocs } from 'firebase/firestore';\n\n// ==========================================\n// ⚠️ 请在下方填入您的配置信息\n// ==========================================\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyCBItd52zWdktiEuHmQIXbB4Q7sLM5602o\",\n  authDomain: \"frenchapp-6b44a.firebaseapp.com\",\n  projectId: \"frenchapp-6b44a\",\n  storageBucket: \"frenchapp-6b44a.firebasestorage.app\",\n  messagingSenderId: \"988616724582\",\n  appId: \"1:988616724582:web:723f9d9c75f8810b019da7\"\n};\n\n\nconst GEMINI_API_KEY = \"AIzaSyBivevjn0wQ3dD2OCuh98L2iALBssZfsq4\"; \n\n// ==========================================\n\nconst app = initializeApp(firebaseConfig);\nconst auth = getAuth(app);\nconst db = getFirestore(app);\nconst appId = \"french-memo-app\";\n\n// --- API Helper for Gemini ---\n\n// 1. 获取单个单词详情 (支持多语言输入)\nconst fetchWordData = async (input) => {\n  const apiKey = GEMINI_API_KEY; \n  if (!apiKey || apiKey.includes(\"YOUR_GEMINI_API_KEY\")) throw new Error(\"API Key not set\");\n\n  const prompt = `\n    User input: \"${input}\".\n    Task: \n    1. Detect the language of the input (French, English, or Chinese).\n    2. If input is NOT French, translate it to the most common French word.\n    3. Analyze this French word.\n    \n    Return strictly valid JSON (no markdown) with this schema:\n    {\n      \"word\": \"The French word (e.g., 'Pomme')\",\n      \"definitions\": {\n        \"en\": \"Concise English meaning\",\n        \"zh\": \"简洁中文释义\"\n      },\n      \"partOfSpeech\": \"abbrev. (e.g. n.m., adj.)\",\n      \"collection\": \"Category Name (e.g. Fruits, Voyage)\",\n      \"relatedWords\": [\"synonym1\", \"antonym1\", \"related1\"],\n      \"relatedPhrases\": [\n        {\"fr\": \"Phrase 1\", \"zh\": \"Meaning 1\"},\n        {\"fr\": \"Phrase 2\", \"zh\": \"Meaning 2\"}\n      ],\n      \"examplePhrase\": {\n        \"fr\": \"Simple French sentence\",\n        \"en\": \"English translation\",\n        \"zh\": \"Chinese translation\",\n        \"explanation\": \"Brief grammar/cultural note\"\n      }\n    }\n  `;\n\n  const response = await fetch(\n    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,\n    {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] }),\n    }\n  );\n  const data = await response.json();\n  const text = data.candidates?.[0]?.content?.parts?.[0]?.text;\n  return text ? JSON.parse(text) : null;\n};\n\n// 2. 获取专辑列表详情 (Prompt优化以提升速度)\nconst fetchAlbumData = async (category) => {\n  const apiKey = GEMINI_API_KEY;\n  // 简化 Prompt，减少 Token 输出，提升速度\n  const prompt = `\n    List 8 common French vocabulary items for category: \"${category}\".\n    Return valid JSON:\n    {\n      \"category\": \"${category}\",\n      \"items\": [\n        { \"word\": \"FrenchWord\", \"article\": \"le/la/un\", \"zh\": \"Chinese\", \"isVisual\": true/false }\n      ]\n    }\n  `;\n\n  const response = await fetch(\n    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,\n    {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] }),\n    }\n  );\n  const data = await response.json();\n  const text = data.candidates?.[0]?.content?.parts?.[0]?.text;\n  return text ? JSON.parse(text) : null;\n};\n\n// 3. 聊天 API\nconst fetchChatResponse = async (history, message) => {\n  const apiKey = GEMINI_API_KEY;\n  const prompt = `\n    You are a friendly French language tutor. \n    User message: \"${message}\".\n    Conversation history: ${JSON.stringify(history)}.\n    Reply in French, followed by a very brief English translation in parentheses. Keep it conversational and helpful.\n  `;\n  \n  const response = await fetch(\n    `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-09-2025:generateContent?key=${apiKey}`,\n    {\n      method: 'POST',\n      headers: { 'Content-Type': 'application/json' },\n      body: JSON.stringify({ contents: [{ parts: [{ text: prompt }] }] }),\n    }\n  );\n  const data = await response.json();\n  return data.candidates?.[0]?.content?.parts?.[0]?.text || \"Désolé, je ne comprends pas.\";\n};\n\nexport default function App() {\n  const [user, setUser] = useState(null);\n  const [searchTerm, setSearchTerm] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [currentWordData, setCurrentWordData] = useState(null);\n  \n  // 专辑相关\n  const [albumData, setAlbumData] = useState(null);\n  const [albumCache, setAlbumCache] = useState({}); // 缓存专辑数据优化速度\n\n  // 收藏相关\n  const [favorites, setFavorites] = useState([]);\n  const [favoriteAlbums, setFavoriteAlbums] = useState([]);\n\n  // 聊天相关\n  const [messages, setMessages] = useState([{ role: 'ai', text: 'Bonjour! Je suis ton prof de français. On discute? (你好！我是你的法语老师，我们聊聊？)' }]);\n  const [chatInput, setChatInput] = useState('');\n  const [isRecording, setIsRecording] = useState(false);\n  const chatEndRef = useRef(null);\n\n  const [activeTab, setActiveTab] = useState('search'); // 'search', 'favorites', 'album', 'chat'\n  \n  const getImageUrl = (keyword, size = 'medium') => {\n    const dimensions = size === 'small' ? 'width=200&height=200' : 'width=600&height=400';\n    // 增加随机数防止缓存导致图片不变\n    return `https://image.pollinations.ai/prompt/realistic%20${keyword}%20french%20context?${dimensions}&nologo=true&seed=${Math.random()}`;\n  };\n\n  useEffect(() => {\n    signInAnonymously(auth).catch(console.error);\n    const unsubscribe = onAuthStateChanged(auth, setUser);\n    return () => unsubscribe();\n  }, []);\n\n  // 同步单词收藏\n  useEffect(() => {\n    if (!user) return;\n    const q = query(collection(db, 'artifacts', appId, 'users', user.uid, 'favorites'));\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const favs = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      favs.sort((a, b) => (b.timestamp?.seconds || 0) - (a.timestamp?.seconds || 0));\n      setFavorites(favs);\n    });\n    return () => unsubscribe();\n  }, [user]);\n\n  // 同步专辑收藏\n  useEffect(() => {\n    if (!user) return;\n    const q = query(collection(db, 'artifacts', appId, 'users', user.uid, 'favoriteAlbums'));\n    const unsubscribe = onSnapshot(q, (snapshot) => {\n      const favs = snapshot.docs.map(doc => ({ id: doc.id, ...doc.data() }));\n      setFavoriteAlbums(favs);\n    });\n    return () => unsubscribe();\n  }, [user]);\n\n  // 聊天滚动到底部\n  useEffect(() => {\n    chatEndRef.current?.scrollIntoView({ behavior: 'smooth' });\n  }, [messages, activeTab]);\n\n  // --- Handlers ---\n  const handleSearch = async (e, wordOverride = null) => {\n    if (e) e.preventDefault();\n    const term = wordOverride || searchTerm;\n    if (!term.trim()) return;\n    \n    setLoading(true);\n    setCurrentWordData(null);\n    setAlbumData(null);\n    setActiveTab('search');\n    \n    try {\n      const data = await fetchWordData(term);\n      setCurrentWordData(data);\n    } catch (err) { alert(\"Error fetching word. Try again.\"); } \n    finally { setLoading(false); }\n  };\n\n  const handleSpeak = (text) => {\n    if ('speechSynthesis' in window) {\n      window.speechSynthesis.cancel();\n      const utterance = new SpeechSynthesisUtterance(text);\n      utterance.lang = 'fr-FR';\n      utterance.rate = 0.9;\n      window.speechSynthesis.speak(utterance);\n    }\n  };\n\n  const handleAlbumClick = async (category) => {\n    setActiveTab('album');\n    \n    // 检查缓存\n    if (albumCache[category]) {\n      setAlbumData(albumCache[category]);\n      return;\n    }\n\n    setLoading(true);\n    setAlbumData(null);\n    try {\n      const data = await fetchAlbumData(category);\n      setAlbumData(data);\n      // 写入缓存\n      setAlbumCache(prev => ({ ...prev, [category]: data }));\n    } catch (err) { console.error(err); alert(\"Failed to load album.\"); setActiveTab('search'); }\n    finally { setLoading(false); }\n  };\n\n  // --- Favorites Logic ---\n  const toggleFavoriteWord = async (wordData) => {\n    if (!user) return;\n    // 检查是否已收藏\n    const existing = favorites.find(f => f.word === wordData.word);\n    \n    try {\n      if (existing) {\n        await deleteDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'favorites', existing.id));\n      } else {\n        await addDoc(collection(db, 'artifacts', appId, 'users', user.uid, 'favorites'), { ...wordData, timestamp: serverTimestamp() });\n      }\n    } catch (e) {\n      console.error(\"Fav Error\", e);\n      alert(\"操作失败，请检查网络\");\n    }\n  };\n\n  const toggleFavoriteAlbum = async (albumData) => {\n    if (!user || !albumData) return;\n    const existing = favoriteAlbums.find(f => f.category === albumData.category);\n    \n    try {\n      if (existing) {\n        await deleteDoc(doc(db, 'artifacts', appId, 'users', user.uid, 'favoriteAlbums', existing.id));\n      } else {\n        await addDoc(collection(db, 'artifacts', appId, 'users', user.uid, 'favoriteAlbums'), { ...albumData, timestamp: serverTimestamp() });\n      }\n    } catch (e) {\n      console.error(\"Album Fav Error\", e);\n    }\n  };\n\n  // --- Chat Logic ---\n  const handleSendChat = async () => {\n    if (!chatInput.trim()) return;\n    const userMsg = { role: 'user', text: chatInput };\n    setMessages(prev => [...prev, userMsg]);\n    setChatInput('');\n    \n    // 简单的加载状态模拟\n    setMessages(prev => [...prev, { role: 'ai', text: '...', isLoading: true }]);\n\n    try {\n      const responseText = await fetchChatResponse(messages.map(m => ({role: m.role, content: m.text})), userMsg.text);\n      setMessages(prev => {\n        const newMsgs = prev.filter(m => !m.isLoading);\n        return [...newMsgs, { role: 'ai', text: responseText }];\n      });\n      handleSpeak(responseText); // 自动朗读回复\n    } catch (e) {\n      setMessages(prev => prev.filter(m => !m.isLoading));\n    }\n  };\n\n  const startListening = () => {\n    if (!('webkitSpeechRecognition' in window)) {\n      alert(\"此浏览器不支持语音输入，请使用 Chrome。\");\n      return;\n    }\n    const recognition = new window.webkitSpeechRecognition();\n    recognition.lang = 'fr-FR'; // 默认听法语，也可以设为 'zh-CN'\n    recognition.continuous = false;\n    recognition.interimResults = false;\n\n    recognition.onstart = () => setIsRecording(true);\n    recognition.onend = () => setIsRecording(false);\n    recognition.onresult = (event) => {\n      const transcript = event.results[0][0].transcript;\n      setChatInput(transcript);\n    };\n    recognition.start();\n  };\n\n  // --- Components ---\n\n  const AlbumView = ({ data }) => {\n    if (!data) return null;\n    const isFav = favoriteAlbums.some(f => f.category === data.category);\n\n    return (\n      <div className=\"space-y-6 animate-in fade-in slide-in-from-bottom-4 duration-500 pb-20\">\n        <div className=\"flex items-center justify-between mb-6\">\n          <div className=\"flex items-center gap-3\">\n            <button onClick={() => setActiveTab('search')} className=\"p-2 hover:bg-gray-100 rounded-full transition-colors\">\n              <ArrowRight className=\"rotate-180 text-gray-500\" />\n            </button>\n            <h2 className=\"text-2xl font-bold text-gray-900 flex items-center gap-2\">\n              <Layers className=\"text-blue-600\" size={24} />\n              {data.category}\n            </h2>\n          </div>\n          <button \n            onClick={() => toggleFavoriteAlbum(data)}\n            className={`p-3 rounded-full transition-colors ${isFav ? 'bg-red-50 text-red-500' : 'bg-gray-50 text-gray-400 hover:text-red-400'}`}\n          >\n            <Heart size={24} fill={isFav ? \"currentColor\" : \"none\"} />\n          </button>\n        </div>\n\n        <div className=\"grid grid-cols-2 gap-4\">\n          {data.items.map((item, idx) => {\n            if (item.isVisual) {\n              return (\n                <button \n                  key={idx}\n                  onClick={() => handleSearch(null, item.word)}\n                  className=\"group relative flex flex-col items-center bg-white rounded-2xl overflow-hidden shadow-sm hover:shadow-lg transition-all border border-gray-100 text-left\"\n                >\n                  <div className=\"w-full aspect-[4/3] bg-gray-50 relative overflow-hidden\">\n                    <img \n                      src={getImageUrl(item.word, 'small')} \n                      alt={item.word} \n                      className=\"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700\"\n                    />\n                    <div className=\"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/60 to-transparent p-3 pt-8\">\n                       <p className=\"text-white font-medium text-lg\">\n                         <span className=\"opacity-70 text-sm mr-1 font-normal\">{item.article}</span>\n                         {item.word}\n                       </p>\n                    </div>\n                  </div>\n                </button>\n              );\n            } else {\n              return (\n                <button \n                  key={idx}\n                  onClick={() => handleSearch(null, item.word)}\n                  className=\"col-span-2 flex items-center justify-between p-4 bg-white rounded-xl shadow-sm hover:shadow-md border border-gray-100 hover:border-blue-200 transition-all group\"\n                >\n                  <div>\n                    <span className=\"text-lg font-bold text-gray-800 group-hover:text-blue-600 transition-colors\">{item.word}</span>\n                  </div>\n                  <span className=\"text-sm text-gray-500 font-medium\">{item.zh}</span>\n                </button>\n              );\n            }\n          })}\n        </div>\n      </div>\n    );\n  };\n\n  const WordCard = ({ data, onDelete }) => {\n    const [showPhraseDetails, setShowPhraseDetails] = useState(false);\n    const [showAllPhrases, setShowAllPhrases] = useState(false);\n    const isFav = favorites.some(f => f.word === data.word);\n\n    return (\n    <div className=\"bg-white rounded-[2rem] shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden border border-gray-100 mb-8\">\n      <div className=\"h-56 overflow-hidden bg-gray-50 relative\">\n        <img src={getImageUrl(data.word)} alt={data.word} className=\"w-full h-full object-cover\" />\n      </div>\n\n      <div className=\"flex gap-2 px-8 pt-4 bg-white\">\n        <span className=\"bg-blue-50 px-3 py-1.5 rounded-full text-xs font-bold text-blue-600 uppercase tracking-wider\">\n          {data.partOfSpeech}\n        </span>\n        <button \n          onClick={() => handleAlbumClick(data.collection)}\n          className=\"bg-gray-100 hover:bg-gray-200 px-3 py-1.5 rounded-full text-xs font-bold text-gray-600 flex items-center gap-1.5 transition-colors cursor-pointer\"\n        >\n          <Layers size={14} />\n          {data.collection}\n        </button>\n      </div>\n\n      <div className=\"p-8 pt-2\">\n        <div className=\"flex justify-between items-center mb-6\">\n          <div className=\"flex items-center gap-3\">\n            <h2 className=\"text-4xl font-bold text-gray-900 tracking-tight\">{data.word}</h2>\n            <button onClick={(e) => { e.stopPropagation(); handleSpeak(data.word); }} className=\"p-2.5 rounded-full bg-blue-50 text-blue-600 hover:bg-blue-100 transition-colors\">\n              <Volume2 size={20} />\n            </button>\n          </div>\n          {onDelete ? (\n             <button onClick={() => onDelete(data.id)} className=\"p-2.5 rounded-full text-gray-300 hover:text-red-500 hover:bg-red-50 transition-colors\">\n               <X size={22} />\n             </button>\n          ) : (\n             <button onClick={() => toggleFavoriteWord(data)} className={`p-2.5 rounded-full transition-colors ${isFav ? 'text-yellow-400 bg-yellow-50' : 'text-gray-300 hover:text-yellow-400 hover:bg-yellow-50'}`}>\n               <Star size={22} fill={isFav ? \"currentColor\" : \"none\"} />\n             </button>\n          )}\n        </div>\n\n        {/* 释义：上下布局 */}\n        <div className=\"mb-8 space-y-3 bg-gray-50/50 p-4 rounded-xl\">\n           <div className=\"flex flex-col gap-1\">\n             <span className=\"text-xs font-bold text-gray-400 uppercase\">CN</span>\n             <span className=\"text-xl font-bold text-gray-900 leading-snug\">{data.definitions.zh}</span>\n           </div>\n           <div className=\"h-px bg-gray-200 w-full my-1\"></div>\n           <div className=\"flex flex-col gap-1\">\n             <span className=\"text-xs font-bold text-gray-400 uppercase\">EN</span>\n             <span className=\"text-lg font-medium text-gray-600 leading-snug\">{data.definitions.en}</span>\n           </div>\n        </div>\n\n        {/* 交互式例句 */}\n        <div className=\"space-y-4\">\n          <div onClick={() => { handleSpeak(data.examplePhrase.fr); setShowPhraseDetails(!showPhraseDetails); }} className=\"bg-blue-50/50 rounded-xl border border-blue-100 overflow-hidden cursor-pointer hover:bg-blue-50 transition-colors\">\n            <div className=\"p-4 flex justify-between items-start gap-3\">\n               <div>\n                 <div className=\"flex items-center gap-2 mb-1\">\n                    <span className=\"text-[10px] font-bold text-blue-400 uppercase tracking-widest\">Exemple</span>\n                    <Mic size={12} className=\"text-blue-400\" />\n                 </div>\n                 <p className=\"text-xl text-gray-800 font-serif italic leading-snug\">\"{data.examplePhrase.fr}\"</p>\n               </div>\n               <ChevronDown size={18} className={`text-blue-300 mt-2 transition-transform ${showPhraseDetails ? 'rotate-180' : ''}`} />\n            </div>\n            {showPhraseDetails && (\n              <div className=\"px-4 pb-4 pt-0 space-y-2 animate-in slide-in-from-top-2\">\n                 <p className=\"text-sm text-gray-600\">{data.examplePhrase.zh}</p>\n                 <p className=\"text-sm text-gray-500\">{data.examplePhrase.en}</p>\n                 {data.examplePhrase.explanation && (\n                   <div className=\"mt-2 text-xs text-blue-500 bg-blue-100/50 p-2 rounded-lg\">💡 {data.examplePhrase.explanation}</div>\n                 )}\n              </div>\n            )}\n          </div>\n\n          {/* 相关短语 */}\n          {data.relatedPhrases && data.relatedPhrases.length > 0 && (\n            <div className=\"pl-2\">\n              <h4 className=\"text-xs font-bold text-gray-400 uppercase mb-3 tracking-wider\">常用短语</h4>\n              <div className=\"space-y-2\">\n                {data.relatedPhrases.slice(0, showAllPhrases ? undefined : 2).map((phrase, idx) => (\n                   <div key={idx} className=\"flex justify-between items-center group py-1 border-b border-gray-50 last:border-0\">\n                      <span className=\"text-gray-700 font-medium cursor-pointer hover:text-blue-600\" onClick={() => handleSpeak(phrase.fr)}>{phrase.fr}</span>\n                      <span className=\"text-sm text-gray-400\">{phrase.zh}</span>\n                   </div>\n                ))}\n              </div>\n              {data.relatedPhrases.length > 2 && (\n                <button onClick={() => setShowAllPhrases(!showAllPhrases)} className=\"text-xs text-blue-500 font-medium mt-2 hover:underline flex items-center gap-1\">\n                  {showAllPhrases ? \"收起\" : `查看更多 (${data.relatedPhrases.length - 2})`}\n                </button>\n              )}\n            </div>\n          )}\n        </div>\n\n        {/* 底部相关词 */}\n        {data.relatedWords && data.relatedWords.length > 0 && (\n          <div className=\"pt-8 mt-8 border-t border-gray-100\">\n             <div className=\"flex overflow-x-auto pb-4 gap-3 no-scrollbar\">\n                {data.relatedWords.map((word, idx) => (\n                  <button key={idx} onClick={() => handleSearch(null, word)} className=\"flex-shrink-0 flex flex-col items-center w-20 group\">\n                    <div className=\"w-16 h-16 rounded-xl overflow-hidden mb-2 bg-gray-100 border border-gray-200 group-hover:border-blue-300 transition-all\">\n                       <img src={getImageUrl(word, 'small')} className=\"w-full h-full object-cover opacity-80 group-hover:opacity-100 group-hover:scale-110 transition-all\" />\n                    </div>\n                    <span className=\"text-xs text-gray-500 group-hover:text-blue-600 truncate w-full text-center\">{word}</span>\n                  </button>\n                ))}\n             </div>\n          </div>\n        )}\n      </div>\n    </div>\n    );\n  };\n\n  const ChatView = () => (\n    <div className=\"flex flex-col h-[calc(100vh-140px)]\">\n      <div className=\"flex-1 overflow-y-auto p-4 space-y-4\">\n        {messages.map((msg, idx) => (\n          <div key={idx} className={`flex ${msg.role === 'user' ? 'justify-end' : 'justify-start'}`}>\n            <div className={`max-w-[80%] p-4 rounded-2xl ${\n              msg.role === 'user' \n                ? 'bg-blue-600 text-white rounded-br-none' \n                : 'bg-white border border-gray-100 text-gray-800 rounded-bl-none shadow-sm'\n            }`}>\n              <p className=\"text-sm leading-relaxed\">{msg.text}</p>\n              {msg.role === 'ai' && !msg.isLoading && (\n                 <button onClick={() => handleSpeak(msg.text)} className=\"mt-2 text-blue-400 hover:text-blue-600\"><Volume2 size={16} /></button>\n              )}\n            </div>\n          </div>\n        ))}\n        <div ref={chatEndRef} />\n      </div>\n      <div className=\"p-4 bg-white border-t border-gray-100\">\n        <div className=\"flex items-center gap-2 bg-gray-50 p-2 rounded-full border border-gray-200 focus-within:ring-2 focus-within:ring-blue-100 transition-all\">\n          <input \n            type=\"text\" \n            value={chatInput} \n            onChange={e => setChatInput(e.target.value)} \n            placeholder=\"Type or speak (French)...\" \n            className=\"flex-1 bg-transparent border-none focus:ring-0 px-4 py-2 text-gray-800 placeholder-gray-400\"\n            onKeyDown={e => e.key === 'Enter' && handleSendChat()}\n          />\n          <button \n            onClick={startListening} \n            className={`p-2 rounded-full transition-colors ${isRecording ? 'bg-red-500 text-white animate-pulse' : 'text-gray-400 hover:text-blue-600'}`}\n          >\n            <Mic size={20} />\n          </button>\n          <button \n            onClick={handleSendChat} \n            className=\"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors shadow-md disabled:opacity-50\"\n            disabled={!chatInput.trim()}\n          >\n            <Send size={18} />\n          </button>\n        </div>\n      </div>\n    </div>\n  );\n\n  return (\n    <div className=\"min-h-screen bg-gray-50 font-sans text-gray-900 pb-24\">\n      {/* Header */}\n      <div className=\"bg-white/80 backdrop-blur-md border-b border-gray-100 sticky top-0 z-30\">\n        <div className=\"max-w-xl mx-auto px-6 py-4 flex justify-between items-center\">\n          <h1 \n            onClick={() => setActiveTab('search')}\n            className=\"text-xl font-bold text-gray-900 flex items-center gap-2 tracking-tight cursor-pointer\"\n          >\n            <BookOpen size={22} className=\"text-blue-600\" />\n            FrenchMemo\n          </h1>\n          <div className=\"text-xs text-gray-400 font-medium font-mono\">\n             {user ? `UID: ${user.uid.slice(0,4)}` : 'Connecting...'}\n          </div>\n        </div>\n        \n        {/* Navigation Tabs (Fixed Bottom on Mobile usually, but here top for simplicity as per previous design) */}\n        {activeTab !== 'album' && (\n          <div className=\"flex max-w-xl mx-auto px-6 overflow-x-auto no-scrollbar\">\n            <button onClick={() => setActiveTab('search')} className={`flex-1 pb-3 text-sm font-semibold border-b-2 transition-all whitespace-nowrap px-4 ${activeTab === 'search' ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-400 hover:text-gray-600'}`}>Search</button>\n            <button onClick={() => setActiveTab('chat')} className={`flex-1 pb-3 text-sm font-semibold border-b-2 transition-all whitespace-nowrap px-4 ${activeTab === 'chat' ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-400 hover:text-gray-600'}`}>Chat AI</button>\n            <button onClick={() => setActiveTab('favorites')} className={`flex-1 pb-3 text-sm font-semibold border-b-2 transition-all whitespace-nowrap px-4 ${activeTab === 'favorites' ? 'border-blue-600 text-blue-600' : 'border-transparent text-gray-400 hover:text-gray-600'}`}>Favs ({favorites.length})</button>\n          </div>\n        )}\n      </div>\n\n      <div className=\"max-w-xl mx-auto px-6 py-8\">\n        \n        {/* Chat Tab */}\n        {activeTab === 'chat' && <ChatView />}\n\n        {/* Album Tab */}\n        {activeTab === 'album' && loading && (\n           <div className=\"text-center py-20 flex flex-col items-center\">\n             <Loader2 className=\"animate-spin text-blue-600 mb-4\" size={32} />\n             <p className=\"text-gray-500\">正在生成专辑...</p>\n           </div>\n        )}\n        \n        {activeTab === 'album' && !loading && albumData && <AlbumView data={albumData} />}\n\n        {/* Search Tab */}\n        {activeTab === 'search' && (\n          <>\n            <form onSubmit={handleSearch} className=\"relative mb-10 group z-10\">\n              <div className={`absolute inset-0 bg-blue-500/5 rounded-full blur-xl transition-opacity duration-300 ${loading ? 'opacity-100' : 'opacity-0 group-hover:opacity-100'}`}></div>\n              <input type=\"text\" value={searchTerm} onChange={(e) => setSearchTerm(e.target.value)} placeholder=\"输入中/英/法文...\" className=\"w-full pl-14 pr-14 py-4 bg-white border-0 rounded-full shadow-[0_8px_30px_rgb(0,0,0,0.06)] text-xl font-medium placeholder:text-gray-300 focus:outline-none focus:ring-2 focus:ring-blue-500/20 transition-all relative z-10\" />\n              <Search className=\"absolute left-5 top-1/2 -translate-y-1/2 text-gray-400 z-20\" size={22} />\n              <button type=\"submit\" disabled={loading} className=\"absolute right-3 top-1/2 -translate-y-1/2 p-2.5 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors disabled:opacity-70 hover:scale-105 active:scale-95 z-20 shadow-md\">\n                {loading ? <Loader2 className=\"animate-spin\" size={20} /> : <ArrowRight size={20} />}\n              </button>\n            </form>\n            {currentWordData && <WordCard data={currentWordData} />}\n            {!currentWordData && !loading && (\n              <div className=\"text-center py-16\">\n                <div className=\"bg-white p-6 rounded-full inline-block shadow-sm mb-6\"><Search size={40} className=\"text-blue-100\" /></div>\n                <h3 className=\"text-gray-900 font-bold text-lg mb-2\">Prêt à apprendre ?</h3>\n                <p className=\"text-gray-500 mb-8\">支持中文、英语或法语输入，自动翻译并解析。</p>\n              </div>\n            )}\n          </>\n        )}\n\n        {/* Favorites Tab */}\n        {activeTab === 'favorites' && (\n          <div className=\"space-y-8\">\n            {favoriteAlbums.length > 0 && (\n              <div className=\"mb-8\">\n                <h3 className=\"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4\">收藏的专辑</h3>\n                <div className=\"grid grid-cols-2 gap-3\">\n                  {favoriteAlbums.map(album => (\n                    <button key={album.id} onClick={() => handleAlbumClick(album.category)} className=\"bg-white p-4 rounded-xl border border-gray-100 shadow-sm text-left hover:border-blue-200 transition-all\">\n                      <div className=\"flex justify-between items-start\">\n                         <span className=\"font-bold text-gray-800\">{album.category}</span>\n                         <Layers size={16} className=\"text-blue-500\" />\n                      </div>\n                      <span className=\"text-xs text-gray-400 mt-2 block\">{album.items.length} words</span>\n                    </button>\n                  ))}\n                </div>\n              </div>\n            )}\n\n            <h3 className=\"text-sm font-bold text-gray-400 uppercase tracking-wider mb-4\">收藏的单词</h3>\n            {favorites.length === 0 ? (\n              <div className=\"text-center py-10\"><p className=\"text-gray-500 font-medium\">暂无收藏单词</p></div>\n            ) : (\n              favorites.map(fav => <WordCard key={fav.id} data={fav} onDelete={toggleFavoriteWord} />)\n            )}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n}"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}